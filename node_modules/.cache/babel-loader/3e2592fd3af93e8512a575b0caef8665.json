{"ast":null,"code":"import _defineProperty from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import RoomIcon from'@material-ui/icons/Room';import{getLocationId}from'../../../Utils/Message';import{getSrc}from'../../../Utils/File';import{LOCATION_HEIGHT,LOCATION_SCALE,LOCATION_WIDTH,LOCATION_ZOOM}from'../../../Constants';import FileStore from'../../../Stores/FileStore';import'./Location.css';var Location=/*#__PURE__*/function(_React$Component){_inherits(Location,_React$Component);function Location(){var _getPrototypeOf2;var _this;_classCallCheck(this,Location);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Location)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.onClientUpdateLocationBlob=function(update){var fileId=update.fileId;var _this$props=_this.props,location=_this$props.location,width=_this$props.width,height=_this$props.height,zoom=_this$props.zoom,scale=_this$props.scale;var locationId=getLocationId(location,width,height,zoom,scale);var file=FileStore.getLocationFile(locationId);if(!file)return;if(file.id===fileId){_this.forceUpdate();}};return _this;}_createClass(Location,[{key:\"componentDidMount\",value:function componentDidMount(){FileStore.on('clientUpdateLocationBlob',this.onClientUpdateLocationBlob);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){FileStore.removeListener('clientUpdateLocationBlob',this.onClientUpdateLocationBlob);}},{key:\"render\",value:function render(){var _this$props2=this.props,location=_this$props2.location,width=_this$props2.width,height=_this$props2.height,zoom=_this$props2.zoom,scale=_this$props2.scale,style=_this$props2.style;if(!location)return null;var locationId=getLocationId(location,width,height,zoom,scale);var file=FileStore.getLocationFile(locationId);var src=getSrc(file);var longitude=location.longitude,latitude=location.latitude;var source=\"https://maps.google.com/?q=\".concat(latitude,\",\").concat(longitude);var locationStyle=_objectSpread({width:width,height:height},style);return React.createElement(\"div\",{className:\"location\",style:locationStyle},React.createElement(\"a\",{href:source,target:\"_blank\",rel:\"noopener noreferrer\"},React.createElement(\"div\",{className:\"location-wrapper\"},React.createElement(\"img\",{className:\"location-image\",draggable:false,alt:source,src:src}),React.createElement(\"div\",{className:\"location-icon\"},React.createElement(RoomIcon,{fontSize:\"large\",color:\"primary\"})))));}}]);return Location;}(React.Component);Location.defaultProps={width:LOCATION_WIDTH,height:LOCATION_HEIGHT,zoom:LOCATION_ZOOM,scale:LOCATION_SCALE};export default Location;","map":{"version":3,"sources":["/Users/yosuahalim/Documents/Projects/telegram-app/src/Components/Message/Media/Location.js"],"names":["React","RoomIcon","getLocationId","getSrc","LOCATION_HEIGHT","LOCATION_SCALE","LOCATION_WIDTH","LOCATION_ZOOM","FileStore","Location","onClientUpdateLocationBlob","update","fileId","props","location","width","height","zoom","scale","locationId","file","getLocationFile","id","forceUpdate","on","removeListener","style","src","longitude","latitude","source","locationStyle","Component","defaultProps"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport RoomIcon from '@material-ui/icons/Room';\nimport { getLocationId } from '../../../Utils/Message';\nimport { getSrc } from '../../../Utils/File';\nimport { LOCATION_HEIGHT, LOCATION_SCALE, LOCATION_WIDTH, LOCATION_ZOOM } from '../../../Constants';\nimport FileStore from '../../../Stores/FileStore';\nimport './Location.css';\n\nclass Location extends React.Component {\n    componentDidMount() {\n        FileStore.on('clientUpdateLocationBlob', this.onClientUpdateLocationBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateLocationBlob', this.onClientUpdateLocationBlob);\n    }\n\n    onClientUpdateLocationBlob = update => {\n        const { fileId } = update;\n        const { location, width, height, zoom, scale } = this.props;\n\n        const locationId = getLocationId(location, width, height, zoom, scale);\n        const file = FileStore.getLocationFile(locationId);\n        if (!file) return;\n\n        if (file.id === fileId) {\n            this.forceUpdate();\n        }\n    };\n\n    render() {\n        const { location, width, height, zoom, scale, style } = this.props;\n        if (!location) return null;\n\n        const locationId = getLocationId(location, width, height, zoom, scale);\n        const file = FileStore.getLocationFile(locationId);\n        const src = getSrc(file);\n\n        const { longitude, latitude } = location;\n        const source = `https://maps.google.com/?q=${latitude},${longitude}`;\n\n        const locationStyle = {\n            width,\n            height,\n            ...style\n        };\n\n        return (\n            <div className='location' style={locationStyle}>\n                <a href={source} target='_blank' rel='noopener noreferrer'>\n                    <div className='location-wrapper'>\n                        <img className='location-image' draggable={false} alt={source} src={src} />\n                        <div className='location-icon'>\n                            <RoomIcon fontSize='large' color='primary' />\n                        </div>\n                    </div>\n                </a>\n            </div>\n        );\n    }\n}\n\nLocation.propTypes = {\n    chatId: PropTypes.number,\n    messageId: PropTypes.number,\n    location: PropTypes.object.isRequired,\n    openMedia: PropTypes.func,\n\n    width: PropTypes.number,\n    height: PropTypes.number,\n    zoom: PropTypes.number,\n    scale: PropTypes.number\n};\n\nLocation.defaultProps = {\n    width: LOCATION_WIDTH,\n    height: LOCATION_HEIGHT,\n    zoom: LOCATION_ZOOM,\n    scale: LOCATION_SCALE\n};\n\nexport default Location;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _slicedToArray from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _regeneratorRuntime from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _defineProperty from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import classNames from'classnames';import{compose}from'recompose';import withStyles from'@material-ui/core/styles/withStyles';import{withTranslation}from'react-i18next';import Button from'@material-ui/core/Button';import SvgIcon from'@material-ui/core/SvgIcon';import Animation from'./Animation';import Audio from'./Audio';import Document from'./Document';import Photo from'./Photo';import Sticker,{StickerSourceEnum}from'./Sticker';import Video from'./Video';import VideoNote from'./VideoNote';import VoiceNote from'./VoiceNote';import{accentStyles}from'../../Theme';import{getSize}from'../../../Utils/Common';import{getSrc}from'../../../Utils/File';import{openInstantView}from'../../../Actions/InstantView';import{PHOTO_DISPLAY_EXTRA_SMALL_SIZE,PHOTO_DISPLAY_SIZE,PHOTO_DISPLAY_SMALL_SIZE,PHOTO_SIZE}from'../../../Constants';import MessageStore from'../../../Stores/MessageStore';import'./WebPage.css';var styles=function styles(theme){return _objectSpread({},accentStyles(theme),{instantViewButton:{width:260,marginTop:12}});};var WebPage=/*#__PURE__*/function(_React$Component){_inherits(WebPage,_React$Component);function WebPage(){var _getPrototypeOf2;var _this;_classCallCheck(this,WebPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(WebPage)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.getMedia=function(){var _this$props=_this.props,chatId=_this$props.chatId,messageId=_this$props.messageId,size=_this$props.size,displaySize=_this$props.displaySize,displaySmallSize=_this$props.displaySmallSize,displayExtraSmallSize=_this$props.displayExtraSmallSize,openMedia=_this$props.openMedia;var message=MessageStore.get(chatId,messageId);if(!message)return null;var content=message.content;if(!content)return null;var web_page=content.web_page;if(!web_page)return null;var site_name=web_page.site_name,title=web_page.title,description=web_page.description,url=web_page.url,photo=web_page.photo,animation=web_page.animation,video=web_page.video,audio=web_page.audio,document=web_page.document,voice_note=web_page.voice_note,video_note=web_page.video_note,sticker=web_page.sticker,type=web_page.type;if(sticker){return[null,React.createElement(Sticker,{chatId:chatId,messageId:messageId,sticker:sticker,openMedia:openMedia,source:StickerSourceEnum.MESSAGE})];}if(voice_note){return[null,React.createElement(VoiceNote,{chatId:chatId,messageId:messageId,voiceNote:voice_note,openMedia:openMedia})];}if(video_note){return[null,React.createElement(VideoNote,{chatId:chatId,messageId:messageId,videoNote:video_note,openMedia:openMedia})];}if(audio){return[null,React.createElement(Audio,{chatId:chatId,messageId:messageId,audio:audio,openMedia:openMedia})];}if(document){return[null,React.createElement(Document,{chatId:chatId,messageId:messageId,document:document,openMedia:openMedia})];}if(animation){var animationSrc=getSrc(animation.animation);if(animationSrc||animation.thumbnail){return[null,React.createElement(Animation,{chatId:chatId,messageId:messageId,animation:animation,openMedia:openMedia})];}}if(video){if(video.thumbnail){return[null,React.createElement(Video,{chatId:chatId,messageId:messageId,video:video,openMedia:openMedia})];}}if(photo){var photoSize=getSize(photo.sizes,size);var smallPhoto=(type==='article'||type==='photo')&&(site_name||title||description)&&photoSize&&photoSize.width===photoSize.height;var extraSmallPhoto=smallPhoto&&(!description||description.length<50);var style=smallPhoto||extraSmallPhoto?{float:'right',marginLeft:6}:{};return[smallPhoto?React.createElement(Photo,{displaySize:extraSmallPhoto?displayExtraSmallSize:displaySmallSize,style:style,chatId:chatId,messageId:messageId,photo:photo,openMedia:openMedia}):null,!smallPhoto?React.createElement(Photo,{chatId:chatId,messageId:messageId,photo:photo,openMedia:openMedia}):null];}return[null,null];};_this.handleInstantViewClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _this$props2,chatId,messageId,message,content,web_page,url;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();event.stopPropagation();_this$props2=_this.props,chatId=_this$props2.chatId,messageId=_this$props2.messageId;message=MessageStore.get(chatId,messageId);if(message){_context.next=6;break;}return _context.abrupt(\"return\",null);case 6:content=message.content;if(content){_context.next=9;break;}return _context.abrupt(\"return\",null);case 9:web_page=content.web_page;if(web_page){_context.next=12;break;}return _context.abrupt(\"return\",null);case 12:url=web_page.url;openInstantView(url);case 14:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.getWebPage=function(){var _this$props3=_this.props,classes=_this$props3.classes,chatId=_this$props3.chatId,messageId=_this$props3.messageId,t=_this$props3.t;var message=MessageStore.get(chatId,messageId);if(!message)return null;var content=message.content;if(!content)return null;var web_page=content.web_page;if(!web_page)return null;var description=web_page.description,instant_view_version=web_page.instant_view_version,site_name=web_page.site_name,title=web_page.title;var webPageContent=React.createElement(React.Fragment,null,site_name&&React.createElement(\"div\",{className:classNames('web-page-site-name',classes.accentColorMain)},site_name),title&&React.createElement(\"div\",{className:\"web-page-title\"},title),description&&React.createElement(\"div\",{className:\"web-page-description\"},description));var _this$getMedia=_this.getMedia(),_this$getMedia2=_slicedToArray(_this$getMedia,2),webPageMediaTop=_this$getMedia2[0],webPageMediaBottom=_this$getMedia2[1];var webPageInstantView=instant_view_version>0&&React.createElement(Button,{variant:\"outlined\",color:\"primary\",onClick:_this.handleInstantViewClick,className:classNames(classes.instantViewButton,'web-page-button')},React.createElement(SvgIcon,null,React.createElement(\"path\",{d:\"M10.5159727,16.7438514 C10.1741929,18.1203636 10.687342,18.4055299 11.6053255,17.4005852 L15.4613785,12.9698209 C16.3535455,11.8808642 16.1300862,11.0059438 14.8452805,10.7872179 L12.9861121,10.4429102 L12.9861121,10.4429102 C12.8775019,10.4227962 12.8057616,10.3184447 12.8258756,10.2098345 C12.8265392,10.2062511 12.8273007,10.2026864 12.8281591,10.1991446 L13.5436135,7.24719783 C13.8863521,5.8619451 13.3150978,5.61107807 12.4582164,6.59275159 C11.2270125,7.98097123 10.2913754,9.02966176 9.65130514,9.73882318 C9.42814828,9.98606827 9.06894462,10.3719875 8.57369417,10.8965808 C7.48829706,12.1010165 8.05955136,12.9745105 9.31498713,13.1932365 L11.0917769,13.5117472 L11.0917769,13.5117472 C11.2005008,13.5312372 11.2728391,13.6351751 11.253349,13.743899 C11.2525988,13.7480841 11.2517153,13.7522442 11.2506999,13.756373 L10.5159727,16.7438514 Z\"})),t('InstantView'));return React.createElement(React.Fragment,null,webPageMediaTop,webPageContent,webPageMediaBottom,webPageInstantView);};return _this;}_createClass(WebPage,[{key:\"render\",value:function render(){var classes=this.props.classes;return React.createElement(\"div\",{className:\"web-page\"},React.createElement(\"div\",{className:classNames('web-page-border',classes.accentBackgroundLight)}),React.createElement(\"div\",{className:\"web-page-wrapper\"},this.getWebPage()));}}]);return WebPage;}(React.Component);WebPage.defaultProps={size:PHOTO_SIZE,displaySize:PHOTO_DISPLAY_SIZE,displaySmallSize:PHOTO_DISPLAY_SMALL_SIZE,displayExtraSmallSize:PHOTO_DISPLAY_EXTRA_SMALL_SIZE};var enhance=compose(withStyles(styles),withTranslation());export default enhance(WebPage);","map":{"version":3,"sources":["/home/me-admin/Downloads/my-app/src/Components/Message/Media/WebPage.js"],"names":["React","classNames","compose","withStyles","withTranslation","Button","SvgIcon","Animation","Audio","Document","Photo","Sticker","StickerSourceEnum","Video","VideoNote","VoiceNote","accentStyles","getSize","getSrc","openInstantView","PHOTO_DISPLAY_EXTRA_SMALL_SIZE","PHOTO_DISPLAY_SIZE","PHOTO_DISPLAY_SMALL_SIZE","PHOTO_SIZE","MessageStore","styles","theme","instantViewButton","width","marginTop","WebPage","getMedia","props","chatId","messageId","size","displaySize","displaySmallSize","displayExtraSmallSize","openMedia","message","get","content","web_page","site_name","title","description","url","photo","animation","video","audio","document","voice_note","video_note","sticker","type","MESSAGE","animationSrc","thumbnail","photoSize","sizes","smallPhoto","height","extraSmallPhoto","length","style","float","marginLeft","handleInstantViewClick","event","preventDefault","stopPropagation","getWebPage","classes","t","instant_view_version","webPageContent","accentColorMain","webPageMediaTop","webPageMediaBottom","webPageInstantView","accentBackgroundLight","Component","defaultProps","enhance"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport Animation from './Animation';\nimport Audio from './Audio';\nimport Document from './Document';\nimport Photo from './Photo';\nimport Sticker, { StickerSourceEnum } from './Sticker';\nimport Video from './Video';\nimport VideoNote from './VideoNote';\nimport VoiceNote from './VoiceNote';\nimport { accentStyles } from '../../Theme';\nimport { getSize } from '../../../Utils/Common';\nimport { getSrc } from '../../../Utils/File';\nimport { openInstantView } from '../../../Actions/InstantView';\nimport {\n    PHOTO_DISPLAY_EXTRA_SMALL_SIZE,\n    PHOTO_DISPLAY_SIZE,\n    PHOTO_DISPLAY_SMALL_SIZE,\n    PHOTO_SIZE\n} from '../../../Constants';\nimport MessageStore from '../../../Stores/MessageStore';\nimport './WebPage.css';\n\nconst styles = theme => ({\n    ...accentStyles(theme),\n    instantViewButton: {\n        width: 260,\n        marginTop: 12\n    }\n});\n\nclass WebPage extends React.Component {\n    getMedia = () => {\n        const { chatId, messageId, size, displaySize, displaySmallSize, displayExtraSmallSize, openMedia } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const { content } = message;\n        if (!content) return null;\n\n        const { web_page } = content;\n        if (!web_page) return null;\n\n        const {\n            site_name,\n            title,\n            description,\n            url,\n            photo,\n            animation,\n            video,\n            audio,\n            document,\n            voice_note,\n            video_note,\n            sticker,\n            type\n        } = web_page;\n\n        if (sticker) {\n            return [\n                null,\n                <Sticker\n                    chatId={chatId}\n                    messageId={messageId}\n                    sticker={sticker}\n                    openMedia={openMedia}\n                    source={StickerSourceEnum.MESSAGE}\n                />\n            ];\n        }\n\n        if (voice_note) {\n            return [\n                null,\n                <VoiceNote chatId={chatId} messageId={messageId} voiceNote={voice_note} openMedia={openMedia} />\n            ];\n        }\n\n        if (video_note) {\n            return [\n                null,\n                <VideoNote chatId={chatId} messageId={messageId} videoNote={video_note} openMedia={openMedia} />\n            ];\n        }\n\n        if (audio) {\n            return [null, <Audio chatId={chatId} messageId={messageId} audio={audio} openMedia={openMedia} />];\n        }\n\n        if (document) {\n            return [null, <Document chatId={chatId} messageId={messageId} document={document} openMedia={openMedia} />];\n        }\n\n        if (animation) {\n            const animationSrc = getSrc(animation.animation);\n            if (animationSrc || animation.thumbnail) {\n                return [\n                    null,\n                    <Animation chatId={chatId} messageId={messageId} animation={animation} openMedia={openMedia} />\n                ];\n            }\n        }\n\n        if (video) {\n            if (video.thumbnail) {\n                return [null, <Video chatId={chatId} messageId={messageId} video={video} openMedia={openMedia} />];\n            }\n        }\n\n        if (photo) {\n            const photoSize = getSize(photo.sizes, size);\n            const smallPhoto =\n                (type === 'article' || type === 'photo') &&\n                (site_name || title || description) &&\n                photoSize &&\n                photoSize.width === photoSize.height;\n            const extraSmallPhoto = smallPhoto && (!description || description.length < 50);\n\n            const style =\n                smallPhoto || extraSmallPhoto\n                    ? {\n                          float: 'right',\n                          marginLeft: 6\n                      }\n                    : {};\n\n            return [\n                smallPhoto ? (\n                    <Photo\n                        displaySize={extraSmallPhoto ? displayExtraSmallSize : displaySmallSize}\n                        style={style}\n                        chatId={chatId}\n                        messageId={messageId}\n                        photo={photo}\n                        openMedia={openMedia}\n                    />\n                ) : null,\n                !smallPhoto ? <Photo chatId={chatId} messageId={messageId} photo={photo} openMedia={openMedia} /> : null\n            ];\n        }\n\n        return [null, null];\n    };\n\n    handleInstantViewClick = async event => {\n        event.preventDefault();\n        event.stopPropagation();\n\n        const { chatId, messageId } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const { content } = message;\n        if (!content) return null;\n\n        const { web_page } = content;\n        if (!web_page) return null;\n\n        const { url } = web_page;\n\n        openInstantView(url);\n    };\n\n    getWebPage = () => {\n        const { classes, chatId, messageId, t } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const { content } = message;\n        if (!content) return null;\n\n        const { web_page } = content;\n        if (!web_page) return null;\n\n        const { description, instant_view_version, site_name, title } = web_page;\n\n        const webPageContent = (\n            <>\n                {site_name && (\n                    <div className={classNames('web-page-site-name', classes.accentColorMain)}>{site_name}</div>\n                )}\n                {title && <div className='web-page-title'>{title}</div>}\n                {description && <div className='web-page-description'>{description}</div>}\n            </>\n        );\n        const [webPageMediaTop, webPageMediaBottom] = this.getMedia();\n        const webPageInstantView = instant_view_version > 0 && (\n            <Button\n                variant='outlined'\n                color='primary'\n                onClick={this.handleInstantViewClick}\n                className={classNames(classes.instantViewButton, 'web-page-button')}>\n                <SvgIcon>\n                    <path d='M10.5159727,16.7438514 C10.1741929,18.1203636 10.687342,18.4055299 11.6053255,17.4005852 L15.4613785,12.9698209 C16.3535455,11.8808642 16.1300862,11.0059438 14.8452805,10.7872179 L12.9861121,10.4429102 L12.9861121,10.4429102 C12.8775019,10.4227962 12.8057616,10.3184447 12.8258756,10.2098345 C12.8265392,10.2062511 12.8273007,10.2026864 12.8281591,10.1991446 L13.5436135,7.24719783 C13.8863521,5.8619451 13.3150978,5.61107807 12.4582164,6.59275159 C11.2270125,7.98097123 10.2913754,9.02966176 9.65130514,9.73882318 C9.42814828,9.98606827 9.06894462,10.3719875 8.57369417,10.8965808 C7.48829706,12.1010165 8.05955136,12.9745105 9.31498713,13.1932365 L11.0917769,13.5117472 L11.0917769,13.5117472 C11.2005008,13.5312372 11.2728391,13.6351751 11.253349,13.743899 C11.2525988,13.7480841 11.2517153,13.7522442 11.2506999,13.756373 L10.5159727,16.7438514 Z' />\n                </SvgIcon>\n                {t('InstantView')}\n            </Button>\n        );\n\n        return (\n            <>\n                {webPageMediaTop}\n                {webPageContent}\n                {webPageMediaBottom}\n                {webPageInstantView}\n            </>\n        );\n    };\n\n    render() {\n        const { classes } = this.props;\n\n        return (\n            <div className='web-page'>\n                <div className={classNames('web-page-border', classes.accentBackgroundLight)} />\n                <div className='web-page-wrapper'>{this.getWebPage()}</div>\n            </div>\n        );\n    }\n}\n\nWebPage.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    size: PropTypes.number,\n    displaySize: PropTypes.number,\n    displaySmallSize: PropTypes.number,\n    displayExtraSmallSize: PropTypes.number,\n    openMedia: PropTypes.func\n};\n\nWebPage.defaultProps = {\n    size: PHOTO_SIZE,\n    displaySize: PHOTO_DISPLAY_SIZE,\n    displaySmallSize: PHOTO_DISPLAY_SMALL_SIZE,\n    displayExtraSmallSize: PHOTO_DISPLAY_EXTRA_SMALL_SIZE\n};\n\nconst enhance = compose(\n    withStyles(styles),\n    withTranslation()\n);\n\nexport default enhance(WebPage);\n"]},"metadata":{},"sourceType":"module"}
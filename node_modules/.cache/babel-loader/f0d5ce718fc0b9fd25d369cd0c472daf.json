{"ast":null,"code":"import _classCallCheck from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _defineProperty from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import classNames from'classnames';import{compose}from'recompose';import{withTranslation}from'react-i18next';import withStyles from'@material-ui/core/styles/withStyles';import ReplyTile from'../Tile/ReplyTile';import{getContent,getTitle,isDeletedMessage,getReplyPhotoSize}from'../../Utils/Message';import{accentStyles}from'../Theme';import{openChat}from'../../Actions/Client';import MessageStore from'../../Stores/MessageStore';import'./Reply.css';var styles=function styles(theme){return _objectSpread({replyContentSubtitle:{color:theme.palette.text.secondary}},accentStyles(theme));};var Reply=/*#__PURE__*/function(_React$Component){_inherits(Reply,_React$Component);function Reply(){var _getPrototypeOf2;var _this;_classCallCheck(this,Reply);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Reply)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.onGetMessageResult=function(result){var _this$props=_this.props,chatId=_this$props.chatId,messageId=_this$props.messageId;if(chatId===result.chat_id&&messageId===result.id){_this.forceUpdate();}};_this.handleClick=function(event){event.stopPropagation();};_this.handleOpen=function(event){event.stopPropagation();var _this$props2=_this.props,chatId=_this$props2.chatId,messageId=_this$props2.messageId,onClick=_this$props2.onClick;var message=MessageStore.get(chatId,messageId);if(!message)return null;if(isDeletedMessage(message))return null;openChat(chatId,messageId,false);if(onClick)onClick();};return _this;}_createClass(Reply,[{key:\"componentDidMount\",value:function componentDidMount(){MessageStore.on('getMessageResult',this.onGetMessageResult);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){MessageStore.removeListener('getMessageResult',this.onGetMessageResult);}},{key:\"render\",value:function render(){var _this$props3=this.props,classes=_this$props3.classes,t=_this$props3.t,chatId=_this$props3.chatId,messageId=_this$props3.messageId;var message=MessageStore.get(chatId,messageId);var title=!message?null:getTitle(message);var content=!message?t('Loading'):getContent(message,t);var photoSize=getReplyPhotoSize(chatId,messageId);if(isDeletedMessage(message)){title=null;content=t('DeletedMessage');}return React.createElement(\"div\",{className:\"reply\",onMouseDown:this.handleOpen,onClick:this.handleClick},React.createElement(\"div\",{className:\"reply-wrapper\"},React.createElement(\"div\",{className:classNames('reply-border',classes.accentBackgroundLight)}),photoSize&&React.createElement(ReplyTile,{chatId:chatId,messageId:messageId,photoSize:photoSize}),React.createElement(\"div\",{className:\"reply-content\"},title&&React.createElement(\"div\",{className:classNames('reply-content-title',classes.accentColorMain)},title),React.createElement(\"div\",{className:classNames('reply-content-subtitle',classes.replyContentSubtitle)},content))));}}]);return Reply;}(React.Component);var enhance=compose(withStyles(styles,{withTheme:true}),withTranslation());export default enhance(Reply);","map":{"version":3,"sources":["/Users/yosuahalim/Documents/Projects/telegram-app/src/Components/Message/Reply.js"],"names":["React","classNames","compose","withTranslation","withStyles","ReplyTile","getContent","getTitle","isDeletedMessage","getReplyPhotoSize","accentStyles","openChat","MessageStore","styles","theme","replyContentSubtitle","color","palette","text","secondary","Reply","onGetMessageResult","result","props","chatId","messageId","chat_id","id","forceUpdate","handleClick","event","stopPropagation","handleOpen","onClick","message","get","on","removeListener","classes","t","title","content","photoSize","accentBackgroundLight","accentColorMain","Component","enhance","withTheme"],"mappings":"ojDAAA;;;;;GAOA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,OAASC,OAAT,KAAwB,WAAxB,CACA,OAASC,eAAT,KAAgC,eAAhC,CACA,MAAOC,CAAAA,UAAP,KAAuB,qCAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,mBAAtB,CACA,OAASC,UAAT,CAAqBC,QAArB,CAA+BC,gBAA/B,CAAiDC,iBAAjD,KAA0E,qBAA1E,CACA,OAASC,YAAT,KAA6B,UAA7B,CACA,OAASC,QAAT,KAAyB,sBAAzB,CACA,MAAOC,CAAAA,YAAP,KAAyB,2BAAzB,CACA,MAAO,aAAP,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAAAC,KAAK,wBAChBC,oBAAoB,CAAE,CAClBC,KAAK,CAAEF,KAAK,CAACG,OAAN,CAAcC,IAAd,CAAmBC,SADR,CADN,EAIbT,YAAY,CAACI,KAAD,CAJC,GAApB,C,GAOMM,CAAAA,K,uYASFC,kB,CAAqB,SAAAC,MAAM,CAAI,iBACG,MAAKC,KADR,CACnBC,MADmB,aACnBA,MADmB,CACXC,SADW,aACXA,SADW,CAG3B,GAAID,MAAM,GAAKF,MAAM,CAACI,OAAlB,EAA6BD,SAAS,GAAKH,MAAM,CAACK,EAAtD,CAA0D,CACtD,MAAKC,WAAL,GACH,CACJ,C,OAEDC,W,CAAc,SAAAC,KAAK,CAAI,CACnBA,KAAK,CAACC,eAAN,GACH,C,OAEDC,U,CAAa,SAAAF,KAAK,CAAI,CAClBA,KAAK,CAACC,eAAN,GADkB,iBAGqB,MAAKR,KAH1B,CAGVC,MAHU,cAGVA,MAHU,CAGFC,SAHE,cAGFA,SAHE,CAGSQ,OAHT,cAGSA,OAHT,CAKlB,GAAMC,CAAAA,OAAO,CAAGtB,YAAY,CAACuB,GAAb,CAAiBX,MAAjB,CAAyBC,SAAzB,CAAhB,CACA,GAAI,CAACS,OAAL,CAAc,MAAO,KAAP,CACd,GAAI1B,gBAAgB,CAAC0B,OAAD,CAApB,CAA+B,MAAO,KAAP,CAE/BvB,QAAQ,CAACa,MAAD,CAASC,SAAT,CAAoB,KAApB,CAAR,CACA,GAAIQ,OAAJ,CAAaA,OAAO,GACvB,C,8FA/BmB,CAChBrB,YAAY,CAACwB,EAAb,CAAgB,kBAAhB,CAAoC,KAAKf,kBAAzC,EACH,C,mEAEsB,CACnBT,YAAY,CAACyB,cAAb,CAA4B,kBAA5B,CAAgD,KAAKhB,kBAArD,EACH,C,uCA2BQ,kBACqC,KAAKE,KAD1C,CACGe,OADH,cACGA,OADH,CACYC,CADZ,cACYA,CADZ,CACef,MADf,cACeA,MADf,CACuBC,SADvB,cACuBA,SADvB,CAGL,GAAMS,CAAAA,OAAO,CAAGtB,YAAY,CAACuB,GAAb,CAAiBX,MAAjB,CAAyBC,SAAzB,CAAhB,CAEA,GAAIe,CAAAA,KAAK,CAAG,CAACN,OAAD,CAAW,IAAX,CAAkB3B,QAAQ,CAAC2B,OAAD,CAAtC,CACA,GAAIO,CAAAA,OAAO,CAAG,CAACP,OAAD,CAAWK,CAAC,CAAC,SAAD,CAAZ,CAA0BjC,UAAU,CAAC4B,OAAD,CAAUK,CAAV,CAAlD,CACA,GAAMG,CAAAA,SAAS,CAAGjC,iBAAiB,CAACe,MAAD,CAASC,SAAT,CAAnC,CAEA,GAAIjB,gBAAgB,CAAC0B,OAAD,CAApB,CAA+B,CAC3BM,KAAK,CAAG,IAAR,CACAC,OAAO,CAAGF,CAAC,CAAC,gBAAD,CAAX,CACH,CAED,MACI,4BAAK,SAAS,CAAC,OAAf,CAAuB,WAAW,CAAE,KAAKP,UAAzC,CAAqD,OAAO,CAAE,KAAKH,WAAnE,EACI,2BAAK,SAAS,CAAC,eAAf,EACI,2BAAK,SAAS,CAAE5B,UAAU,CAAC,cAAD,CAAiBqC,OAAO,CAACK,qBAAzB,CAA1B,EADJ,CAEKD,SAAS,EAAI,oBAAC,SAAD,EAAW,MAAM,CAAElB,MAAnB,CAA2B,SAAS,CAAEC,SAAtC,CAAiD,SAAS,CAAEiB,SAA5D,EAFlB,CAGI,2BAAK,SAAS,CAAC,eAAf,EACKF,KAAK,EACF,2BAAK,SAAS,CAAEvC,UAAU,CAAC,qBAAD,CAAwBqC,OAAO,CAACM,eAAhC,CAA1B,EAA6EJ,KAA7E,CAFR,CAII,2BAAK,SAAS,CAAEvC,UAAU,CAAC,wBAAD,CAA2BqC,OAAO,CAACvB,oBAAnC,CAA1B,EACK0B,OADL,CAJJ,CAHJ,CADJ,CADJ,CAgBH,C,mBAhEezC,KAAK,CAAC6C,S,EAyE1B,GAAMC,CAAAA,OAAO,CAAG5C,OAAO,CACnBE,UAAU,CAACS,MAAD,CAAS,CAAEkC,SAAS,CAAE,IAAb,CAAT,CADS,CAEnB5C,eAAe,EAFI,CAAvB,CAKA,cAAe2C,CAAAA,OAAO,CAAC1B,KAAD,CAAtB","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport ReplyTile from '../Tile/ReplyTile';\nimport { getContent, getTitle, isDeletedMessage, getReplyPhotoSize } from '../../Utils/Message';\nimport { accentStyles } from '../Theme';\nimport { openChat } from '../../Actions/Client';\nimport MessageStore from '../../Stores/MessageStore';\nimport './Reply.css';\n\nconst styles = theme => ({\n    replyContentSubtitle: {\n        color: theme.palette.text.secondary\n    },\n    ...accentStyles(theme)\n});\n\nclass Reply extends React.Component {\n    componentDidMount() {\n        MessageStore.on('getMessageResult', this.onGetMessageResult);\n    }\n\n    componentWillUnmount() {\n        MessageStore.removeListener('getMessageResult', this.onGetMessageResult);\n    }\n\n    onGetMessageResult = result => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === result.chat_id && messageId === result.id) {\n            this.forceUpdate();\n        }\n    };\n\n    handleClick = event => {\n        event.stopPropagation();\n    };\n\n    handleOpen = event => {\n        event.stopPropagation();\n\n        const { chatId, messageId, onClick } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n        if (isDeletedMessage(message)) return null;\n\n        openChat(chatId, messageId, false);\n        if (onClick) onClick();\n    };\n\n    render() {\n        const { classes, t, chatId, messageId } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n\n        let title = !message ? null : getTitle(message);\n        let content = !message ? t('Loading') : getContent(message, t);\n        const photoSize = getReplyPhotoSize(chatId, messageId);\n\n        if (isDeletedMessage(message)) {\n            title = null;\n            content = t('DeletedMessage');\n        }\n\n        return (\n            <div className='reply' onMouseDown={this.handleOpen} onClick={this.handleClick}>\n                <div className='reply-wrapper'>\n                    <div className={classNames('reply-border', classes.accentBackgroundLight)} />\n                    {photoSize && <ReplyTile chatId={chatId} messageId={messageId} photoSize={photoSize} />}\n                    <div className='reply-content'>\n                        {title && (\n                            <div className={classNames('reply-content-title', classes.accentColorMain)}>{title}</div>\n                        )}\n                        <div className={classNames('reply-content-subtitle', classes.replyContentSubtitle)}>\n                            {content}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nReply.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    onClick: PropTypes.func\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(Reply);\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/createClass\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import{TYPING_OUTPUT_INTERVAL_S}from'../Constants';import TdLibController from'../Controllers/TdLibController';var OutputTypingManager=/*#__PURE__*/function(){function OutputTypingManager(chatId){_classCallCheck(this,OutputTypingManager);this.chatId=chatId;this.lastAction=null;}_createClass(OutputTypingManager,[{key:\"setTyping\",value:function setTyping(action){if(!this.chatId)return;if(this.lastAction&&this.lastAction['@type']===action['@type']){var now=new Date();now.setSeconds(now.getSeconds()-TYPING_OUTPUT_INTERVAL_S);if(this.lastTypingDate&&this.lastTypingDate>now){return;}}this.lastAction=action;this.lastTypingDate=new Date();TdLibController.send({'@type':'sendChatAction',chat_id:this.chatId,action:action});}}]);return OutputTypingManager;}();export default OutputTypingManager;","map":{"version":3,"sources":["/Users/yosuahalim/Documents/Projects/telegram-app/src/Utils/OutputTypingManager.js"],"names":["TYPING_OUTPUT_INTERVAL_S","TdLibController","OutputTypingManager","chatId","lastAction","action","now","Date","setSeconds","getSeconds","lastTypingDate","send","chat_id"],"mappings":"sQAAA;;;;;GAOA,OAASA,wBAAT,KAAyC,cAAzC,CACA,MAAOC,CAAAA,eAAP,KAA4B,gCAA5B,C,GAEMC,CAAAA,mB,yBACF,6BAAYC,MAAZ,CAAoB,2CAChB,KAAKA,MAAL,CAAcA,MAAd,CACA,KAAKC,UAAL,CAAkB,IAAlB,CACH,C,4EAESC,M,CAAQ,CACd,GAAI,CAAC,KAAKF,MAAV,CAAkB,OAElB,GAAI,KAAKC,UAAL,EAAmB,KAAKA,UAAL,CAAgB,OAAhB,IAA6BC,MAAM,CAAC,OAAD,CAA1D,CAAqE,CACjE,GAAIC,CAAAA,GAAG,CAAG,GAAIC,CAAAA,IAAJ,EAAV,CACAD,GAAG,CAACE,UAAJ,CAAeF,GAAG,CAACG,UAAJ,GAAmBT,wBAAlC,EACA,GAAI,KAAKU,cAAL,EAAuB,KAAKA,cAAL,CAAsBJ,GAAjD,CAAsD,CAClD,OACH,CACJ,CAED,KAAKF,UAAL,CAAkBC,MAAlB,CACA,KAAKK,cAAL,CAAsB,GAAIH,CAAAA,IAAJ,EAAtB,CAEAN,eAAe,CAACU,IAAhB,CAAqB,CACjB,QAAS,gBADQ,CAEjBC,OAAO,CAAE,KAAKT,MAFG,CAGjBE,MAAM,CAAEA,MAHS,CAArB,EAKH,C,mCAGL,cAAeH,CAAAA,mBAAf","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { TYPING_OUTPUT_INTERVAL_S } from '../Constants';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass OutputTypingManager {\n    constructor(chatId) {\n        this.chatId = chatId;\n        this.lastAction = null;\n    }\n\n    setTyping(action) {\n        if (!this.chatId) return;\n\n        if (this.lastAction && this.lastAction['@type'] === action['@type']) {\n            let now = new Date();\n            now.setSeconds(now.getSeconds() - TYPING_OUTPUT_INTERVAL_S);\n            if (this.lastTypingDate && this.lastTypingDate > now) {\n                return;\n            }\n        }\n\n        this.lastAction = action;\n        this.lastTypingDate = new Date();\n\n        TdLibController.send({\n            '@type': 'sendChatAction',\n            chat_id: this.chatId,\n            action: action\n        });\n    }\n}\n\nexport default OutputTypingManager;\n"]},"metadata":{},"sourceType":"module"}
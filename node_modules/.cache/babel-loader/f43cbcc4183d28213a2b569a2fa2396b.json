{"ast":null,"code":"import _classCallCheck from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/inherits\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import{compose}from'recompose';import withStyles from'@material-ui/core/styles/withStyles';import{withTranslation}from'react-i18next';import ArrowBackIcon from'@material-ui/icons/ArrowBack';import CloseIcon from'@material-ui/icons/Close';import IconButton from'@material-ui/core/IconButton';import SearchIcon from'@material-ui/icons/Search';import SpeedDialIcon from'@material-ui/lab/SpeedDialIcon';import{ANIMATION_DURATION_200MS}from'../../../Constants';import'./SharedMediaHeader.css';var styles={headerBackButton:{margin:'8px -2px 8px 12px'},headerSearchButton:{margin:'8px 12px 8px -2px'}};var SharedMediaHeader=/*#__PURE__*/function(_React$Component){_inherits(SharedMediaHeader,_React$Component);function SharedMediaHeader(props){var _this;_classCallCheck(this,SharedMediaHeader);_this=_possibleConstructorReturn(this,_getPrototypeOf(SharedMediaHeader).call(this,props));_this.handleSearch=function(){if(_this.searchInputRef.current){var innerText=_this.searchInputRef.current.innerText;if(innerText){_this.searchInputRef.current.innerText='';var onSearch=_this.props.onSearch;if(!onSearch)return;onSearch('');return;}}var onCloseSearch=_this.props.onCloseSearch;var openSearch=_this.state.openSearch;_this.setState({openSearch:!openSearch});if(onCloseSearch){onCloseSearch();}};_this.handleKeyDown=function(event){if(event.keyCode===13){event.preventDefault();}};_this.handleKeyUp=function(){var innerText=_this.searchInputRef.current.innerText;var innerHTML=_this.searchInputRef.current.innerHTML;if(innerHTML&&(innerHTML==='<br>'||innerHTML==='<div><br></div>')){_this.searchInputRef.current.innerHTML='';}var onSearch=_this.props.onSearch;if(!onSearch)return;onSearch(innerText);};_this.handlePaste=function(event){var plainText=event.clipboardData.getData('text/plain');if(plainText){event.preventDefault();document.execCommand('insertHTML',false,plainText);}};_this.searchInputRef=React.createRef();_this.state={openSearch:false};return _this;}_createClass(SharedMediaHeader,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){var _this2=this;var openSearch=this.state.openSearch;if(openSearch&&openSearch!==prevProps.openSearch){setTimeout(function(){if(_this2.searchInputRef.current){_this2.searchInputRef.current.focus();}},ANIMATION_DURATION_200MS);}}},{key:\"render\",value:function render(){var _this$props=this.props,classes=_this$props.classes,t=_this$props.t,title=_this$props.title,onClick=_this$props.onClick,onClose=_this$props.onClose,onSearch=_this$props.onSearch;var openSearch=this.state.openSearch;return React.createElement(\"div\",{className:\"header-master\"},!openSearch?React.createElement(React.Fragment,null,React.createElement(IconButton,{className:classes.headerBackButton,onClick:onClose},React.createElement(ArrowBackIcon,null)),React.createElement(\"div\",{className:\"header-status grow cursor-pointer\",onClick:onClick},React.createElement(\"span\",{className:\"header-status-content\"},title))):React.createElement(React.Fragment,null,React.createElement(\"div\",{className:\"header-search-input grow\"},React.createElement(\"div\",{id:\"header-search-inputbox\",ref:this.searchInputRef,placeholder:t('Search'),contentEditable:true,suppressContentEditableWarning:true,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onPaste:this.handlePaste}))),Boolean(onSearch)&&React.createElement(IconButton,{className:classes.headerSearchButton,onMouseDown:this.handleSearch},React.createElement(SpeedDialIcon,{open:openSearch,icon:React.createElement(SearchIcon,null),openIcon:React.createElement(CloseIcon,null)})));}}]);return SharedMediaHeader;}(React.Component);var enhance=compose(withStyles(styles,{withTheme:true}),withTranslation());export default enhance(SharedMediaHeader);","map":{"version":3,"sources":["/Users/yosuahalim/Documents/Projects/telegram-app/src/Components/ColumnRight/SharedMedia/SharedMediaHeader.js"],"names":["React","compose","withStyles","withTranslation","ArrowBackIcon","CloseIcon","IconButton","SearchIcon","SpeedDialIcon","ANIMATION_DURATION_200MS","styles","headerBackButton","margin","headerSearchButton","SharedMediaHeader","props","handleSearch","searchInputRef","current","innerText","onSearch","onCloseSearch","openSearch","state","setState","handleKeyDown","event","keyCode","preventDefault","handleKeyUp","innerHTML","handlePaste","plainText","clipboardData","getData","document","execCommand","createRef","prevProps","prevState","snapshot","setTimeout","focus","classes","t","title","onClick","onClose","Boolean","Component","enhance","withTheme"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport SearchIcon from '@material-ui/icons/Search';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport { ANIMATION_DURATION_200MS } from '../../../Constants';\nimport './SharedMediaHeader.css';\n\nconst styles = {\n    headerBackButton: {\n        margin: '8px -2px 8px 12px'\n    },\n    headerSearchButton: {\n        margin: '8px 12px 8px -2px'\n    }\n};\n\nclass SharedMediaHeader extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.searchInputRef = React.createRef();\n\n        this.state = {\n            openSearch: false\n        };\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { openSearch } = this.state;\n\n        if (openSearch && openSearch !== prevProps.openSearch) {\n            setTimeout(() => {\n                if (this.searchInputRef.current) {\n                    this.searchInputRef.current.focus();\n                }\n            }, ANIMATION_DURATION_200MS);\n        }\n    }\n\n    handleSearch = () => {\n        if (this.searchInputRef.current) {\n            const innerText = this.searchInputRef.current.innerText;\n            if (innerText) {\n                this.searchInputRef.current.innerText = '';\n\n                const { onSearch } = this.props;\n                if (!onSearch) return;\n\n                onSearch('');\n                return;\n            }\n        }\n\n        const { onCloseSearch } = this.props;\n        const { openSearch } = this.state;\n\n        this.setState({ openSearch: !openSearch });\n\n        if (onCloseSearch) {\n            onCloseSearch();\n        }\n    };\n\n    handleKeyDown = event => {\n        if (event.keyCode === 13) {\n            event.preventDefault();\n        }\n    };\n\n    handleKeyUp = () => {\n        const innerText = this.searchInputRef.current.innerText;\n        const innerHTML = this.searchInputRef.current.innerHTML;\n\n        if (innerHTML && (innerHTML === '<br>' || innerHTML === '<div><br></div>')) {\n            this.searchInputRef.current.innerHTML = '';\n        }\n\n        const { onSearch } = this.props;\n        if (!onSearch) return;\n\n        onSearch(innerText);\n    };\n\n    handlePaste = event => {\n        const plainText = event.clipboardData.getData('text/plain');\n        if (plainText) {\n            event.preventDefault();\n            document.execCommand('insertHTML', false, plainText);\n        }\n    };\n\n    render() {\n        const { classes, t, title, onClick, onClose, onSearch } = this.props;\n        const { openSearch } = this.state;\n\n        return (\n            <div className='header-master'>\n                {!openSearch ? (\n                    <>\n                        <IconButton className={classes.headerBackButton} onClick={onClose}>\n                            <ArrowBackIcon />\n                        </IconButton>\n                        <div className='header-status grow cursor-pointer' onClick={onClick}>\n                            <span className='header-status-content'>{title}</span>\n                        </div>\n                    </>\n                ) : (\n                    <>\n                        <div className='header-search-input grow'>\n                            <div\n                                id='header-search-inputbox'\n                                ref={this.searchInputRef}\n                                placeholder={t('Search')}\n                                contentEditable\n                                suppressContentEditableWarning\n                                onKeyDown={this.handleKeyDown}\n                                onKeyUp={this.handleKeyUp}\n                                onPaste={this.handlePaste}\n                            />\n                        </div>\n                    </>\n                )}\n                {Boolean(onSearch) && (\n                    <IconButton className={classes.headerSearchButton} onMouseDown={this.handleSearch}>\n                        <SpeedDialIcon open={openSearch} icon={<SearchIcon />} openIcon={<CloseIcon />} />\n                    </IconButton>\n                )}\n            </div>\n        );\n    }\n}\n\nSharedMediaHeader.propTypes = {\n    title: PropTypes.string,\n    onClick: PropTypes.func,\n    onClose: PropTypes.func,\n    onCloseSearch: PropTypes.func,\n    onSearch: PropTypes.func\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(SharedMediaHeader);\n"]},"metadata":{},"sourceType":"module"}
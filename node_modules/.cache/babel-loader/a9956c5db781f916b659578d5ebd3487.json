{"ast":null,"code":"import _classCallCheck from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import Sticker,{StickerSourceEnum}from'../Message/Media/Sticker';import{STICKER_PREVIEW_DISPLAY_SIZE}from'../../Constants';import TdLibController from'../../Controllers/TdLibController';import'./StickerPreview.css';var StickerPreview=/*#__PURE__*/function(_React$Component){_inherits(StickerPreview,_React$Component);function StickerPreview(){var _getPrototypeOf2;var _this;_classCallCheck(this,StickerPreview);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(StickerPreview)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={emoji:null,prevPropsSticker:null};_this.loadStickerEmojis=function(sticker){var file=sticker.sticker;var id=file.id;TdLibController.send({'@type':'getStickerEmojis',sticker:{'@type':'inputFileId',id:id}}).then(function(result){if(_this.props.sticker===sticker){_this.setState({emoji:result.emojis.join(' ')});}});};return _this;}_createClass(StickerPreview,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){var sticker=this.props.sticker;if(sticker&&sticker!==prevProps.sticker){this.loadStickerEmojis(sticker);}}},{key:\"componentDidMount\",value:function componentDidMount(){var sticker=this.props.sticker;if(sticker){this.loadStickerEmojis(sticker);}}},{key:\"render\",value:function render(){var sticker=this.props.sticker;var emoji=this.state.emoji;if(!sticker)return null;return React.createElement(\"div\",{className:\"sticker-preview\"},React.createElement(\"div\",{className:\"sticker-preview-emoji\"},emoji),React.createElement(Sticker,{sticker:sticker,displaySize:STICKER_PREVIEW_DISPLAY_SIZE,source:StickerSourceEnum.PREVIEW}));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){var sticker=props.sticker;var prevPropsSticker=state.prevPropsSticker;if(sticker&&prevPropsSticker){return{prevPropsSticker:sticker,emoji:null};}return null;}}]);return StickerPreview;}(React.Component);export default StickerPreview;","map":{"version":3,"sources":["/home/me-admin/Downloads/my-app/src/Components/ColumnMiddle/StickerPreview.js"],"names":["React","Sticker","StickerSourceEnum","STICKER_PREVIEW_DISPLAY_SIZE","TdLibController","StickerPreview","state","emoji","prevPropsSticker","loadStickerEmojis","sticker","file","id","send","then","result","props","setState","emojis","join","prevProps","prevState","snapshot","PREVIEW","Component"],"mappings":"wkBAAA;;;;;GAOA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,OAAP,EAAkBC,iBAAlB,KAA2C,0BAA3C,CACA,OAASC,4BAAT,KAA6C,iBAA7C,CACA,MAAOC,CAAAA,eAAP,KAA4B,mCAA5B,CACA,MAAO,sBAAP,C,GAEMC,CAAAA,c,2aACFC,K,CAAQ,CACJC,KAAK,CAAE,IADH,CAEJC,gBAAgB,CAAE,IAFd,C,OAmCRC,iB,CAAoB,SAAAC,OAAO,CAAI,IACVC,CAAAA,IADU,CACDD,OADC,CACnBA,OADmB,IAEnBE,CAAAA,EAFmB,CAEZD,IAFY,CAEnBC,EAFmB,CAI3BR,eAAe,CAACS,IAAhB,CAAqB,CACjB,QAAS,kBADQ,CAEjBH,OAAO,CAAE,CAAE,QAAS,aAAX,CAA0BE,EAAE,CAAFA,EAA1B,CAFQ,CAArB,EAGGE,IAHH,CAGQ,SAAAC,MAAM,CAAI,CACd,GAAI,MAAKC,KAAL,CAAWN,OAAX,GAAuBA,OAA3B,CAAoC,CAChC,MAAKO,QAAL,CAAc,CACVV,KAAK,CAAEQ,MAAM,CAACG,MAAP,CAAcC,IAAd,CAAmB,GAAnB,CADG,CAAd,EAGH,CACJ,CATD,EAUH,C,wGA9BkBC,S,CAAWC,S,CAAWC,Q,CAAU,IACvCZ,CAAAA,OADuC,CAC3B,KAAKM,KADsB,CACvCN,OADuC,CAG/C,GAAIA,OAAO,EAAIA,OAAO,GAAKU,SAAS,CAACV,OAArC,CAA8C,CAC1C,KAAKD,iBAAL,CAAuBC,OAAvB,EACH,CACJ,C,6DAEmB,IACRA,CAAAA,OADQ,CACI,KAAKM,KADT,CACRN,OADQ,CAGhB,GAAIA,OAAJ,CAAa,CACT,KAAKD,iBAAL,CAAuBC,OAAvB,EACH,CACJ,C,uCAkBQ,IACGA,CAAAA,OADH,CACe,KAAKM,KADpB,CACGN,OADH,IAEGH,CAAAA,KAFH,CAEa,KAAKD,KAFlB,CAEGC,KAFH,CAIL,GAAI,CAACG,OAAL,CAAc,MAAO,KAAP,CAEd,MACI,4BAAK,SAAS,CAAC,iBAAf,EACI,2BAAK,SAAS,CAAC,uBAAf,EAAwCH,KAAxC,CADJ,CAEI,oBAAC,OAAD,EACI,OAAO,CAAEG,OADb,CAEI,WAAW,CAAEP,4BAFjB,CAGI,MAAM,CAAED,iBAAiB,CAACqB,OAH9B,EAFJ,CADJ,CAUH,C,4EA9D+BP,K,CAAOV,K,CAAO,IAClCI,CAAAA,OADkC,CACtBM,KADsB,CAClCN,OADkC,IAElCF,CAAAA,gBAFkC,CAEbF,KAFa,CAElCE,gBAFkC,CAI1C,GAAIE,OAAO,EAAIF,gBAAf,CAAiC,CAC7B,MAAO,CACHA,gBAAgB,CAAEE,OADf,CAEHH,KAAK,CAAE,IAFJ,CAAP,CAIH,CAED,MAAO,KAAP,CACH,C,4BAlBwBP,KAAK,CAACwB,S,EA2EnC,cAAenB,CAAAA,cAAf","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Sticker, { StickerSourceEnum } from '../Message/Media/Sticker';\nimport { STICKER_PREVIEW_DISPLAY_SIZE } from '../../Constants';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './StickerPreview.css';\n\nclass StickerPreview extends React.Component {\n    state = {\n        emoji: null,\n        prevPropsSticker: null\n    };\n\n    static getDerivedStateFromProps(props, state) {\n        const { sticker } = props;\n        const { prevPropsSticker } = state;\n\n        if (sticker && prevPropsSticker) {\n            return {\n                prevPropsSticker: sticker,\n                emoji: null\n            };\n        }\n\n        return null;\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { sticker } = this.props;\n\n        if (sticker && sticker !== prevProps.sticker) {\n            this.loadStickerEmojis(sticker);\n        }\n    }\n\n    componentDidMount() {\n        const { sticker } = this.props;\n\n        if (sticker) {\n            this.loadStickerEmojis(sticker);\n        }\n    }\n\n    loadStickerEmojis = sticker => {\n        const { sticker: file } = sticker;\n        const { id } = file;\n\n        TdLibController.send({\n            '@type': 'getStickerEmojis',\n            sticker: { '@type': 'inputFileId', id }\n        }).then(result => {\n            if (this.props.sticker === sticker) {\n                this.setState({\n                    emoji: result.emojis.join(' ')\n                });\n            }\n        });\n    };\n\n    render() {\n        const { sticker } = this.props;\n        const { emoji } = this.state;\n\n        if (!sticker) return null;\n\n        return (\n            <div className='sticker-preview'>\n                <div className='sticker-preview-emoji'>{emoji}</div>\n                <Sticker\n                    sticker={sticker}\n                    displaySize={STICKER_PREVIEW_DISPLAY_SIZE}\n                    source={StickerSourceEnum.PREVIEW}\n                />\n            </div>\n        );\n    }\n}\n\nStickerPreview.propTypes = {\n    sticker: PropTypes.object\n};\n\nexport default StickerPreview;\n"]},"metadata":{},"sourceType":"module"}
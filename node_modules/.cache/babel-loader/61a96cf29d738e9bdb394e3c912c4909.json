{"ast":null,"code":"import _classCallCheck from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/inherits\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import Document from'../../Message/Media/Document';import RichText from'./RichText';import ArrowDownwardIcon from'@material-ui/core/SvgIcon/SvgIcon';import DocumentTile from'../../Tile/DocumentTile';import{getSrc}from'../../../Utils/File';import FileStore from'../../../Stores/FileStore';var Icon=/*#__PURE__*/function(_React$Component){_inherits(Icon,_React$Component);function Icon(){var _getPrototypeOf2;var _this;_classCallCheck(this,Icon);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Icon)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.onClientUpdateDocumentThumbnailBlob=function(update){var document=_this.props.document;if(!document)return;var thumbnail=document.thumbnail;if(!thumbnail)return;var file=thumbnail.photo;if(!file)return;var fileId=update.fileId;if(file.id!==fileId){return;}_this.forceUpdate();};_this.onClientUpdateDocumentBlob=function(update){var document=_this.props.document;if(!document)return;var file=document.document;if(!file)return;var fileId=update.fileId;if(file.id!==fileId){return;}_this.forceUpdate();};return _this;}_createClass(Icon,[{key:\"componentDidMount\",value:function componentDidMount(){FileStore.on('clientUpdateDocumentThumbnailBlob',this.onClientUpdateDocumentThumbnailBlob);FileStore.on('clientUpdateDocumentBlob',this.onClientUpdateDocumentBlob);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){FileStore.removeListener('clientUpdateDocumentThumbnailBlob',this.onClientUpdateDocumentThumbnailBlob);FileStore.removeListener('clientUpdateDocumentBlob',this.onClientUpdateDocumentBlob);}},{key:\"emptyPlaceholderSrc\",value:function emptyPlaceholderSrc(width,height){return\"data:image/svg+xml,%3Csvg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 \".concat(width,\" \").concat(height,\"\\\"%3E%3C/svg%3E\");}},{key:\"render\",value:function render(){var _this$props=this.props,document=_this$props.document,height=_this$props.height,width=_this$props.width;if(!document)return null;var thumbnail=document.thumbnail,file=document.document;var thumbnailSrc=getSrc(thumbnail?thumbnail.photo:null);var src=getSrc(file);return React.createElement(\"img\",{src:src||thumbnailSrc||this.emptyPlaceholderSrc(1,1),width:width>0?width:null,height:height>0?height:null,draggable:false,alt:\"\"});}}]);return Icon;}(React.Component);export default Icon;","map":{"version":3,"sources":["/Users/yosuahalim/Documents/Projects/telegram-app/src/Components/InstantView/RichText/Icon.js"],"names":["React","Document","RichText","ArrowDownwardIcon","DocumentTile","getSrc","FileStore","Icon","onClientUpdateDocumentThumbnailBlob","update","document","props","thumbnail","file","photo","fileId","id","forceUpdate","onClientUpdateDocumentBlob","on","removeListener","width","height","thumbnailSrc","src","emptyPlaceholderSrc","Component"],"mappings":"kqBAAA;;;;;GAOA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,QAAP,KAAqB,8BAArB,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,CACA,MAAOC,CAAAA,iBAAP,KAA8B,mCAA9B,CACA,MAAOC,CAAAA,YAAP,KAAyB,yBAAzB,CACA,OAASC,MAAT,KAAuB,qBAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,2BAAtB,C,GAEMC,CAAAA,I,mYAWFC,mC,CAAsC,SAAAC,MAAM,CAAI,IACpCC,CAAAA,QADoC,CACvB,MAAKC,KADkB,CACpCD,QADoC,CAE5C,GAAI,CAACA,QAAL,CAAe,OAF6B,GAIpCE,CAAAA,SAJoC,CAItBF,QAJsB,CAIpCE,SAJoC,CAK5C,GAAI,CAACA,SAAL,CAAgB,OAEhB,GAAMC,CAAAA,IAAI,CAAGD,SAAS,CAACE,KAAvB,CACA,GAAI,CAACD,IAAL,CAAW,OARiC,GAUpCE,CAAAA,MAVoC,CAUzBN,MAVyB,CAUpCM,MAVoC,CAY5C,GAAIF,IAAI,CAACG,EAAL,GAAYD,MAAhB,CAAwB,CACpB,OACH,CAED,MAAKE,WAAL,GACH,C,OAEDC,0B,CAA6B,SAAAT,MAAM,CAAI,IAC3BC,CAAAA,QAD2B,CACd,MAAKC,KADS,CAC3BD,QAD2B,CAEnC,GAAI,CAACA,QAAL,CAAe,OAEf,GAAMG,CAAAA,IAAI,CAAGH,QAAQ,CAACA,QAAtB,CACA,GAAI,CAACG,IAAL,CAAW,OALwB,GAO3BE,CAAAA,MAP2B,CAOhBN,MAPgB,CAO3BM,MAP2B,CASnC,GAAIF,IAAI,CAACG,EAAL,GAAYD,MAAhB,CAAwB,CACpB,OACH,CAED,MAAKE,WAAL,GACH,C,6FA3CmB,CAChBX,SAAS,CAACa,EAAV,CAAa,mCAAb,CAAkD,KAAKX,mCAAvD,EACAF,SAAS,CAACa,EAAV,CAAa,0BAAb,CAAyC,KAAKD,0BAA9C,EACH,C,mEAEsB,CACnBZ,SAAS,CAACc,cAAV,CAAyB,mCAAzB,CAA8D,KAAKZ,mCAAnE,EACAF,SAAS,CAACc,cAAV,CAAyB,0BAAzB,CAAqD,KAAKF,0BAA1D,EACH,C,gEAqCmBG,K,CAAOC,M,CAAQ,CAC/B,6FAAoFD,KAApF,aAA6FC,MAA7F,oBACH,C,uCAEQ,iBAC+B,KAAKX,KADpC,CACGD,QADH,aACGA,QADH,CACaY,MADb,aACaA,MADb,CACqBD,KADrB,aACqBA,KADrB,CAEL,GAAI,CAACX,QAAL,CAAe,MAAO,KAAP,CAFV,GAIGE,CAAAA,SAJH,CAIiCF,QAJjC,CAIGE,SAJH,CAIwBC,IAJxB,CAIiCH,QAJjC,CAIcA,QAJd,CAKL,GAAMa,CAAAA,YAAY,CAAGlB,MAAM,CAACO,SAAS,CAAGA,SAAS,CAACE,KAAb,CAAqB,IAA/B,CAA3B,CACA,GAAMU,CAAAA,GAAG,CAAGnB,MAAM,CAACQ,IAAD,CAAlB,CAEA,MACI,4BACI,GAAG,CAAEW,GAAG,EAAID,YAAP,EAAuB,KAAKE,mBAAL,CAAyB,CAAzB,CAA4B,CAA5B,CADhC,CAEI,KAAK,CAAEJ,KAAK,CAAG,CAAR,CAAYA,KAAZ,CAAoB,IAF/B,CAGI,MAAM,CAAEC,MAAM,CAAG,CAAT,CAAaA,MAAb,CAAsB,IAHlC,CAII,SAAS,CAAE,KAJf,CAKI,GAAG,CAAC,EALR,EADJ,CASH,C,kBAnEctB,KAAK,CAAC0B,S,EA4EzB,cAAenB,CAAAA,IAAf","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Document from '../../Message/Media/Document';\nimport RichText from './RichText';\nimport ArrowDownwardIcon from '@material-ui/core/SvgIcon/SvgIcon';\nimport DocumentTile from '../../Tile/DocumentTile';\nimport { getSrc } from '../../../Utils/File';\nimport FileStore from '../../../Stores/FileStore';\n\nclass Icon extends React.Component {\n    componentDidMount() {\n        FileStore.on('clientUpdateDocumentThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n        FileStore.on('clientUpdateDocumentBlob', this.onClientUpdateDocumentBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateDocumentThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n        FileStore.removeListener('clientUpdateDocumentBlob', this.onClientUpdateDocumentBlob);\n    }\n\n    onClientUpdateDocumentThumbnailBlob = update => {\n        const { document } = this.props;\n        if (!document) return;\n\n        const { thumbnail } = document;\n        if (!thumbnail) return;\n\n        const file = thumbnail.photo;\n        if (!file) return;\n\n        const { fileId } = update;\n\n        if (file.id !== fileId) {\n            return;\n        }\n\n        this.forceUpdate();\n    };\n\n    onClientUpdateDocumentBlob = update => {\n        const { document } = this.props;\n        if (!document) return;\n\n        const file = document.document;\n        if (!file) return;\n\n        const { fileId } = update;\n\n        if (file.id !== fileId) {\n            return;\n        }\n\n        this.forceUpdate();\n    };\n\n    emptyPlaceholderSrc(width, height) {\n        return `data:image/svg+xml,%3Csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 ${width} ${height}\"%3E%3C/svg%3E`;\n    }\n\n    render() {\n        const { document, height, width } = this.props;\n        if (!document) return null;\n\n        const { thumbnail, document: file } = document;\n        const thumbnailSrc = getSrc(thumbnail ? thumbnail.photo : null);\n        const src = getSrc(file);\n\n        return (\n            <img\n                src={src || thumbnailSrc || this.emptyPlaceholderSrc(1, 1)}\n                width={width > 0 ? width : null}\n                height={height > 0 ? height : null}\n                draggable={false}\n                alt=''\n            />\n        );\n    }\n}\n\nIcon.propTypes = {\n    document: PropTypes.object.isRequired,\n    height: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired\n};\n\nexport default Icon;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _defineProperty from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/inherits\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import classNames from'classnames';import withStyles from'@material-ui/core/styles/withStyles';import{getUserStatus,isUserOnline}from'../../Utils/User';import UserStore from'../../Stores/UserStore';import'./UserStatusControl.css';var styles=function styles(theme){return{userStatusSubtitle:{color:theme.palette.text.secondary},userStatusAccentSubtitle:{color:theme.palette.primary.dark+'!important'}};};var UserStatusControl=/*#__PURE__*/function(_React$Component){_inherits(UserStatusControl,_React$Component);function UserStatusControl(props){var _this;_classCallCheck(this,UserStatusControl);_this=_possibleConstructorReturn(this,_getPrototypeOf(UserStatusControl).call(this,props));_this.onUpdateUserStatus=function(update){var userId=_this.props.userId;var user=UserStore.get(userId);if(userId===update.user_id){_this.setState({status:getUserStatus(user),isAccent:isUserOnline(user)});}};var _userId=_this.props.userId;var _user=UserStore.get(_userId);_this.state={prevUserId:_userId,status:getUserStatus(_user),isAccent:isUserOnline(_user)};return _this;}_createClass(UserStatusControl,[{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps,nextState){var _this$props=this.props,userId=_this$props.userId,theme=_this$props.theme;var _this$state=this.state,status=_this$state.status,isAccent=_this$state.isAccent;if(nextProps.theme!==theme){return true;}if(nextProps.userId!==userId){return true;}if(nextState.status!==status){return true;}if(nextState.isAccent!==isAccent){return true;}return false;}},{key:\"componentDidMount\",value:function componentDidMount(){UserStore.on('updateUserStatus',this.onUpdateUserStatus);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){UserStore.removeListener('updateUserStatus',this.onUpdateUserStatus);}},{key:\"render\",value:function render(){var classes=this.props.classes;var _this$state2=this.state,status=_this$state2.status,isAccent=_this$state2.isAccent;return React.createElement(\"div\",{className:classNames('dialog-content',classes.userStatusSubtitle,_defineProperty({'accent-color':isAccent},classes.userStatusAccentSubtitle,isAccent))},status);}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.userId!==state.prevUserId){var userId=props.userId;var user=UserStore.get(userId);return{prevUserId:userId,status:getUserStatus(user),isAccent:isUserOnline(user)};}return null;}}]);return UserStatusControl;}(React.Component);export default withStyles(styles,{withTheme:true})(UserStatusControl);","map":{"version":3,"sources":["/Users/yosuahalim/Documents/Projects/telegram-app/src/Components/Tile/UserStatusControl.js"],"names":["React","classNames","withStyles","getUserStatus","isUserOnline","UserStore","styles","theme","userStatusSubtitle","color","palette","text","secondary","userStatusAccentSubtitle","primary","dark","UserStatusControl","props","onUpdateUserStatus","update","userId","user","get","user_id","setState","status","isAccent","state","prevUserId","nextProps","nextState","on","removeListener","classes","Component","withTheme"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { getUserStatus, isUserOnline } from '../../Utils/User';\nimport UserStore from '../../Stores/UserStore';\nimport './UserStatusControl.css';\n\nconst styles = theme => ({\n    userStatusSubtitle: {\n        color: theme.palette.text.secondary\n    },\n    userStatusAccentSubtitle: {\n        color: theme.palette.primary.dark + '!important'\n    }\n});\n\nclass UserStatusControl extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { userId } = this.props;\n        const user = UserStore.get(userId);\n\n        this.state = {\n            prevUserId: userId,\n            status: getUserStatus(user),\n            isAccent: isUserOnline(user)\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.userId !== state.prevUserId) {\n            const { userId } = props;\n            const user = UserStore.get(userId);\n\n            return {\n                prevUserId: userId,\n                status: getUserStatus(user),\n                isAccent: isUserOnline(user)\n            };\n        }\n\n        return null;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { userId, theme } = this.props;\n        const { status, isAccent } = this.state;\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextProps.userId !== userId) {\n            return true;\n        }\n\n        if (nextState.status !== status) {\n            return true;\n        }\n\n        if (nextState.isAccent !== isAccent) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n    }\n\n    componentWillUnmount() {\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n    }\n\n    onUpdateUserStatus = update => {\n        const { userId } = this.props;\n        const user = UserStore.get(userId);\n\n        if (userId === update.user_id) {\n            this.setState({ status: getUserStatus(user), isAccent: isUserOnline(user) });\n        }\n    };\n\n    render() {\n        const { classes } = this.props;\n        const { status, isAccent } = this.state;\n\n        return (\n            <div\n                className={classNames('dialog-content', classes.userStatusSubtitle, {\n                    'accent-color': isAccent,\n                    [classes.userStatusAccentSubtitle]: isAccent\n                })}>\n                {status}\n            </div>\n        );\n    }\n}\n\nexport default withStyles(styles, { withTheme: true })(UserStatusControl);\n"]},"metadata":{},"sourceType":"module"}
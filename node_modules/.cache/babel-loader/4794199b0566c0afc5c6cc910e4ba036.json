{"ast":null,"code":"import _classCallCheck from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/inherits\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import classNames from'classnames';import{compose}from'recompose';import withStyles from'@material-ui/core/styles/withStyles';import{withTranslation}from'react-i18next';import Tooltip from'@material-ui/core/Tooltip';import{getForwardTitle,isForwardOriginHidden}from'../../Utils/Message';import{openUser,openChat}from'../../Actions/Client';import'./Forward.css';function arrowGenerator(color){return{'&[x-placement*=\"bottom\"] $arrow':{top:0,left:0,marginTop:'-0.95em',width:'3em',height:'1em','&::before':{borderWidth:'0 1em 1em 1em',borderColor:\"transparent transparent \".concat(color,\" transparent\")}},'&[x-placement*=\"top\"] $arrow':{bottom:0,left:0,marginBottom:'-0.95em',width:'3em',height:'1em','&::before':{borderWidth:'1em 1em 0 1em',borderColor:\"\".concat(color,\" transparent transparent transparent\")}},'&[x-placement*=\"right\"] $arrow':{left:0,marginLeft:'-0.95em',height:'3em',width:'1em','&::before':{borderWidth:'1em 1em 1em 0',borderColor:\"transparent \".concat(color,\" transparent transparent\")}},'&[x-placement*=\"left\"] $arrow':{right:0,marginRight:'-0.95em',height:'3em',width:'1em','&::before':{borderWidth:'1em 0 1em 1em',borderColor:\"transparent transparent transparent \".concat(color)}}};}var styles=function styles(theme){return{forwardColor:{color:theme.palette.primary.main},arrowPopper:arrowGenerator(theme.palette.grey[700]),arrow:{position:'absolute',fontSize:6,width:'3em',height:'3em','&::before':{content:'\"\"',margin:'auto',display:'block',width:0,height:0,borderStyle:'solid'}},tooltip:{margin:'6px 0 26px 0'}};};var Forward=/*#__PURE__*/function(_React$Component){_inherits(Forward,_React$Component);function Forward(){var _getPrototypeOf2;var _this;_classCallCheck(this,Forward);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Forward)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={arrowRef:null};_this.handleArrowRef=function(node){_this.setState({arrowRef:node});};_this.openForward=function(event){event.stopPropagation();var forwardInfo=_this.props.forwardInfo;if(!forwardInfo)return null;var origin=forwardInfo.origin;switch(origin['@type']){case'messageForwardOriginUser':{var sender_user_id=origin.sender_user_id;openUser(sender_user_id,true);break;}case'messageForwardOriginHiddenUser':{break;}case'messageForwardOriginChannel':{var chat_id=origin.chat_id,message_id=origin.message_id;openChat(chat_id,message_id);break;}}};return _this;}_createClass(Forward,[{key:\"render\",value:function render(){var _this$props=this.props,t=_this$props.t,classes=_this$props.classes,forwardInfo=_this$props.forwardInfo;var arrowRef=this.state.arrowRef;var title=getForwardTitle(forwardInfo,t);var tooltip=isForwardOriginHidden(forwardInfo)?React.createElement(React.Fragment,null,t('HidAccount'),React.createElement(\"span\",{className:classes.arrow,ref:this.handleArrowRef})):'';return React.createElement(\"div\",{className:classNames('message-author',classes.forwardColor,'forward')},\"\".concat(t('ForwardedMessage'),\"\\n\").concat(t('From'),\" \"),React.createElement(Tooltip,{title:tooltip,classes:{popper:classes.arrowPopper,tooltip:classes.tooltip},PopperProps:{popperOptions:{modifiers:{arrow:{enabled:Boolean(arrowRef),element:arrowRef}}}},placement:\"top\"},React.createElement(\"a\",{onClick:this.openForward},title)));}}]);return Forward;}(React.Component);var enhance=compose(withStyles(styles,{withTheme:true}),withTranslation());export default enhance(Forward);","map":{"version":3,"sources":["/Users/yosuahalim/Documents/Projects/telegram-app/src/Components/Message/Forward.js"],"names":["React","classNames","compose","withStyles","withTranslation","Tooltip","getForwardTitle","isForwardOriginHidden","openUser","openChat","arrowGenerator","color","top","left","marginTop","width","height","borderWidth","borderColor","bottom","marginBottom","marginLeft","right","marginRight","styles","theme","forwardColor","palette","primary","main","arrowPopper","grey","arrow","position","fontSize","content","margin","display","borderStyle","tooltip","Forward","state","arrowRef","handleArrowRef","node","setState","openForward","event","stopPropagation","forwardInfo","props","origin","sender_user_id","chat_id","message_id","t","classes","title","popper","popperOptions","modifiers","enabled","Boolean","element","Component","enhance","withTheme"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport { getForwardTitle, isForwardOriginHidden } from '../../Utils/Message';\nimport { openUser, openChat } from '../../Actions/Client';\nimport './Forward.css';\n\nfunction arrowGenerator(color) {\n    return {\n        '&[x-placement*=\"bottom\"] $arrow': {\n            top: 0,\n            left: 0,\n            marginTop: '-0.95em',\n            width: '3em',\n            height: '1em',\n            '&::before': {\n                borderWidth: '0 1em 1em 1em',\n                borderColor: `transparent transparent ${color} transparent`\n            }\n        },\n        '&[x-placement*=\"top\"] $arrow': {\n            bottom: 0,\n            left: 0,\n            marginBottom: '-0.95em',\n            width: '3em',\n            height: '1em',\n            '&::before': {\n                borderWidth: '1em 1em 0 1em',\n                borderColor: `${color} transparent transparent transparent`\n            }\n        },\n        '&[x-placement*=\"right\"] $arrow': {\n            left: 0,\n            marginLeft: '-0.95em',\n            height: '3em',\n            width: '1em',\n            '&::before': {\n                borderWidth: '1em 1em 1em 0',\n                borderColor: `transparent ${color} transparent transparent`\n            }\n        },\n        '&[x-placement*=\"left\"] $arrow': {\n            right: 0,\n            marginRight: '-0.95em',\n            height: '3em',\n            width: '1em',\n            '&::before': {\n                borderWidth: '1em 0 1em 1em',\n                borderColor: `transparent transparent transparent ${color}`\n            }\n        }\n    };\n}\n\nconst styles = theme => ({\n    forwardColor: {\n        color: theme.palette.primary.main\n    },\n    arrowPopper: arrowGenerator(theme.palette.grey[700]),\n    arrow: {\n        position: 'absolute',\n        fontSize: 6,\n        width: '3em',\n        height: '3em',\n        '&::before': {\n            content: '\"\"',\n            margin: 'auto',\n            display: 'block',\n            width: 0,\n            height: 0,\n            borderStyle: 'solid'\n        }\n    },\n    tooltip: {\n        margin: '6px 0 26px 0'\n    }\n});\n\nclass Forward extends React.Component {\n    state = {\n        arrowRef: null\n    };\n\n    handleArrowRef = node => {\n        this.setState({\n            arrowRef: node\n        });\n    };\n\n    openForward = event => {\n        event.stopPropagation();\n\n        const { forwardInfo } = this.props;\n        if (!forwardInfo) return null;\n\n        const { origin } = forwardInfo;\n\n        switch (origin['@type']) {\n            case 'messageForwardOriginUser': {\n                const { sender_user_id } = origin;\n\n                openUser(sender_user_id, true);\n                break;\n            }\n            case 'messageForwardOriginHiddenUser': {\n                break;\n            }\n            case 'messageForwardOriginChannel': {\n                const { chat_id, message_id } = origin;\n\n                openChat(chat_id, message_id);\n                break;\n            }\n        }\n    };\n\n    render() {\n        const { t, classes, forwardInfo } = this.props;\n        const { arrowRef } = this.state;\n\n        const title = getForwardTitle(forwardInfo, t);\n        const tooltip = isForwardOriginHidden(forwardInfo) ? (\n            <>\n                {t('HidAccount')}\n                <span className={classes.arrow} ref={this.handleArrowRef} />\n            </>\n        ) : (\n            ''\n        );\n\n        return (\n            <div className={classNames('message-author', classes.forwardColor, 'forward')}>\n                {`${t('ForwardedMessage')}\\n${t('From')} `}\n                <Tooltip\n                    title={tooltip}\n                    classes={{ popper: classes.arrowPopper, tooltip: classes.tooltip }}\n                    PopperProps={{\n                        popperOptions: {\n                            modifiers: {\n                                arrow: {\n                                    enabled: Boolean(arrowRef),\n                                    element: arrowRef\n                                }\n                            }\n                        }\n                    }}\n                    placement='top'>\n                    <a onClick={this.openForward}>{title}</a>\n                </Tooltip>\n            </div>\n        );\n    }\n}\n\nForward.propTypes = {\n    forwardInfo: PropTypes.object.isRequired\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(Forward);\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/inherits\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import{EventEmitter}from'events';import TdLibController from'../Controllers/TdLibController';var SupergroupStore=/*#__PURE__*/function(_EventEmitter){_inherits(SupergroupStore,_EventEmitter);function SupergroupStore(){var _this;_classCallCheck(this,SupergroupStore);_this=_possibleConstructorReturn(this,_getPrototypeOf(SupergroupStore).call(this));_this.reset=function(){_this.items=new Map();_this.fullInfoItems=new Map();};_this.onUpdate=function(update){switch(update['@type']){case'updateAuthorizationState':{var authorization_state=update.authorization_state;if(!authorization_state)break;switch(authorization_state['@type']){case'authorizationStateClosed':{_this.reset();break;}}break;}case'updateSupergroup':_this.set(update.supergroup);_this.emit(update['@type'],update);break;case'updateSupergroupFullInfo':_this.setFullInfo(update.supergroup_id,update.supergroup_full_info);_this.emit(update['@type'],update);break;default:break;}};_this.onClientUpdate=function(update){};_this.addTdLibListener=function(){TdLibController.addListener('update',_this.onUpdate);TdLibController.addListener('clientUpdate',_this.onClientUpdate);};_this.removeTdLibListener=function(){TdLibController.removeListener('update',_this.onUpdate);TdLibController.removeListener('clientUpdate',_this.onClientUpdate);};_this.reset();_this.addTdLibListener();_this.setMaxListeners(Infinity);return _this;}_createClass(SupergroupStore,[{key:\"get\",value:function get(id){return this.items.get(id);}},{key:\"set\",value:function set(supergroup){this.items.set(supergroup.id,supergroup);}},{key:\"getFullInfo\",value:function getFullInfo(id){return this.fullInfoItems.get(id);}},{key:\"setFullInfo\",value:function setFullInfo(id,fullInfo){this.fullInfoItems.set(id,fullInfo);}}]);return SupergroupStore;}(EventEmitter);var store=new SupergroupStore();window.supergroup=store;export default store;","map":{"version":3,"sources":["/Users/yosuahalim/Documents/Projects/telegram-app/src/Stores/SupergroupStore.js"],"names":["EventEmitter","TdLibController","SupergroupStore","reset","items","Map","fullInfoItems","onUpdate","update","authorization_state","set","supergroup","emit","setFullInfo","supergroup_id","supergroup_full_info","onClientUpdate","addTdLibListener","addListener","removeTdLibListener","removeListener","setMaxListeners","Infinity","id","get","fullInfo","store","window"],"mappings":"kqBAAA;;;;;GAOA,OAASA,YAAT,KAA6B,QAA7B,CACA,MAAOC,CAAAA,eAAP,KAA4B,gCAA5B,C,GAEMC,CAAAA,e,+EACF,0BAAc,iDACV,mFADU,MASdC,KATc,CASN,UAAM,CACV,MAAKC,KAAL,CAAa,GAAIC,CAAAA,GAAJ,EAAb,CACA,MAAKC,aAAL,CAAqB,GAAID,CAAAA,GAAJ,EAArB,CACH,CAZa,OAcdE,QAdc,CAcH,SAAAC,MAAM,CAAI,CACjB,OAAQA,MAAM,CAAC,OAAD,CAAd,EACI,IAAK,0BAAL,CAAiC,IACrBC,CAAAA,mBADqB,CACGD,MADH,CACrBC,mBADqB,CAE7B,GAAI,CAACA,mBAAL,CAA0B,MAE1B,OAAQA,mBAAmB,CAAC,OAAD,CAA3B,EACI,IAAK,0BAAL,CAAiC,CAC7B,MAAKN,KAAL,GACA,MACH,CAJL,CAOA,MACH,CACD,IAAK,kBAAL,CACI,MAAKO,GAAL,CAASF,MAAM,CAACG,UAAhB,EAEA,MAAKC,IAAL,CAAUJ,MAAM,CAAC,OAAD,CAAhB,CAA2BA,MAA3B,EACA,MACJ,IAAK,0BAAL,CACI,MAAKK,WAAL,CAAiBL,MAAM,CAACM,aAAxB,CAAuCN,MAAM,CAACO,oBAA9C,EAEA,MAAKH,IAAL,CAAUJ,MAAM,CAAC,OAAD,CAAhB,CAA2BA,MAA3B,EACA,MACJ,QACI,MAzBR,CA2BH,CA1Ca,OA4CdQ,cA5Cc,CA4CG,SAAAR,MAAM,CAAI,CAAE,CA5Cf,OA8CdS,gBA9Cc,CA8CK,UAAM,CACrBhB,eAAe,CAACiB,WAAhB,CAA4B,QAA5B,CAAsC,MAAKX,QAA3C,EACAN,eAAe,CAACiB,WAAhB,CAA4B,cAA5B,CAA4C,MAAKF,cAAjD,EACH,CAjDa,OAmDdG,mBAnDc,CAmDQ,UAAM,CACxBlB,eAAe,CAACmB,cAAhB,CAA+B,QAA/B,CAAyC,MAAKb,QAA9C,EACAN,eAAe,CAACmB,cAAhB,CAA+B,cAA/B,CAA+C,MAAKJ,cAApD,EACH,CAtDa,CAGV,MAAKb,KAAL,GAEA,MAAKc,gBAAL,GACA,MAAKI,eAAL,CAAqBC,QAArB,EANU,aAOb,C,4DAiDGC,E,CAAI,CACJ,MAAO,MAAKnB,KAAL,CAAWoB,GAAX,CAAeD,EAAf,CAAP,CACH,C,gCAEGZ,U,CAAY,CACZ,KAAKP,KAAL,CAAWM,GAAX,CAAeC,UAAU,CAACY,EAA1B,CAA8BZ,UAA9B,EACH,C,gDAEWY,E,CAAI,CACZ,MAAO,MAAKjB,aAAL,CAAmBkB,GAAnB,CAAuBD,EAAvB,CAAP,CACH,C,gDAEWA,E,CAAIE,Q,CAAU,CACtB,KAAKnB,aAAL,CAAmBI,GAAnB,CAAuBa,EAAvB,CAA2BE,QAA3B,EACH,C,6BAvEyBzB,Y,EA0E9B,GAAM0B,CAAAA,KAAK,CAAG,GAAIxB,CAAAA,eAAJ,EAAd,CACAyB,MAAM,CAAChB,UAAP,CAAoBe,KAApB,CACA,cAAeA,CAAAA,KAAf","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { EventEmitter } from 'events';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass SupergroupStore extends EventEmitter {\n    constructor() {\n        super();\n\n        this.reset();\n\n        this.addTdLibListener();\n        this.setMaxListeners(Infinity);\n    }\n\n    reset = () => {\n        this.items = new Map();\n        this.fullInfoItems = new Map();\n    };\n\n    onUpdate = update => {\n        switch (update['@type']) {\n            case 'updateAuthorizationState': {\n                const { authorization_state } = update;\n                if (!authorization_state) break;\n\n                switch (authorization_state['@type']) {\n                    case 'authorizationStateClosed': {\n                        this.reset();\n                        break;\n                    }\n                }\n\n                break;\n            }\n            case 'updateSupergroup':\n                this.set(update.supergroup);\n\n                this.emit(update['@type'], update);\n                break;\n            case 'updateSupergroupFullInfo':\n                this.setFullInfo(update.supergroup_id, update.supergroup_full_info);\n\n                this.emit(update['@type'], update);\n                break;\n            default:\n                break;\n        }\n    };\n\n    onClientUpdate = update => {};\n\n    addTdLibListener = () => {\n        TdLibController.addListener('update', this.onUpdate);\n        TdLibController.addListener('clientUpdate', this.onClientUpdate);\n    };\n\n    removeTdLibListener = () => {\n        TdLibController.removeListener('update', this.onUpdate);\n        TdLibController.removeListener('clientUpdate', this.onClientUpdate);\n    };\n\n    get(id) {\n        return this.items.get(id);\n    }\n\n    set(supergroup) {\n        this.items.set(supergroup.id, supergroup);\n    }\n\n    getFullInfo(id) {\n        return this.fullInfoItems.get(id);\n    }\n\n    setFullInfo(id, fullInfo) {\n        this.fullInfoItems.set(id, fullInfo);\n    }\n}\n\nconst store = new SupergroupStore();\nwindow.supergroup = store;\nexport default store;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import{withTranslation}from'react-i18next';import Button from'@material-ui/core/Button';import Dialog from'@material-ui/core/Dialog';import DialogTitle from'@material-ui/core/DialogTitle';import DialogContent from'@material-ui/core/DialogContent';import DialogContentText from'@material-ui/core/DialogContentText';import DialogActions from'@material-ui/core/DialogActions';import{openChat,openUser}from'../../Actions/Client';import TdLibController from'../../Controllers/TdLibController';import'./MentionLink.css';var MentionLink=/*#__PURE__*/function(_React$Component){_inherits(MentionLink,_React$Component);function MentionLink(props){var _this;_classCallCheck(this,MentionLink);_this=_possibleConstructorReturn(this,_getPrototypeOf(MentionLink).call(this,props));_this.handleClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var _this$props,userId,username,popup,chat;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.stopPropagation();event.preventDefault();_this$props=_this.props,userId=_this$props.userId,username=_this$props.username,popup=_this$props.popup;if(!userId){_context.next=7;break;}openUser(userId,popup);_context.next=12;break;case 7:if(!username){_context.next=12;break;}_context.next=10;return TdLibController.send({'@type':'searchPublicChat',username:username}).catch(function(){_this.setState({error:true});});case 10:chat=_context.sent;if(chat){openChat(chat.id,null,popup);}case 12:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleClose=function(){_this.setState({error:false});};_this.handleDialogClick=function(event){event.preventDefault();event.stopPropagation();};_this.state={};return _this;}_createClass(MentionLink,[{key:\"render\",value:function render(){var _this$props2=this.props,children=_this$props2.children,t=_this$props2.t,username=_this$props2.username;var error=this.state.error;return React.createElement(React.Fragment,null,React.createElement(\"a\",{onClick:this.handleClick},children),error&&React.createElement(Dialog,{transitionDuration:0,open:true,onClose:this.handleClose,onClick:this.handleDialogClick,\"aria-labelledby\":\"confirm-dialog-title\"},React.createElement(DialogTitle,{id:\"confirm-dialog-title\"},t('Error')),React.createElement(DialogContent,{classes:{root:'safe-link-content-root'}},React.createElement(DialogContentText,null,\"Can't find username \".concat(username,\".\"))),React.createElement(DialogActions,null,React.createElement(Button,{onClick:this.handleClose},t('Ok')))));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){var userId=props.userId,username=props.username;if(state.prevUserId!==userId||state.prevUsername!==username){return{prevUserId:userId,prevUsername:username,error:false};}return null;}}]);return MentionLink;}(React.Component);MentionLink.defaultProps={popup:true};export default withTranslation()(MentionLink);","map":{"version":3,"sources":["/home/me-admin/Downloads/my-app/src/Components/Additional/MentionLink.js"],"names":["React","withTranslation","Button","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","openChat","openUser","TdLibController","MentionLink","props","handleClick","event","stopPropagation","preventDefault","userId","username","popup","send","catch","setState","error","chat","id","handleClose","handleDialogClick","state","children","t","root","prevUserId","prevUsername","Component","defaultProps"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { openChat, openUser } from '../../Actions/Client';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './MentionLink.css';\n\nclass MentionLink extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {};\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { userId, username } = props;\n\n        if (state.prevUserId !== userId || state.prevUsername !== username) {\n            return {\n                prevUserId: userId,\n                prevUsername: username,\n                error: false\n            };\n        }\n\n        return null;\n    }\n\n    handleClick = async event => {\n        event.stopPropagation();\n        event.preventDefault();\n\n        const { userId, username, popup } = this.props;\n        if (userId) {\n            openUser(userId, popup);\n        } else if (username) {\n            const chat = await TdLibController.send({\n                '@type': 'searchPublicChat',\n                username\n            }).catch(() => {\n                this.setState({ error: true });\n            });\n\n            if (chat) {\n                openChat(chat.id, null, popup);\n            }\n        }\n    };\n\n    handleClose = () => {\n        this.setState({ error: false });\n    };\n\n    handleDialogClick = event => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    render() {\n        const { children, t, username } = this.props;\n        const { error } = this.state;\n\n        return (\n            <>\n                <a onClick={this.handleClick}>{children}</a>\n                {error && (\n                    <Dialog\n                        transitionDuration={0}\n                        open={true}\n                        onClose={this.handleClose}\n                        onClick={this.handleDialogClick}\n                        aria-labelledby='confirm-dialog-title'>\n                        <DialogTitle id='confirm-dialog-title'>{t('Error')}</DialogTitle>\n                        <DialogContent classes={{ root: 'safe-link-content-root' }}>\n                            <DialogContentText>{`Can't find username ${username}.`}</DialogContentText>\n                        </DialogContent>\n                        <DialogActions>\n                            <Button onClick={this.handleClose}>{t('Ok')}</Button>\n                        </DialogActions>\n                    </Dialog>\n                )}\n            </>\n        );\n    }\n}\n\nMentionLink.propTypes = {\n    userId: PropTypes.number,\n    username: PropTypes.string,\n    popup: PropTypes.bool\n};\n\nMentionLink.defaultProps = {\n    popup: true\n};\n\nexport default withTranslation()(MentionLink);\n"]},"metadata":{},"sourceType":"module"}
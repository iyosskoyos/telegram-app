{"ast":null,"code":"import _slicedToArray from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import copy from'copy-to-clipboard';import classNames from'classnames';import{compose}from'recompose';import withStyles from'@material-ui/core/styles/withStyles';import{withSnackbar}from'notistack';import{withTranslation}from'react-i18next';import AlternateEmailIcon from'@material-ui/icons/AlternateEmail';import GroupIcon from'@material-ui/icons/Group';import CallIcon from'@material-ui/icons/Call';import CloseIcon from'@material-ui/icons/Close';import Divider from'@material-ui/core/Divider';import ErrorOutlineIcon from'@material-ui/icons/ErrorOutline';import HeadsetIcon from'@material-ui/icons/Headset';import IconButton from'@material-ui/core/IconButton';import InsertDriveFileIcon from'@material-ui/icons/InsertDriveFile';import InsertLinkIcon from'@material-ui/icons/InsertLink';import List from'@material-ui/core/List';import ListItem from'@material-ui/core/ListItem';import ListItemIcon from'@material-ui/core/ListItemIcon';import ListItemText from'@material-ui/core/ListItemText';import MicIcon from'@material-ui/icons/Mic';import PhotoIcon from'@material-ui/icons/Photo';import Typography from'@material-ui/core/Typography';import VideocamIcon from'@material-ui/icons/Videocam';import UserControl from'../Tile/UserControl';import ChatControl from'../Tile/ChatControl';import ChatDetailsHeader from'./ChatDetailsHeader';import NotificationsListItem from'./NotificationsListItem';import MoreListItem from'./MoreListItem';import{getChatUsername,getChatPhoneNumber,getChatBio,isGroupChat,getGroupChatMembers,getChatFullInfo,isPrivateChat,getChatUserId,isMeChat}from'../../Utils/Chat';import{getUserStatusOrder}from'../../Utils/User';import{loadUsersContent,loadChatsContent}from'../../Utils/File';import{formatPhoneNumber}from'../../Utils/Common';import{openChat,openUser,setProfileMediaViewerContent}from'../../Actions/Client';import{withRestoreRef,withSaveRef}from'../../Utils/HOC';import{NOTIFICATION_AUTO_HIDE_DURATION_MS}from'../../Constants';import ChatStore from'../../Stores/ChatStore';import UserStore from'../../Stores/UserStore';import BasicGroupStore from'../../Stores/BasicGroupStore';import SupergroupStore from'../../Stores/SupergroupStore';import OptionStore from'../../Stores/OptionStore';import FileStore from'../../Stores/FileStore';import ApplicationStore from'../../Stores/ApplicationStore';import TdLibController from'../../Controllers/TdLibController';import'./ChatDetails.css';var styles=function styles(theme){return{closeIconButton:{margin:'8px -2px 8px 12px'},nested:{// paddingLeft: theme.spacing.unit * 4,\n},close:{padding:theme.spacing.unit/2},listItem:{padding:'11px 22px'}};};var ChatDetails=/*#__PURE__*/function(_React$Component){_inherits(ChatDetails,_React$Component);function ChatDetails(props){var _this;_classCallCheck(this,ChatDetails);_this=_possibleConstructorReturn(this,_getPrototypeOf(ChatDetails).call(this,props));_this.onUpdateBasicGroupFullInfo=function(update){var chat=ChatStore.get(_this.props.chatId);if(!chat)return;if(chat.type&&chat.type['@type']==='chatTypeBasicGroup'&&chat.type.basic_group_id===update.basic_group_id){_this.forceUpdate();// update bio\n}};_this.onUpdateSupergroupFullInfo=function(update){var chat=ChatStore.get(_this.props.chatId);if(!chat)return;if(chat.type&&chat.type['@type']==='chatTypeSupergroup'&&chat.type.supergroup_id===update.supergroup_id){_this.forceUpdate();// update bio\n}};_this.onUpdateUserFullInfo=function(update){var chat=ChatStore.get(_this.props.chatId);if(!chat)return;if(chat.type&&(chat.type['@type']==='chatTypePrivate'||chat.type['@type']==='chatTypeSecret')&&chat.type.user_id===update.user_id){_this.forceUpdate();// update bio\n}};_this.onUpdateUserStatus=function(update){if(_this.members.has(update.user_id)){_this.forceUpdate();}};_this.loadContent=function(){_this.loadChatContents();};_this.loadChatContents=function(){var _this$props=_this.props,chatId=_this$props.chatId,popup=_this$props.popup;var store=FileStore.getStore();loadChatsContent(store,[chatId]);var members=getGroupChatMembers(chatId).map(function(x){return x.user_id;});loadUsersContent(store,members);if(popup){getChatFullInfo(chatId);}};_this.handleUsernameHint=function(){var _this$props2=_this.props,t=_this$props2.t,chatId=_this$props2.chatId;var username=getChatUsername(chatId);if(!username)return;var telegramUrlOption=OptionStore.get('t_me_url');var usernameLink=telegramUrlOption?telegramUrlOption.value:'https://telegram.org/';copy(usernameLink+username);var key=\"\".concat(chatId,\"_copy_username\");var message=t('TextCopied');var action=null;_this.handleScheduledAction(key,message,action);};_this.handleScheduledAction=function(key,message,action){if(!key)return;var _this$props3=_this.props,enqueueSnackbar=_this$props3.enqueueSnackbar,classes=_this$props3.classes;if(!enqueueSnackbar)return;var TRANSITION_DELAY=150;if(ApplicationStore.addScheduledAction(key,NOTIFICATION_AUTO_HIDE_DURATION_MS+2*TRANSITION_DELAY,action)){enqueueSnackbar(message,{autoHideDuration:NOTIFICATION_AUTO_HIDE_DURATION_MS,action:[React.createElement(IconButton,{key:\"close\",\"aria-label\":\"Close\",color:\"inherit\",className:classes.close,onClick:function onClick(){return ApplicationStore.removeScheduledAction(key);}},React.createElement(CloseIcon,null))]});}};_this.handlePhoneHint=function(){var _this$props4=_this.props,t=_this$props4.t,chatId=_this$props4.chatId;var phoneNumber=getChatPhoneNumber(chatId);if(!phoneNumber)return;copy(formatPhoneNumber(phoneNumber));var key=\"\".concat(chatId,\"_copy_phone\");var message=t('PhoneCopied');var action=null;_this.handleScheduledAction(key,message,action);};_this.handleHeaderClick=function(){_this.chatDetailsListRef.current.scrollTop=0;};_this.handleOpenViewer=function(){var _this$props5=_this.props,chatId=_this$props5.chatId,popup=_this$props5.popup;var chat=ChatStore.get(chatId);if(!chat)return;if(!chat.photo)return;setProfileMediaViewerContent({chatId:chatId});if(popup){TdLibController.clientUpdate({'@type':'clientUpdateDialogChatId',chatId:0});}};_this.handleOpenChat=function(){var _this$props6=_this.props,chatId=_this$props6.chatId,popup=_this$props6.popup;openChat(chatId,null,false);if(popup){TdLibController.clientUpdate({'@type':'clientUpdateDialogChatId',chatId:0});}};_this.handleOpenUser=function(userId){openUser(userId,true);};_this.getContentHeight=function(){if(!_this.chatDetailsListRef)return 0;return _this.chatDetailsListRef.current.clientHeight;};console.log('ChatDetails.ctor',_this.props.counters);_this.chatDetailsListRef=React.createRef();var _chatId=_this.props.chatId;_this.members=new Map();_this.state={prevChatId:_chatId};return _this;}_createClass(ChatDetails,[{key:\"getSnapshotBeforeUpdate\",value:function getSnapshotBeforeUpdate(prevProps,prevState){var chatId=this.props.chatId;var list=this.chatDetailsListRef.current;var scrollTop=list.scrollTop,scrollHeight=list.scrollHeight,offsetHeight=list.offsetHeight;var snapshot={scrollTop:scrollTop,scrollHeight:scrollHeight,offsetHeight:offsetHeight};// console.log(\n//     `[ChatDetails] getSnapshotBeforeUpdate chatId=${chatId} scrollTop=${scrollTop} scrollHeight=${scrollHeight} offsetHeight=${offsetHeight}`\n// );\nreturn snapshot;}},{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps,nextState){var _this$props7=this.props,chatId=_this$props7.chatId,theme=_this$props7.theme,counters=_this$props7.counters,migratedCounters=_this$props7.migratedCounters;if(nextProps.chatId!==chatId){return true;}if(nextProps.counters!==counters){return true;}if(nextProps.migratedCounters!==migratedCounters){return true;}if(nextProps.theme!==theme){return true;}return false;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){var chatId=this.props.chatId;if(prevProps.chatId!==chatId){this.loadContent();}var list=this.chatDetailsListRef.current;var scrollTop=snapshot.scrollTop,scrollHeight=snapshot.scrollHeight,offsetHeight=snapshot.offsetHeight;if(prevProps.chatId===chatId){list.scrollTop=scrollTop;}else{list.scrollTop=0;}}},{key:\"componentDidMount\",value:function componentDidMount(){console.log('ChatDetails.componentDidMount');this.loadContent();UserStore.on('updateUserStatus',this.onUpdateUserStatus);UserStore.on('updateUserFullInfo',this.onUpdateUserFullInfo);BasicGroupStore.on('updateBasicGroupFullInfo',this.onUpdateBasicGroupFullInfo);SupergroupStore.on('updateSupergroupFullInfo',this.onUpdateSupergroupFullInfo);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){UserStore.removeListener('updateUserStatus',this.onUpdateUserStatus);UserStore.removeListener('updateUserFullInfo',this.onUpdateUserFullInfo);BasicGroupStore.removeListener('updateBasicGroupFullInfo',this.onUpdateBasicGroupFullInfo);SupergroupStore.removeListener('updateSupergroupFullInfo',this.onUpdateSupergroupFullInfo);}},{key:\"render\",value:function render(){var _this2=this;var _this$props8=this.props,backButton=_this$props8.backButton,className=_this$props8.className,chatId=_this$props8.chatId,classes=_this$props8.classes,onClose=_this$props8.onClose,onOpenGroupInCommon=_this$props8.onOpenGroupInCommon,onOpenSharedAudios=_this$props8.onOpenSharedAudios,onOpenSharedDocuments=_this$props8.onOpenSharedDocuments,onOpenSharedLinks=_this$props8.onOpenSharedLinks,onOpenSharedMedia=_this$props8.onOpenSharedMedia,onOpenSharedPhotos=_this$props8.onOpenSharedPhotos,onOpenSharedVideos=_this$props8.onOpenSharedVideos,onOpenSharedVoiceNotes=_this$props8.onOpenSharedVoiceNotes,popup=_this$props8.popup,t=_this$props8.t;var _this$props9=this.props,counters=_this$props9.counters,migratedCounters=_this$props9.migratedCounters;counters=counters||[0,0,0,0,0,0];migratedCounters=migratedCounters||[0,0,0,0,0,0];console.log('ChatDetails.render counters',counters,migratedCounters);var _counters$map=counters.map(function(el,i){return el+migratedCounters[i];}),_counters$map2=_slicedToArray(_counters$map,6),photoCount=_counters$map2[0],videoCount=_counters$map2[1],documentCount=_counters$map2[2],audioCount=_counters$map2[3],urlCount=_counters$map2[4],voiceAndVideoNoteCount=_counters$map2[5];var chat=ChatStore.get(chatId);if(!chat){return React.createElement(\"div\",{className:\"chat-details\"},React.createElement(ChatDetailsHeader,{onClose:onClose}),React.createElement(\"div\",{ref:this.chatDetailsListRef,className:\"chat-details-list\"}));}var groupInCommonCount=0;if(isPrivateChat(chatId)){var fullInfo=UserStore.getFullInfo(chat.type.user_id);groupInCommonCount=fullInfo?fullInfo.group_in_common_count:groupInCommonCount;}var username=getChatUsername(chatId);var phoneNumber=getChatPhoneNumber(chatId);var bio=getChatBio(chatId);var isGroup=isGroupChat(chatId);var isMe=isMeChat(chatId);var members=getGroupChatMembers(chatId);var users=[];this.members=new Map();members.forEach(function(member){var user=UserStore.get(member.user_id);if(user){_this2.members.set(user.id,user.id);users.push(user);}});var sortedUsers=users.sort(function(x,y){return getUserStatusOrder(y)-getUserStatusOrder(x);});var items=sortedUsers.map(function(user){return React.createElement(ListItem,{button:true,className:classes.listItem,key:user.id},React.createElement(UserControl,{userId:user.id,onSelect:_this2.handleOpenUser}));});var photo=chat.photo;var content=React.createElement(React.Fragment,null,React.createElement(ChatDetailsHeader,{chatId:chatId,backButton:backButton,onClose:onClose,onClick:this.handleHeaderClick}),React.createElement(\"div\",{ref:this.chatDetailsListRef,className:\"chat-details-list\"},React.createElement(\"div\",{className:\"chat-details-info\"},React.createElement(ChatControl,{chatId:chatId,showStatus:popup,showSavedMessages:!popup,onTileSelect:photo?this.handleOpenViewer:null})),(username||phoneNumber||bio)&&React.createElement(React.Fragment,null,React.createElement(List,null,username&&React.createElement(ListItem,{button:true,className:classes.listItem,onClick:this.handleUsernameHint},React.createElement(ListItemIcon,null,React.createElement(AlternateEmailIcon,null)),React.createElement(ListItemText,{primary:React.createElement(Typography,{variant:\"inherit\",noWrap:true},username)})),phoneNumber&&React.createElement(React.Fragment,null,React.createElement(ListItem,{button:true,className:classes.listItem,onClick:this.handlePhoneHint},React.createElement(ListItemIcon,null,React.createElement(CallIcon,null)),React.createElement(ListItemText,{primary:React.createElement(Typography,{variant:\"inherit\",noWrap:true},formatPhoneNumber(phoneNumber))}))),bio&&React.createElement(ListItem,{className:classes.listItem},React.createElement(ListItemIcon,null,React.createElement(ErrorOutlineIcon,{className:\"chat-details-info-icon\"})),React.createElement(ListItemText,{primary:bio,style:{whiteSpace:'pre-wrap',wordWrap:'break-word'}})))),(!isMe||isGroup||popup&&!isGroup)&&React.createElement(React.Fragment,null,React.createElement(Divider,null),React.createElement(List,null,!isMe&&React.createElement(NotificationsListItem,{chatId:chatId}),isGroup&&React.createElement(MoreListItem,{chatId:chatId}),popup&&!isGroup&&React.createElement(ListItem,{button:true,className:classes.listItem,onClick:this.handleOpenChat},React.createElement(ListItemText,{inset:true,primary:React.createElement(Typography,{color:\"primary\",variant:\"inherit\",noWrap:true},t('SendMessage').toUpperCase())})))),(photoCount>0||videoCount>0||documentCount>0||audioCount>0||urlCount>0||voiceAndVideoNoteCount>0||groupInCommonCount>0)&&React.createElement(React.Fragment,null,React.createElement(Divider,null),React.createElement(List,null,photoCount>0&&React.createElement(ListItem,{button:true,className:classes.listItem,onClick:onOpenSharedPhotos},React.createElement(ListItemIcon,null,React.createElement(PhotoIcon,null)),React.createElement(ListItemText,{primary:React.createElement(Typography,{variant:\"inherit\",noWrap:true},photoCount===1?'1 photo':\"\".concat(photoCount,\" photos\"))})),videoCount>0&&React.createElement(ListItem,{button:true,className:classes.listItem,onClick:onOpenSharedVideos},React.createElement(ListItemIcon,null,React.createElement(VideocamIcon,null)),React.createElement(ListItemText,{primary:React.createElement(Typography,{variant:\"inherit\",noWrap:true},videoCount===1?'1 video':\"\".concat(videoCount,\" videos\"))})),documentCount>0&&React.createElement(ListItem,{button:true,className:classes.listItem,onClick:onOpenSharedDocuments},React.createElement(ListItemIcon,null,React.createElement(InsertDriveFileIcon,null)),React.createElement(ListItemText,{primary:React.createElement(Typography,{variant:\"inherit\",noWrap:true},documentCount===1?'1 file':\"\".concat(documentCount,\" files\"))})),audioCount>0&&React.createElement(ListItem,{button:true,className:classes.listItem,onClick:onOpenSharedAudios},React.createElement(ListItemIcon,null,React.createElement(HeadsetIcon,null)),React.createElement(ListItemText,{primary:React.createElement(Typography,{variant:\"inherit\",noWrap:true},audioCount===1?'1 audio file':\"\".concat(audioCount,\" audio files\"))})),urlCount>0&&React.createElement(ListItem,{button:true,className:classes.listItem,onClick:onOpenSharedLinks},React.createElement(ListItemIcon,null,React.createElement(InsertLinkIcon,null)),React.createElement(ListItemText,{primary:React.createElement(Typography,{variant:\"inherit\",noWrap:true},urlCount===1?'1 shared link':\"\".concat(urlCount,\" shared links\"))})),voiceAndVideoNoteCount>0&&React.createElement(ListItem,{button:true,className:classes.listItem,onClick:onOpenSharedVoiceNotes},React.createElement(ListItemIcon,null,React.createElement(MicIcon,null)),React.createElement(ListItemText,{primary:React.createElement(Typography,{variant:\"inherit\",noWrap:true},voiceAndVideoNoteCount===1?'1 voice message':\"\".concat(voiceAndVideoNoteCount,\" voice messages\"))})),groupInCommonCount>0&&React.createElement(ListItem,{button:true,className:classes.listItem,onClick:onOpenGroupInCommon},React.createElement(ListItemIcon,null,React.createElement(GroupIcon,null)),React.createElement(ListItemText,{inset:true,primary:React.createElement(Typography,{variant:\"inherit\",noWrap:true},groupInCommonCount===1?'1 group in common':\"\".concat(groupInCommonCount,\" groups in common\"))})))),items.length>0&&React.createElement(React.Fragment,null,React.createElement(Divider,null),React.createElement(List,null,items))));return popup?React.createElement(React.Fragment,null,content):React.createElement(\"div\",{className:classNames('chat-details',className)},content);}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.chatId!==state.prevChatId){return{prevChatId:props.chatId};}return null;}}]);return ChatDetails;}(React.Component);var enhance=compose(withSaveRef(),withTranslation(),withStyles(styles,{withTheme:true}),withSnackbar,withRestoreRef());export default enhance(ChatDetails);","map":{"version":3,"sources":["/home/me-admin/Downloads/my-app/src/Components/ColumnRight/ChatDetails.js"],"names":["React","copy","classNames","compose","withStyles","withSnackbar","withTranslation","AlternateEmailIcon","GroupIcon","CallIcon","CloseIcon","Divider","ErrorOutlineIcon","HeadsetIcon","IconButton","InsertDriveFileIcon","InsertLinkIcon","List","ListItem","ListItemIcon","ListItemText","MicIcon","PhotoIcon","Typography","VideocamIcon","UserControl","ChatControl","ChatDetailsHeader","NotificationsListItem","MoreListItem","getChatUsername","getChatPhoneNumber","getChatBio","isGroupChat","getGroupChatMembers","getChatFullInfo","isPrivateChat","getChatUserId","isMeChat","getUserStatusOrder","loadUsersContent","loadChatsContent","formatPhoneNumber","openChat","openUser","setProfileMediaViewerContent","withRestoreRef","withSaveRef","NOTIFICATION_AUTO_HIDE_DURATION_MS","ChatStore","UserStore","BasicGroupStore","SupergroupStore","OptionStore","FileStore","ApplicationStore","TdLibController","styles","theme","closeIconButton","margin","nested","close","padding","spacing","unit","listItem","ChatDetails","props","onUpdateBasicGroupFullInfo","update","chat","get","chatId","type","basic_group_id","forceUpdate","onUpdateSupergroupFullInfo","supergroup_id","onUpdateUserFullInfo","user_id","onUpdateUserStatus","members","has","loadContent","loadChatContents","popup","store","getStore","map","x","handleUsernameHint","t","username","telegramUrlOption","usernameLink","value","key","message","action","handleScheduledAction","enqueueSnackbar","classes","TRANSITION_DELAY","addScheduledAction","autoHideDuration","removeScheduledAction","handlePhoneHint","phoneNumber","handleHeaderClick","chatDetailsListRef","current","scrollTop","handleOpenViewer","photo","clientUpdate","handleOpenChat","handleOpenUser","userId","getContentHeight","clientHeight","console","log","counters","createRef","Map","state","prevChatId","prevProps","prevState","list","scrollHeight","offsetHeight","snapshot","nextProps","nextState","migratedCounters","on","removeListener","backButton","className","onClose","onOpenGroupInCommon","onOpenSharedAudios","onOpenSharedDocuments","onOpenSharedLinks","onOpenSharedMedia","onOpenSharedPhotos","onOpenSharedVideos","onOpenSharedVoiceNotes","el","i","photoCount","videoCount","documentCount","audioCount","urlCount","voiceAndVideoNoteCount","groupInCommonCount","fullInfo","getFullInfo","group_in_common_count","bio","isGroup","isMe","users","forEach","member","user","set","id","push","sortedUsers","sort","y","items","content","whiteSpace","wordWrap","toUpperCase","length","Component","enhance","withTheme"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport copy from 'copy-to-clipboard';\nimport classNames from 'classnames';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withSnackbar } from 'notistack';\nimport { withTranslation } from 'react-i18next';\nimport AlternateEmailIcon from '@material-ui/icons/AlternateEmail';\nimport GroupIcon from '@material-ui/icons/Group';\nimport CallIcon from '@material-ui/icons/Call';\nimport CloseIcon from '@material-ui/icons/Close';\nimport Divider from '@material-ui/core/Divider';\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\nimport HeadsetIcon from '@material-ui/icons/Headset';\nimport IconButton from '@material-ui/core/IconButton';\nimport InsertDriveFileIcon from '@material-ui/icons/InsertDriveFile';\nimport InsertLinkIcon from '@material-ui/icons/InsertLink';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport MicIcon from '@material-ui/icons/Mic';\nimport PhotoIcon from '@material-ui/icons/Photo';\nimport Typography from '@material-ui/core/Typography';\nimport VideocamIcon from '@material-ui/icons/Videocam';\nimport UserControl from '../Tile/UserControl';\nimport ChatControl from '../Tile/ChatControl';\nimport ChatDetailsHeader from './ChatDetailsHeader';\nimport NotificationsListItem from './NotificationsListItem';\nimport MoreListItem from './MoreListItem';\nimport {\n    getChatUsername,\n    getChatPhoneNumber,\n    getChatBio,\n    isGroupChat,\n    getGroupChatMembers,\n    getChatFullInfo,\n    isPrivateChat,\n    getChatUserId,\n    isMeChat\n} from '../../Utils/Chat';\nimport { getUserStatusOrder } from '../../Utils/User';\nimport { loadUsersContent, loadChatsContent } from '../../Utils/File';\nimport { formatPhoneNumber } from '../../Utils/Common';\nimport { openChat, openUser, setProfileMediaViewerContent } from '../../Actions/Client';\nimport { withRestoreRef, withSaveRef } from '../../Utils/HOC';\nimport { NOTIFICATION_AUTO_HIDE_DURATION_MS } from '../../Constants';\nimport ChatStore from '../../Stores/ChatStore';\nimport UserStore from '../../Stores/UserStore';\nimport BasicGroupStore from '../../Stores/BasicGroupStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport OptionStore from '../../Stores/OptionStore';\nimport FileStore from '../../Stores/FileStore';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './ChatDetails.css';\n\nconst styles = theme => ({\n    closeIconButton: {\n        margin: '8px -2px 8px 12px'\n    },\n    nested: {\n        // paddingLeft: theme.spacing.unit * 4,\n    },\n    close: {\n        padding: theme.spacing.unit / 2\n    },\n    listItem: {\n        padding: '11px 22px'\n    }\n});\n\nclass ChatDetails extends React.Component {\n    constructor(props) {\n        super(props);\n\n        console.log('ChatDetails.ctor', this.props.counters);\n\n        this.chatDetailsListRef = React.createRef();\n\n        const { chatId } = this.props;\n\n        this.members = new Map();\n        this.state = {\n            prevChatId: chatId\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevChatId) {\n            return {\n                prevChatId: props.chatId\n            };\n        }\n\n        return null;\n    }\n\n    getSnapshotBeforeUpdate(prevProps, prevState) {\n        const { chatId } = this.props;\n\n        const list = this.chatDetailsListRef.current;\n        const { scrollTop, scrollHeight, offsetHeight } = list;\n        const snapshot = {\n            scrollTop,\n            scrollHeight,\n            offsetHeight\n        };\n\n        // console.log(\n        //     `[ChatDetails] getSnapshotBeforeUpdate chatId=${chatId} scrollTop=${scrollTop} scrollHeight=${scrollHeight} offsetHeight=${offsetHeight}`\n        // );\n\n        return snapshot;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { chatId, theme, counters, migratedCounters } = this.props;\n\n        if (nextProps.chatId !== chatId) {\n            return true;\n        }\n\n        if (nextProps.counters !== counters) {\n            return true;\n        }\n\n        if (nextProps.migratedCounters !== migratedCounters) {\n            return true;\n        }\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        const { chatId } = this.props;\n        if (prevProps.chatId !== chatId) {\n            this.loadContent();\n        }\n\n        const list = this.chatDetailsListRef.current;\n        const { scrollTop, scrollHeight, offsetHeight } = snapshot;\n        if (prevProps.chatId === chatId) {\n            list.scrollTop = scrollTop;\n        } else {\n            list.scrollTop = 0;\n        }\n    }\n\n    componentDidMount() {\n        console.log('ChatDetails.componentDidMount');\n        this.loadContent();\n\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n        UserStore.on('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.on('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.on('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n    }\n\n    componentWillUnmount() {\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n        UserStore.removeListener('updateUserFullInfo', this.onUpdateUserFullInfo);\n        BasicGroupStore.removeListener('updateBasicGroupFullInfo', this.onUpdateBasicGroupFullInfo);\n        SupergroupStore.removeListener('updateSupergroupFullInfo', this.onUpdateSupergroupFullInfo);\n    }\n\n    onUpdateBasicGroupFullInfo = update => {\n        const chat = ChatStore.get(this.props.chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeBasicGroup' &&\n            chat.type.basic_group_id === update.basic_group_id\n        ) {\n            this.forceUpdate(); // update bio\n        }\n    };\n\n    onUpdateSupergroupFullInfo = update => {\n        const chat = ChatStore.get(this.props.chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            chat.type['@type'] === 'chatTypeSupergroup' &&\n            chat.type.supergroup_id === update.supergroup_id\n        ) {\n            this.forceUpdate(); // update bio\n        }\n    };\n\n    onUpdateUserFullInfo = update => {\n        const chat = ChatStore.get(this.props.chatId);\n        if (!chat) return;\n\n        if (\n            chat.type &&\n            (chat.type['@type'] === 'chatTypePrivate' || chat.type['@type'] === 'chatTypeSecret') &&\n            chat.type.user_id === update.user_id\n        ) {\n            this.forceUpdate(); // update bio\n        }\n    };\n\n    onUpdateUserStatus = update => {\n        if (this.members.has(update.user_id)) {\n            this.forceUpdate();\n        }\n    };\n\n    loadContent = () => {\n        this.loadChatContents();\n    };\n\n    loadChatContents = () => {\n        const { chatId, popup } = this.props;\n\n        const store = FileStore.getStore();\n\n        loadChatsContent(store, [chatId]);\n        const members = getGroupChatMembers(chatId).map(x => x.user_id);\n        loadUsersContent(store, members);\n\n        if (popup) {\n            getChatFullInfo(chatId);\n        }\n    };\n\n    handleUsernameHint = () => {\n        const { t, chatId } = this.props;\n        const username = getChatUsername(chatId);\n        if (!username) return;\n\n        const telegramUrlOption = OptionStore.get('t_me_url');\n        const usernameLink = telegramUrlOption ? telegramUrlOption.value : 'https://telegram.org/';\n\n        copy(usernameLink + username);\n\n        const key = `${chatId}_copy_username`;\n        const message = t('TextCopied');\n        const action = null;\n\n        this.handleScheduledAction(key, message, action);\n    };\n\n    handleScheduledAction = (key, message, action) => {\n        if (!key) return;\n\n        const { enqueueSnackbar, classes } = this.props;\n        if (!enqueueSnackbar) return;\n\n        const TRANSITION_DELAY = 150;\n        if (\n            ApplicationStore.addScheduledAction(key, NOTIFICATION_AUTO_HIDE_DURATION_MS + 2 * TRANSITION_DELAY, action)\n        ) {\n            enqueueSnackbar(message, {\n                autoHideDuration: NOTIFICATION_AUTO_HIDE_DURATION_MS,\n                action: [\n                    <IconButton\n                        key='close'\n                        aria-label='Close'\n                        color='inherit'\n                        className={classes.close}\n                        onClick={() => ApplicationStore.removeScheduledAction(key)}>\n                        <CloseIcon />\n                    </IconButton>\n                ]\n            });\n        }\n    };\n\n    handlePhoneHint = () => {\n        const { t, chatId } = this.props;\n        const phoneNumber = getChatPhoneNumber(chatId);\n        if (!phoneNumber) return;\n\n        copy(formatPhoneNumber(phoneNumber));\n\n        const key = `${chatId}_copy_phone`;\n        const message = t('PhoneCopied');\n        const action = null;\n\n        this.handleScheduledAction(key, message, action);\n    };\n\n    handleHeaderClick = () => {\n        this.chatDetailsListRef.current.scrollTop = 0;\n    };\n\n    handleOpenViewer = () => {\n        const { chatId, popup } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n        if (!chat.photo) return;\n\n        setProfileMediaViewerContent({ chatId: chatId });\n\n        if (popup) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateDialogChatId',\n                chatId: 0\n            });\n        }\n    };\n\n    handleOpenChat = () => {\n        const { chatId, popup } = this.props;\n\n        openChat(chatId, null, false);\n\n        if (popup) {\n            TdLibController.clientUpdate({\n                '@type': 'clientUpdateDialogChatId',\n                chatId: 0\n            });\n        }\n    };\n\n    handleOpenUser = userId => {\n        openUser(userId, true);\n    };\n\n    getContentHeight = () => {\n        if (!this.chatDetailsListRef) return 0;\n\n        return this.chatDetailsListRef.current.clientHeight;\n    };\n\n    render() {\n        const {\n            backButton,\n            className,\n            chatId,\n            classes,\n            onClose,\n            onOpenGroupInCommon,\n            onOpenSharedAudios,\n            onOpenSharedDocuments,\n            onOpenSharedLinks,\n            onOpenSharedMedia,\n            onOpenSharedPhotos,\n            onOpenSharedVideos,\n            onOpenSharedVoiceNotes,\n            popup,\n            t\n        } = this.props;\n\n        let { counters, migratedCounters } = this.props;\n        counters = counters || [0, 0, 0, 0, 0, 0];\n        migratedCounters = migratedCounters || [0, 0, 0, 0, 0, 0];\n        console.log('ChatDetails.render counters', counters, migratedCounters);\n\n        const [photoCount, videoCount, documentCount, audioCount, urlCount, voiceAndVideoNoteCount] = counters.map(\n            (el, i) => el + migratedCounters[i]\n        );\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) {\n            return (\n                <div className='chat-details'>\n                    <ChatDetailsHeader onClose={onClose} />\n                    <div ref={this.chatDetailsListRef} className='chat-details-list' />\n                </div>\n            );\n        }\n\n        let groupInCommonCount = 0;\n        if (isPrivateChat(chatId)) {\n            const fullInfo = UserStore.getFullInfo(chat.type.user_id);\n            groupInCommonCount = fullInfo ? fullInfo.group_in_common_count : groupInCommonCount;\n        }\n\n        const username = getChatUsername(chatId);\n        const phoneNumber = getChatPhoneNumber(chatId);\n        const bio = getChatBio(chatId);\n        const isGroup = isGroupChat(chatId);\n        const isMe = isMeChat(chatId);\n\n        const members = getGroupChatMembers(chatId);\n        const users = [];\n        this.members = new Map();\n        members.forEach(member => {\n            const user = UserStore.get(member.user_id);\n            if (user) {\n                this.members.set(user.id, user.id);\n                users.push(user);\n            }\n        });\n\n        const sortedUsers = users.sort((x, y) => {\n            return getUserStatusOrder(y) - getUserStatusOrder(x);\n        });\n        const items = sortedUsers.map(user => (\n            <ListItem button className={classes.listItem} key={user.id}>\n                <UserControl userId={user.id} onSelect={this.handleOpenUser} />\n            </ListItem>\n        ));\n\n        const { photo } = chat;\n\n        const content = (\n            <>\n                <ChatDetailsHeader\n                    chatId={chatId}\n                    backButton={backButton}\n                    onClose={onClose}\n                    onClick={this.handleHeaderClick}\n                />\n                <div ref={this.chatDetailsListRef} className='chat-details-list'>\n                    <div className='chat-details-info'>\n                        <ChatControl\n                            chatId={chatId}\n                            showStatus={popup}\n                            showSavedMessages={!popup}\n                            onTileSelect={photo ? this.handleOpenViewer : null}\n                        />\n                    </div>\n                    {(username || phoneNumber || bio) && (\n                        <>\n                            <List>\n                                {username && (\n                                    <ListItem button className={classes.listItem} onClick={this.handleUsernameHint}>\n                                        <ListItemIcon>\n                                            <AlternateEmailIcon />\n                                        </ListItemIcon>\n                                        <ListItemText\n                                            primary={\n                                                <Typography variant='inherit' noWrap>\n                                                    {username}\n                                                </Typography>\n                                            }\n                                        />\n                                    </ListItem>\n                                )}\n                                {phoneNumber && (\n                                    <>\n                                        <ListItem button className={classes.listItem} onClick={this.handlePhoneHint}>\n                                            <ListItemIcon>\n                                                <CallIcon />\n                                            </ListItemIcon>\n                                            <ListItemText\n                                                primary={\n                                                    <Typography variant='inherit' noWrap>\n                                                        {formatPhoneNumber(phoneNumber)}\n                                                    </Typography>\n                                                }\n                                            />\n                                        </ListItem>\n                                    </>\n                                )}\n                                {bio && (\n                                    <ListItem className={classes.listItem}>\n                                        <ListItemIcon>\n                                            <ErrorOutlineIcon className='chat-details-info-icon' />\n                                        </ListItemIcon>\n                                        <ListItemText\n                                            primary={bio}\n                                            style={{ whiteSpace: 'pre-wrap', wordWrap: 'break-word' }}\n                                        />\n                                    </ListItem>\n                                )}\n                            </List>\n                        </>\n                    )}\n                    {(!isMe || isGroup || (popup && !isGroup)) && (\n                        <>\n                            <Divider />\n                            <List>\n                                {!isMe && <NotificationsListItem chatId={chatId} />}\n                                {isGroup && <MoreListItem chatId={chatId} />}\n                                {popup && !isGroup && (\n                                    <ListItem button className={classes.listItem} onClick={this.handleOpenChat}>\n                                        <ListItemText\n                                            inset\n                                            primary={\n                                                <Typography color='primary' variant='inherit' noWrap>\n                                                    {t('SendMessage').toUpperCase()}\n                                                </Typography>\n                                            }\n                                        />\n                                    </ListItem>\n                                )}\n                            </List>\n                        </>\n                    )}\n                    {(photoCount > 0 ||\n                        videoCount > 0 ||\n                        documentCount > 0 ||\n                        audioCount > 0 ||\n                        urlCount > 0 ||\n                        voiceAndVideoNoteCount > 0 ||\n                        groupInCommonCount > 0) && (\n                        <>\n                            <Divider />\n                            <List>\n                                {photoCount > 0 && (\n                                    <ListItem button className={classes.listItem} onClick={onOpenSharedPhotos}>\n                                        <ListItemIcon>\n                                            <PhotoIcon />\n                                        </ListItemIcon>\n                                        <ListItemText\n                                            primary={\n                                                <Typography variant='inherit' noWrap>\n                                                    {photoCount === 1 ? '1 photo' : `${photoCount} photos`}\n                                                </Typography>\n                                            }\n                                        />\n                                    </ListItem>\n                                )}\n                                {videoCount > 0 && (\n                                    <ListItem button className={classes.listItem} onClick={onOpenSharedVideos}>\n                                        <ListItemIcon>\n                                            <VideocamIcon />\n                                        </ListItemIcon>\n                                        <ListItemText\n                                            primary={\n                                                <Typography variant='inherit' noWrap>\n                                                    {videoCount === 1 ? '1 video' : `${videoCount} videos`}\n                                                </Typography>\n                                            }\n                                        />\n                                    </ListItem>\n                                )}\n                                {documentCount > 0 && (\n                                    <ListItem button className={classes.listItem} onClick={onOpenSharedDocuments}>\n                                        <ListItemIcon>\n                                            <InsertDriveFileIcon />\n                                        </ListItemIcon>\n                                        <ListItemText\n                                            primary={\n                                                <Typography variant='inherit' noWrap>\n                                                    {documentCount === 1 ? '1 file' : `${documentCount} files`}\n                                                </Typography>\n                                            }\n                                        />\n                                    </ListItem>\n                                )}\n                                {audioCount > 0 && (\n                                    <ListItem button className={classes.listItem} onClick={onOpenSharedAudios}>\n                                        <ListItemIcon>\n                                            <HeadsetIcon />\n                                        </ListItemIcon>\n                                        <ListItemText\n                                            primary={\n                                                <Typography variant='inherit' noWrap>\n                                                    {audioCount === 1 ? '1 audio file' : `${audioCount} audio files`}\n                                                </Typography>\n                                            }\n                                        />\n                                    </ListItem>\n                                )}\n                                {urlCount > 0 && (\n                                    <ListItem button className={classes.listItem} onClick={onOpenSharedLinks}>\n                                        <ListItemIcon>\n                                            <InsertLinkIcon />\n                                        </ListItemIcon>\n                                        <ListItemText\n                                            primary={\n                                                <Typography variant='inherit' noWrap>\n                                                    {urlCount === 1 ? '1 shared link' : `${urlCount} shared links`}\n                                                </Typography>\n                                            }\n                                        />\n                                    </ListItem>\n                                )}\n                                {voiceAndVideoNoteCount > 0 && (\n                                    <ListItem button className={classes.listItem} onClick={onOpenSharedVoiceNotes}>\n                                        <ListItemIcon>\n                                            <MicIcon />\n                                        </ListItemIcon>\n                                        <ListItemText\n                                            primary={\n                                                <Typography variant='inherit' noWrap>\n                                                    {voiceAndVideoNoteCount === 1\n                                                        ? '1 voice message'\n                                                        : `${voiceAndVideoNoteCount} voice messages`}\n                                                </Typography>\n                                            }\n                                        />\n                                    </ListItem>\n                                )}\n                                {groupInCommonCount > 0 && (\n                                    <ListItem button className={classes.listItem} onClick={onOpenGroupInCommon}>\n                                        <ListItemIcon>\n                                            <GroupIcon />\n                                        </ListItemIcon>\n                                        <ListItemText\n                                            inset\n                                            primary={\n                                                <Typography variant='inherit' noWrap>\n                                                    {groupInCommonCount === 1\n                                                        ? '1 group in common'\n                                                        : `${groupInCommonCount} groups in common`}\n                                                </Typography>\n                                            }\n                                        />\n                                    </ListItem>\n                                )}\n                            </List>\n                        </>\n                    )}\n                    {items.length > 0 && (\n                        <>\n                            <Divider />\n                            <List>{items}</List>\n                        </>\n                    )}\n                </div>\n            </>\n        );\n\n        return popup ? <>{content}</> : <div className={classNames('chat-details', className)}>{content}</div>;\n    }\n}\n\nChatDetails.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    popup: PropTypes.bool,\n    onClose: PropTypes.func,\n    onOpenGroupInCommon: PropTypes.func,\n    onOpenSharedDocuments: PropTypes.func,\n    onOpenSharedMedia: PropTypes.func,\n    onOpenSharedLinks: PropTypes.func,\n    onOpenSharedPhotos: PropTypes.func,\n    onOpenSharedVideos: PropTypes.func,\n    onOpenSharedVoiceNotes: PropTypes.func\n};\n\nconst enhance = compose(\n    withSaveRef(),\n    withTranslation(),\n    withStyles(styles, { withTheme: true }),\n    withSnackbar,\n    withRestoreRef()\n);\n\nexport default enhance(ChatDetails);\n"]},"metadata":{},"sourceType":"module"}
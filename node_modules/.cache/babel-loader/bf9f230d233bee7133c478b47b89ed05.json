{"ast":null,"code":"/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { TYPING_OUTPUT_INTERVAL_S } from '../Constants';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass OutputTypingManager {\n  constructor(chatId) {\n    this.chatId = chatId;\n    this.lastAction = null;\n  }\n\n  setTyping(action) {\n    if (!this.chatId) return;\n\n    if (this.lastAction && this.lastAction['@type'] === action['@type']) {\n      let now = new Date();\n      now.setSeconds(now.getSeconds() - TYPING_OUTPUT_INTERVAL_S);\n\n      if (this.lastTypingDate && this.lastTypingDate > now) {\n        return;\n      }\n    }\n\n    this.lastAction = action;\n    this.lastTypingDate = new Date();\n    TdLibController.send({\n      '@type': 'sendChatAction',\n      chat_id: this.chatId,\n      action: action\n    });\n  }\n\n}\n\nexport default OutputTypingManager;","map":{"version":3,"sources":["/home/me-admin/Downloads/my-app/src/Utils/OutputTypingManager.js"],"names":["TYPING_OUTPUT_INTERVAL_S","TdLibController","OutputTypingManager","constructor","chatId","lastAction","setTyping","action","now","Date","setSeconds","getSeconds","lastTypingDate","send","chat_id"],"mappings":"AAAA;;;;;;AAOA,SAASA,wBAAT,QAAyC,cAAzC;AACA,OAAOC,eAAP,MAA4B,gCAA5B;;AAEA,MAAMC,mBAAN,CAA0B;AACtBC,EAAAA,WAAW,CAACC,MAAD,EAAS;AAChB,SAAKA,MAAL,GAAcA,MAAd;AACA,SAAKC,UAAL,GAAkB,IAAlB;AACH;;AAEDC,EAAAA,SAAS,CAACC,MAAD,EAAS;AACd,QAAI,CAAC,KAAKH,MAAV,EAAkB;;AAElB,QAAI,KAAKC,UAAL,IAAmB,KAAKA,UAAL,CAAgB,OAAhB,MAA6BE,MAAM,CAAC,OAAD,CAA1D,EAAqE;AACjE,UAAIC,GAAG,GAAG,IAAIC,IAAJ,EAAV;AACAD,MAAAA,GAAG,CAACE,UAAJ,CAAeF,GAAG,CAACG,UAAJ,KAAmBX,wBAAlC;;AACA,UAAI,KAAKY,cAAL,IAAuB,KAAKA,cAAL,GAAsBJ,GAAjD,EAAsD;AAClD;AACH;AACJ;;AAED,SAAKH,UAAL,GAAkBE,MAAlB;AACA,SAAKK,cAAL,GAAsB,IAAIH,IAAJ,EAAtB;AAEAR,IAAAA,eAAe,CAACY,IAAhB,CAAqB;AACjB,eAAS,gBADQ;AAEjBC,MAAAA,OAAO,EAAE,KAAKV,MAFG;AAGjBG,MAAAA,MAAM,EAAEA;AAHS,KAArB;AAKH;;AAzBqB;;AA4B1B,eAAeL,mBAAf","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { TYPING_OUTPUT_INTERVAL_S } from '../Constants';\nimport TdLibController from '../Controllers/TdLibController';\n\nclass OutputTypingManager {\n    constructor(chatId) {\n        this.chatId = chatId;\n        this.lastAction = null;\n    }\n\n    setTyping(action) {\n        if (!this.chatId) return;\n\n        if (this.lastAction && this.lastAction['@type'] === action['@type']) {\n            let now = new Date();\n            now.setSeconds(now.getSeconds() - TYPING_OUTPUT_INTERVAL_S);\n            if (this.lastTypingDate && this.lastTypingDate > now) {\n                return;\n            }\n        }\n\n        this.lastAction = action;\n        this.lastTypingDate = new Date();\n\n        TdLibController.send({\n            '@type': 'sendChatAction',\n            chat_id: this.chatId,\n            action: action\n        });\n    }\n}\n\nexport default OutputTypingManager;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import classNames from'classnames';import withStyles from'@material-ui/core/styles/withStyles';import{getDownloadedSize,getUploadedSize,getFileSize}from'../../../Utils/File';import{getDurationString}from'../../../Utils/Common';import FileStore from'../../../Stores/FileStore';import PlayerStore from'../../../Stores/PlayerStore';import'./AudioAction.css';var styles=function styles(theme){return{audioAction:{color:theme.palette.text.secondary}};};var AudioAction=/*#__PURE__*/function(_React$Component){_inherits(AudioAction,_React$Component);function AudioAction(props){var _this;_classCallCheck(this,AudioAction);_this=_possibleConstructorReturn(this,_getPrototypeOf(AudioAction).call(this,props));_this.onClientUpdateMediaEnd=function(update){var _this$props=_this.props,chatId=_this$props.chatId,messageId=_this$props.messageId,duration=_this$props.duration;var _this$state=_this.state,active=_this$state.active,file=_this$state.file;if(chatId===update.chatId&&messageId===update.messageId){_this.setState({active:false,currentTime:0,timeString:_this.getTimeString(0,duration,false,file)});}};_this.onClientUpdateMediaTime=function(update){var _this$props2=_this.props,chatId=_this$props2.chatId,messageId=_this$props2.messageId,duration=_this$props2.duration;var _this$state2=_this.state,active=_this$state2.active,file=_this$state2.file;if(chatId===update.chatId&&messageId===update.messageId){_this.setState({currentTime:update.currentTime,duration:update.duration||duration,timeString:_this.getTimeString(update.currentTime,update.duration||duration,active,file)});}};_this.onClientUpdateMediaActive=function(update){var _this$props3=_this.props,chatId=_this$props3.chatId,messageId=_this$props3.messageId,duration=_this$props3.duration;var _this$state3=_this.state,active=_this$state3.active,currentTime=_this$state3.currentTime,file=_this$state3.file;if(chatId===update.chatId&&messageId===update.messageId){_this.setState({active:true,currentTime:active?currentTime:0,timeString:_this.getTimeString(active?currentTime:0,duration,true,file)});}else if(active){_this.setState({active:false,currentTime:0,timeString:_this.getTimeString(0,duration,false,file)});}};_this.onUpdateFile=function(update){var currentFile=_this.state.file;var nextFile=update.file;if(currentFile&&currentFile.id===nextFile.id){_this.setState({file:nextFile,prevFile:currentFile});}};_this.getTimeString=function(currentTime,duration,active,file){var isDownloadingCompleted=file.local&&file.local.is_downloading_completed;var isUploadingCompleted=file.remote&&file.remote.is_uploading_completed;var durationString=getDurationString(Math.floor(duration||0));var currentTimeString=getDurationString(Math.floor(currentTime||0));return active&&isDownloadingCompleted?\"\".concat(currentTimeString,\"/\").concat(durationString):\"\".concat(durationString);};var message=PlayerStore.message,time=PlayerStore.time;var _this$props4=_this.props,_chatId=_this$props4.chatId,_messageId=_this$props4.messageId,_duration=_this$props4.duration,_file=_this$props4.file;var _active=message&&message.chat_id===_chatId&&message.id===_messageId;var _currentTime=_active&&time?time.currentTime:0;var audioDuration=_active&&time&&time.duration?time.duration:_duration;var _currentFile=FileStore.get(_file.id)||_file;_this.state={active:_active,currentTime:_currentTime,duration:audioDuration,timeString:_this.getTimeString(_currentTime,_duration,_active,_currentFile),prevFile:null,file:_currentFile};return _this;}_createClass(AudioAction,[{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps,nextState){var theme=this.props.theme;var _this$state4=this.state,active=_this$state4.active,timeString=_this$state4.timeString,file=_this$state4.file,prevFile=_this$state4.prevFile;if(nextProps.theme!==theme){return true;}if(nextState.timeString!==timeString){return true;}if(nextState.active!==active){return true;}if(nextState.file!==file){return true;}if(nextState.prevFile!==prevFile){return true;}return false;}},{key:\"componentDidMount\",value:function componentDidMount(){FileStore.on('updateFile',this.onUpdateFile);PlayerStore.on('clientUpdateMediaActive',this.onClientUpdateMediaActive);PlayerStore.on('clientUpdateMediaTime',this.onClientUpdateMediaTime);PlayerStore.on('clientUpdateMediaEnd',this.onClientUpdateMediaEnd);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){FileStore.removeListener('updateFile',this.onUpdateFile);PlayerStore.removeListener('clientUpdateMediaActive',this.onClientUpdateMediaActive);PlayerStore.removeListener('clientUpdateMediaTime',this.onClientUpdateMediaTime);PlayerStore.removeListener('clientUpdateMediaEnd',this.onClientUpdateMediaEnd);}},{key:\"render\",value:function render(){var _this$props5=this.props,classes=_this$props5.classes,title=_this$props5.title;var _this$state5=this.state,active=_this$state5.active,file=_this$state5.file,timeString=_this$state5.timeString;if(!file)return null;var isDownloadingActive=file.local&&file.local.is_downloading_active;var isUploadingActive=file.remote&&file.remote.is_uploading_active;var isDownloadingCompleted=file.local&&file.local.is_downloading_completed;var isUploadingCompleted=file.remote&&file.remote.is_uploading_completed;var size=getFileSize(file);var progressSize=null;if(isDownloadingActive){progressSize=getDownloadedSize(file);}else if(isUploadingActive){progressSize=getUploadedSize(file);}var sizeString=progressSize?\"\".concat(progressSize,\"/\").concat(size):\"\".concat(size);return React.createElement(\"div\",{className:classNames('audio-action',classes.audioAction)},!active&&React.createElement(\"span\",null,title),!isDownloadingCompleted&&React.createElement(\"span\",null,\"\".concat(sizeString,\", \")),React.createElement(\"span\",null,timeString));}}]);return AudioAction;}(React.Component);export default withStyles(styles,{withTheme:true})(AudioAction);","map":{"version":3,"sources":["/home/me-admin/Downloads/my-app/src/Components/Message/Media/AudioAction.js"],"names":["React","classNames","withStyles","getDownloadedSize","getUploadedSize","getFileSize","getDurationString","FileStore","PlayerStore","styles","theme","audioAction","color","palette","text","secondary","AudioAction","props","onClientUpdateMediaEnd","update","chatId","messageId","duration","state","active","file","setState","currentTime","timeString","getTimeString","onClientUpdateMediaTime","onClientUpdateMediaActive","onUpdateFile","currentFile","nextFile","id","prevFile","isDownloadingCompleted","local","is_downloading_completed","isUploadingCompleted","remote","is_uploading_completed","durationString","Math","floor","currentTimeString","message","time","chat_id","audioDuration","get","nextProps","nextState","on","removeListener","classes","title","isDownloadingActive","is_downloading_active","isUploadingActive","is_uploading_active","size","progressSize","sizeString","Component","withTheme"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { getDownloadedSize, getUploadedSize, getFileSize } from '../../../Utils/File';\nimport { getDurationString } from '../../../Utils/Common';\nimport FileStore from '../../../Stores/FileStore';\nimport PlayerStore from '../../../Stores/PlayerStore';\nimport './AudioAction.css';\n\nconst styles = theme => ({\n    audioAction: {\n        color: theme.palette.text.secondary\n    }\n});\n\nclass AudioAction extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { message, time } = PlayerStore;\n        const { chatId, messageId, duration, file } = this.props;\n\n        const active = message && message.chat_id === chatId && message.id === messageId;\n        const currentTime = active && time ? time.currentTime : 0;\n        const audioDuration = active && time && time.duration ? time.duration : duration;\n        const currentFile = FileStore.get(file.id) || file;\n\n        this.state = {\n            active: active,\n            currentTime: currentTime,\n            duration: audioDuration,\n            timeString: this.getTimeString(currentTime, duration, active, currentFile),\n\n            prevFile: null,\n            file: currentFile\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        const { theme } = this.props;\n        const { active, timeString, file, prevFile } = this.state;\n\n        if (nextProps.theme !== theme) {\n            return true;\n        }\n\n        if (nextState.timeString !== timeString) {\n            return true;\n        }\n\n        if (nextState.active !== active) {\n            return true;\n        }\n\n        if (nextState.file !== file) {\n            return true;\n        }\n\n        if (nextState.prevFile !== prevFile) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        FileStore.on('updateFile', this.onUpdateFile);\n\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('updateFile', this.onUpdateFile);\n\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaTime', this.onClientUpdateMediaTime);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    onClientUpdateMediaEnd = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active, file } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                timeString: this.getTimeString(0, duration, false, file)\n            });\n        }\n    };\n\n    onClientUpdateMediaTime = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active, file } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                currentTime: update.currentTime,\n                duration: update.duration || duration,\n                timeString: this.getTimeString(update.currentTime, update.duration || duration, active, file)\n            });\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId, duration } = this.props;\n        const { active, currentTime, file } = this.state;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: true,\n                currentTime: active ? currentTime : 0,\n                timeString: this.getTimeString(active ? currentTime : 0, duration, true, file)\n            });\n        } else if (active) {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                timeString: this.getTimeString(0, duration, false, file)\n            });\n        }\n    };\n\n    onUpdateFile = update => {\n        const currentFile = this.state.file;\n        const nextFile = update.file;\n\n        if (currentFile && currentFile.id === nextFile.id) {\n            this.setState({ file: nextFile, prevFile: currentFile });\n        }\n    };\n\n    getTimeString = (currentTime, duration, active, file) => {\n        const isDownloadingCompleted = file.local && file.local.is_downloading_completed;\n        const isUploadingCompleted = file.remote && file.remote.is_uploading_completed;\n\n        const durationString = getDurationString(Math.floor(duration || 0));\n        const currentTimeString = getDurationString(Math.floor(currentTime || 0));\n\n        return active && isDownloadingCompleted ? `${currentTimeString}/${durationString}` : `${durationString}`;\n    };\n\n    render() {\n        const { classes, title } = this.props;\n        const { active, file, timeString } = this.state;\n        if (!file) return null;\n\n        const isDownloadingActive = file.local && file.local.is_downloading_active;\n        const isUploadingActive = file.remote && file.remote.is_uploading_active;\n        const isDownloadingCompleted = file.local && file.local.is_downloading_completed;\n        const isUploadingCompleted = file.remote && file.remote.is_uploading_completed;\n\n        const size = getFileSize(file);\n        let progressSize = null;\n        if (isDownloadingActive) {\n            progressSize = getDownloadedSize(file);\n        } else if (isUploadingActive) {\n            progressSize = getUploadedSize(file);\n        }\n        const sizeString = progressSize ? `${progressSize}/${size}` : `${size}`;\n\n        return (\n            <div className={classNames('audio-action', classes.audioAction)}>\n                {!active && <span>{title}</span>}\n                {!isDownloadingCompleted && <span>{`${sizeString}, `}</span>}\n                <span>{timeString}</span>\n            </div>\n        );\n    }\n}\n\nAudioAction.propTypes = {\n    chatId: PropTypes.number,\n    messageId: PropTypes.number,\n    duration: PropTypes.number.isRequired,\n    file: PropTypes.object.isRequired,\n\n    title: PropTypes.string\n};\n\nexport default withStyles(styles, { withTheme: true })(AudioAction);\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import{compose}from'recompose';import{withTranslation}from'react-i18next';import List from'@material-ui/core/List';import ListItem from'@material-ui/core/ListItem';import ListItemIcon from'@material-ui/core/ListItemIcon';import MoreHorizIcon from'@material-ui/icons/MoreHoriz';import ListItemText from'@material-ui/core/ListItemText';import ExpandLess from'@material-ui/icons/ExpandLess';import ExpandMore from'@material-ui/icons/ExpandMore';import Collapse from'@material-ui/core/Collapse';import Typography from'@material-ui/core/Typography';import withStyles from'@material-ui/core/styles/withStyles';import{isUserBlocked}from'../../Utils/User';import{isChannelChat,isChatMember,isGroupChat}from'../../Utils/Chat';import ChatStore from'../../Stores/ChatStore';import TdLibController from'../../Controllers/TdLibController';import ApplicationStore from'../../Stores/ApplicationStore';var styles={listItem:{padding:'11px 22px'}};var MoreListItem=/*#__PURE__*/function(_React$Component){_inherits(MoreListItem,_React$Component);function MoreListItem(props){var _this;_classCallCheck(this,MoreListItem);_this=_possibleConstructorReturn(this,_getPrototypeOf(MoreListItem).call(this,props));_this.handleMoreClick=function(){_this.setState({openMore:!_this.state.openMore});};_this.handleSendMessage=function(){var currentChatId=ApplicationStore.getChatId();var chatId=_this.props.chatId;if(currentChatId===chatId){//this.dialogDetails.current.scrollToBottom();\n}else{TdLibController.setChatId(chatId);}};_this.handleBlock=function(){var chatId=_this.state.chatId;var chat=ChatStore.get(chatId);if(!chat)return;if(!chat.type)return;var user_id=chat.type.user_id;if(!user_id)return;TdLibController.send({'@type':isUserBlocked(user_id)?'unblockUser':'blockUser',user_id:user_id});};var _chatId=_this.props.chatId;_this.state={prevChatId:_chatId,openMore:false};return _this;}_createClass(MoreListItem,[{key:\"render\",value:function render(){var _this$props=this.props,t=_this$props.t,chatId=_this$props.chatId,classes=_this$props.classes;var openMore=this.state.openMore;var chat=ChatStore.get(chatId);if(!chat)return null;var isGroup=isGroupChat(chatId);var isBlocked=false;if(!isGroup&&chat.type){isBlocked=isUserBlocked(chat.type.user_id);}var isMember=isChatMember(chatId);var isChannel=isChannelChat(chatId);return React.createElement(React.Fragment,null,React.createElement(ListItem,{button:true,className:classes.listItem,onClick:this.handleMoreClick},React.createElement(ListItemIcon,null,React.createElement(MoreHorizIcon,null)),React.createElement(ListItemText,{primary:React.createElement(Typography,{variant:\"inherit\",noWrap:true},t('More'))}),openMore?React.createElement(ExpandLess,null):React.createElement(ExpandMore,null)),React.createElement(Collapse,{in:openMore,timeout:\"auto\",unmountOnExit:true},React.createElement(List,{component:\"div\",disablePadding:true},!isGroup&&React.createElement(React.Fragment,null,React.createElement(ListItem,{button:true,className:classes.listItem,onClick:this.handleSendMessage},React.createElement(ListItemText,{inset:true,primary:React.createElement(Typography,{variant:\"inherit\",noWrap:true},t('SendMessage'))})),React.createElement(ListItem,{button:true,className:classes.listItem,onClick:this.handleBlock},React.createElement(ListItemText,{inset:true,primary:React.createElement(Typography,{color:\"secondary\",variant:\"inherit\",noWrap:true},isBlocked?t('Unblock'):t('BlockContact'))}))),isGroup&&isMember&&React.createElement(ListItem,{button:true,className:classes.listItem},React.createElement(ListItemText,{inset:true,primary:React.createElement(Typography,{color:\"secondary\",variant:\"inherit\",noWrap:true},isChannel?t('LeaveChannel'):t('DeleteChat'))})),isGroup&&!isMember&&React.createElement(ListItem,{button:true,className:classes.listItem},React.createElement(ListItemText,{inset:true,primary:React.createElement(Typography,{color:\"secondary\",variant:\"inherit\",noWrap:true},t('ReportChat'))})))));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.chatId!==state.prevChatId){return{prevChatId:props.chatId,openMore:false};}return null;}}]);return MoreListItem;}(React.Component);var enhance=compose(withTranslation(),withStyles(styles,{withTheme:true}));export default enhance(MoreListItem);","map":{"version":3,"sources":["/home/me-admin/Downloads/my-app/src/Components/ColumnRight/MoreListItem.js"],"names":["React","compose","withTranslation","List","ListItem","ListItemIcon","MoreHorizIcon","ListItemText","ExpandLess","ExpandMore","Collapse","Typography","withStyles","isUserBlocked","isChannelChat","isChatMember","isGroupChat","ChatStore","TdLibController","ApplicationStore","styles","listItem","padding","MoreListItem","props","handleMoreClick","setState","openMore","state","handleSendMessage","currentChatId","getChatId","chatId","setChatId","handleBlock","chat","get","type","user_id","send","prevChatId","t","classes","isGroup","isBlocked","isMember","isChannel","Component","enhance","withTheme"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport { compose } from 'recompose';\nimport { withTranslation } from 'react-i18next';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport MoreHorizIcon from '@material-ui/icons/MoreHoriz';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ExpandLess from '@material-ui/icons/ExpandLess';\nimport ExpandMore from '@material-ui/icons/ExpandMore';\nimport Collapse from '@material-ui/core/Collapse';\nimport Typography from '@material-ui/core/Typography';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { isUserBlocked } from '../../Utils/User';\nimport { isChannelChat, isChatMember, isGroupChat } from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport ApplicationStore from '../../Stores/ApplicationStore';\n\nconst styles = {\n    listItem: {\n        padding: '11px 22px'\n    }\n};\n\nclass MoreListItem extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId } = this.props;\n        this.state = {\n            prevChatId: chatId,\n            openMore: false\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        if (props.chatId !== state.prevChatId) {\n            return {\n                prevChatId: props.chatId,\n                openMore: false\n            };\n        }\n\n        return null;\n    }\n\n    handleMoreClick = () => {\n        this.setState({ openMore: !this.state.openMore });\n    };\n\n    handleSendMessage = () => {\n        const currentChatId = ApplicationStore.getChatId();\n        const { chatId } = this.props;\n        if (currentChatId === chatId) {\n            //this.dialogDetails.current.scrollToBottom();\n        } else {\n            TdLibController.setChatId(chatId);\n        }\n    };\n\n    handleBlock = () => {\n        const { chatId } = this.state;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return;\n        if (!chat.type) return;\n\n        const { user_id } = chat.type;\n        if (!user_id) return;\n\n        TdLibController.send({\n            '@type': isUserBlocked(user_id) ? 'unblockUser' : 'blockUser',\n            user_id: user_id\n        });\n    };\n\n    render() {\n        const { t, chatId, classes } = this.props;\n        const { openMore } = this.state;\n\n        const chat = ChatStore.get(chatId);\n        if (!chat) return null;\n\n        const isGroup = isGroupChat(chatId);\n        let isBlocked = false;\n        if (!isGroup && chat.type) {\n            isBlocked = isUserBlocked(chat.type.user_id);\n        }\n        const isMember = isChatMember(chatId);\n        const isChannel = isChannelChat(chatId);\n\n        return (\n            <>\n                <ListItem button className={classes.listItem} onClick={this.handleMoreClick}>\n                    <ListItemIcon>\n                        <MoreHorizIcon />\n                    </ListItemIcon>\n                    <ListItemText\n                        primary={\n                            <Typography variant='inherit' noWrap>\n                                {t('More')}\n                            </Typography>\n                        }\n                    />\n                    {openMore ? <ExpandLess /> : <ExpandMore />}\n                </ListItem>\n                <Collapse in={openMore} timeout='auto' unmountOnExit>\n                    <List component='div' disablePadding>\n                        {!isGroup && (\n                            <>\n                                <ListItem button className={classes.listItem} onClick={this.handleSendMessage}>\n                                    <ListItemText\n                                        inset\n                                        primary={\n                                            <Typography variant='inherit' noWrap>\n                                                {t('SendMessage')}\n                                            </Typography>\n                                        }\n                                    />\n                                </ListItem>\n                                <ListItem button className={classes.listItem} onClick={this.handleBlock}>\n                                    <ListItemText\n                                        inset\n                                        primary={\n                                            <Typography color='secondary' variant='inherit' noWrap>\n                                                {isBlocked ? t('Unblock') : t('BlockContact')}\n                                            </Typography>\n                                        }\n                                    />\n                                </ListItem>\n                            </>\n                        )}\n                        {isGroup && isMember && (\n                            <ListItem button className={classes.listItem}>\n                                <ListItemText\n                                    inset\n                                    primary={\n                                        <Typography color='secondary' variant='inherit' noWrap>\n                                            {isChannel ? t('LeaveChannel') : t('DeleteChat')}\n                                        </Typography>\n                                    }\n                                />\n                            </ListItem>\n                        )}\n                        {isGroup && !isMember && (\n                            <ListItem button className={classes.listItem}>\n                                <ListItemText\n                                    inset\n                                    primary={\n                                        <Typography color='secondary' variant='inherit' noWrap>\n                                            {t('ReportChat')}\n                                        </Typography>\n                                    }\n                                />\n                            </ListItem>\n                        )}\n                    </List>\n                </Collapse>\n            </>\n        );\n    }\n}\n\nconst enhance = compose(\n    withTranslation(),\n    withStyles(styles, { withTheme: true })\n);\n\nexport default enhance(MoreListItem);\n"]},"metadata":{},"sourceType":"module"}
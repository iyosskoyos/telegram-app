{"ast":null,"code":"import _regeneratorRuntime from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/inherits\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import{compose}from'recompose';import withStyles from'@material-ui/core/styles/withStyles';import{withTranslation}from'react-i18next';import Button from'@material-ui/core/Button';import Dialog from'@material-ui/core/Dialog';import DialogActions from'@material-ui/core/DialogActions';import DialogContent from'@material-ui/core/DialogContent';import DialogContentText from'@material-ui/core/DialogContentText';import DialogTitle from'@material-ui/core/DialogTitle';import FormControlLabel from'@material-ui/core/FormControlLabel';import Checkbox from'@material-ui/core/Checkbox/';import MenuItem from'@material-ui/core/MenuItem';import MenuList from'@material-ui/core/MenuList';import Popover from'@material-ui/core/Popover';import{getChatShortTitle,isPrivateChat}from'../../../Utils/Chat';import{getMedia,openMedia}from'../../../Utils/Message';import{forwardMessages,openChat}from'../../../Actions/Client';import MessageStore from'../../../Stores/MessageStore';import TdLibController from'../../../Controllers/TdLibController';import'./SharedDocument.css';var styles={menuListRoot:{minWidth:150}};var SharedDocument=/*#__PURE__*/function(_React$Component){_inherits(SharedDocument,_React$Component);function SharedDocument(props){var _this;_classCallCheck(this,SharedDocument);_this=_possibleConstructorReturn(this,_getPrototypeOf(SharedDocument).call(this,props));_this.handleOpenMessage=function(event){_this.handleCloseContextMenu(event);var _this$props=_this.props,chatId=_this$props.chatId,messageId=_this$props.messageId;openChat(chatId,messageId);};_this.handleForward=function(event){_this.handleCloseContextMenu(event);var _this$props2=_this.props,chatId=_this$props2.chatId,messageId=_this$props2.messageId;forwardMessages(chatId,[messageId]);};_this.handleDelete=function(event){_this.handleCloseContextMenu(event);var _this$props3=_this.props,chatId=_this$props3.chatId,messageId=_this$props3.messageId;var message=MessageStore.get(chatId,messageId);if(!message)return null;var can_be_deleted_for_all_users=message.can_be_deleted_for_all_users;_this.setState({openDeleteDialog:true,canBeDeletedForAllUsers:can_be_deleted_for_all_users,revoke:can_be_deleted_for_all_users});};_this.handleContextMenu=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var contextMenu,left,top;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(event){event.preventDefault();event.stopPropagation();}contextMenu=_this.state.contextMenu;if(contextMenu){_this.setState({contextMenu:false});}else{left=event.clientX;top=event.clientY;_this.setState({contextMenu:true,left:left,top:top});}case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleCloseContextMenu=function(event){if(event){event.stopPropagation();}_this.setState({contextMenu:false});};_this.handleRevokeChange=function(){_this.setState({revoke:!_this.state.revoke});};_this.handleCloseDelete=function(){_this.setState({openDeleteDialog:false});};_this.handleDeleteContinue=function(){var _this$props4=_this.props,chatId=_this$props4.chatId,messageId=_this$props4.messageId;var revoke=_this.state.revoke;_this.handleCloseDelete();TdLibController.send({'@type':'deleteMessages',chat_id:chatId,message_ids:[messageId],revoke:revoke});};_this.state={contextMenu:false,left:0,top:0,openDeleteDialog:false,revoke:false};return _this;}_createClass(SharedDocument,[{key:\"render\",value:function render(){var _this$props5=this.props,chatId=_this$props5.chatId,classes=_this$props5.classes,messageId=_this$props5.messageId,showOpenMessage=_this$props5.showOpenMessage,t=_this$props5.t;var _this$state=this.state,contextMenu=_this$state.contextMenu,left=_this$state.left,top=_this$state.top,openDeleteDialog=_this$state.openDeleteDialog,revoke=_this$state.revoke;var message=MessageStore.get(chatId,messageId);if(!message)return null;var can_be_forwarded=message.can_be_forwarded,can_be_deleted_only_for_self=message.can_be_deleted_only_for_self,can_be_deleted_for_all_users=message.can_be_deleted_for_all_users;var count=1;return React.createElement(\"div\",{className:\"shared-document\",onContextMenu:this.handleContextMenu},getMedia(message,function(){return openMedia(chatId,messageId,true);}),React.createElement(Popover,{open:contextMenu,onClose:this.handleCloseContextMenu,anchorReference:\"anchorPosition\",anchorPosition:{top:top,left:left},anchorOrigin:{vertical:'bottom',horizontal:'right'},transformOrigin:{vertical:'top',horizontal:'left'},onMouseDown:function onMouseDown(e){return e.stopPropagation();}},React.createElement(MenuList,{classes:{root:classes.menuListRoot},onClick:function onClick(e){return e.stopPropagation();}},showOpenMessage&&React.createElement(MenuItem,{onClick:this.handleOpenMessage},t('GoToMessage')),can_be_forwarded&&React.createElement(MenuItem,{onClick:this.handleForward},t('Forward')),(can_be_deleted_only_for_self||can_be_deleted_for_all_users)&&React.createElement(MenuItem,{onClick:this.handleDelete},t('Delete')))),React.createElement(Dialog,{transitionDuration:0,open:openDeleteDialog,onClose:this.handleCloseDelete,\"aria-labelledby\":\"delete-dialog-title\"},React.createElement(DialogTitle,{id:\"delete-dialog-title\"},\"Confirm\"),React.createElement(DialogContent,null,React.createElement(DialogContentText,null,count===1?'Are you sure you want to delete 1 message?':\"Are you sure you want to delete \".concat(count,\" messages?\")),can_be_deleted_for_all_users&&React.createElement(FormControlLabel,{control:React.createElement(Checkbox,{checked:revoke,onChange:this.handleRevokeChange,color:\"primary\"}),label:isPrivateChat(chatId)?\"Delete for \".concat(getChatShortTitle(chatId)):'Delete for all'})),React.createElement(DialogActions,null,React.createElement(Button,{onClick:this.handleCloseDelete,color:\"primary\"},\"Cancel\"),React.createElement(Button,{onClick:this.handleDeleteContinue,color:\"primary\"},\"Ok\"))));}}]);return SharedDocument;}(React.Component);var enhance=compose(withStyles(styles,{withTheme:true}),withTranslation());export default enhance(SharedDocument);","map":{"version":3,"sources":["/Users/yosuahalim/Documents/Projects/telegram-app/src/Components/Tile/SharedMedia/SharedDocument.js"],"names":["React","compose","withStyles","withTranslation","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","FormControlLabel","Checkbox","MenuItem","MenuList","Popover","getChatShortTitle","isPrivateChat","getMedia","openMedia","forwardMessages","openChat","MessageStore","TdLibController","styles","menuListRoot","minWidth","SharedDocument","props","handleOpenMessage","event","handleCloseContextMenu","chatId","messageId","handleForward","handleDelete","message","get","can_be_deleted_for_all_users","setState","openDeleteDialog","canBeDeletedForAllUsers","revoke","handleContextMenu","preventDefault","stopPropagation","contextMenu","state","left","clientX","top","clientY","handleRevokeChange","handleCloseDelete","handleDeleteContinue","send","chat_id","message_ids","classes","showOpenMessage","t","can_be_forwarded","can_be_deleted_only_for_self","count","vertical","horizontal","e","root","Component","enhance","withTheme"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'recompose';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Checkbox from '@material-ui/core/Checkbox/';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Popover from '@material-ui/core/Popover';\nimport { getChatShortTitle, isPrivateChat } from '../../../Utils/Chat';\nimport { getMedia, openMedia } from '../../../Utils/Message';\nimport { forwardMessages, openChat } from '../../../Actions/Client';\nimport MessageStore from '../../../Stores/MessageStore';\nimport TdLibController from '../../../Controllers/TdLibController';\nimport './SharedDocument.css';\n\nconst styles = {\n    menuListRoot: {\n        minWidth: 150\n    }\n};\n\nclass SharedDocument extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            contextMenu: false,\n            left: 0,\n            top: 0,\n            openDeleteDialog: false,\n            revoke: false\n        };\n    }\n\n    handleOpenMessage = event => {\n        this.handleCloseContextMenu(event);\n\n        const { chatId, messageId } = this.props;\n\n        openChat(chatId, messageId);\n    };\n\n    handleForward = event => {\n        this.handleCloseContextMenu(event);\n\n        const { chatId, messageId } = this.props;\n\n        forwardMessages(chatId, [messageId]);\n    };\n\n    handleDelete = event => {\n        this.handleCloseContextMenu(event);\n\n        const { chatId, messageId } = this.props;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const { can_be_deleted_for_all_users } = message;\n\n        this.setState({\n            openDeleteDialog: true,\n            canBeDeletedForAllUsers: can_be_deleted_for_all_users,\n            revoke: can_be_deleted_for_all_users\n        });\n    };\n\n    handleContextMenu = async event => {\n        if (event) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n        const { contextMenu } = this.state;\n\n        if (contextMenu) {\n            this.setState({ contextMenu: false });\n        } else {\n            const left = event.clientX;\n            const top = event.clientY;\n\n            this.setState({\n                contextMenu: true,\n                left,\n                top\n            });\n        }\n    };\n\n    handleCloseContextMenu = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        this.setState({ contextMenu: false });\n    };\n\n    handleRevokeChange = () => {\n        this.setState({ revoke: !this.state.revoke });\n    };\n\n    handleCloseDelete = () => {\n        this.setState({ openDeleteDialog: false });\n    };\n\n    handleDeleteContinue = () => {\n        const { chatId, messageId } = this.props;\n        const { revoke } = this.state;\n\n        this.handleCloseDelete();\n\n        TdLibController.send({\n            '@type': 'deleteMessages',\n            chat_id: chatId,\n            message_ids: [messageId],\n            revoke: revoke\n        });\n    };\n\n    render() {\n        const { chatId, classes, messageId, showOpenMessage, t } = this.props;\n        const { contextMenu, left, top, openDeleteDialog, revoke } = this.state;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const { can_be_forwarded, can_be_deleted_only_for_self, can_be_deleted_for_all_users } = message;\n        const count = 1;\n\n        return (\n            <div className='shared-document' onContextMenu={this.handleContextMenu}>\n                {getMedia(message, () => openMedia(chatId, messageId, true))}\n                <Popover\n                    open={contextMenu}\n                    onClose={this.handleCloseContextMenu}\n                    anchorReference='anchorPosition'\n                    anchorPosition={{ top, left }}\n                    anchorOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'right'\n                    }}\n                    transformOrigin={{\n                        vertical: 'top',\n                        horizontal: 'left'\n                    }}\n                    onMouseDown={e => e.stopPropagation()}>\n                    <MenuList classes={{ root: classes.menuListRoot }} onClick={e => e.stopPropagation()}>\n                        {showOpenMessage && <MenuItem onClick={this.handleOpenMessage}>{t('GoToMessage')}</MenuItem>}\n                        {can_be_forwarded && <MenuItem onClick={this.handleForward}>{t('Forward')}</MenuItem>}\n                        {(can_be_deleted_only_for_self || can_be_deleted_for_all_users) && (\n                            <MenuItem onClick={this.handleDelete}>{t('Delete')}</MenuItem>\n                        )}\n                    </MenuList>\n                </Popover>\n                <Dialog\n                    transitionDuration={0}\n                    open={openDeleteDialog}\n                    onClose={this.handleCloseDelete}\n                    aria-labelledby='delete-dialog-title'>\n                    <DialogTitle id='delete-dialog-title'>Confirm</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>\n                            {count === 1\n                                ? 'Are you sure you want to delete 1 message?'\n                                : `Are you sure you want to delete ${count} messages?`}\n                        </DialogContentText>\n                        {can_be_deleted_for_all_users && (\n                            <FormControlLabel\n                                control={\n                                    <Checkbox checked={revoke} onChange={this.handleRevokeChange} color='primary' />\n                                }\n                                label={\n                                    isPrivateChat(chatId) ? `Delete for ${getChatShortTitle(chatId)}` : 'Delete for all'\n                                }\n                            />\n                        )}\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleCloseDelete} color='primary'>\n                            Cancel\n                        </Button>\n                        <Button onClick={this.handleDeleteContinue} color='primary'>\n                            Ok\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </div>\n        );\n    }\n}\n\nSharedDocument.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    showOpenMessage: PropTypes.number.isRequired\n};\n\nconst enhance = compose(\n    withStyles(styles, { withTheme: true }),\n    withTranslation()\n);\n\nexport default enhance(SharedDocument);\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport { formatNumber } from 'libphonenumber-js';\nimport { PHOTO_SIZE, PHOTO_THUMBNAIL_SIZE } from '../Constants';\n\nfunction isAppleDevice() {\n  const iDevices = ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod', 'MacIntel'];\n\n  if (!!navigator.platform) {\n    return iDevices.indexOf(navigator.platform) > -1;\n  }\n\n  return /iPad|iPhone|iPod|Mac\\sOS\\sX/.test(navigator.userAgent) && !window.MSStream;\n}\n\nfunction isConnecting(state) {\n  if (!state) return false;\n\n  switch (state['@type']) {\n    case 'connectionStateConnecting':\n      {\n        return true;\n      }\n\n    case 'connectionStateConnectingToProxy':\n      {\n        return true;\n      }\n\n    case 'connectionStateReady':\n      {\n        return false;\n      }\n\n    case 'connectionStateUpdating':\n      {\n        return false;\n      }\n\n    case 'connectionStateWaitingForNetwork':\n      {\n        return false;\n      }\n  }\n\n  return false;\n}\n\nfunction cleanProgressStatus(status) {\n  if (!status) return status;\n  return status.replace('...', '').replace('…', '');\n}\n\nfunction getOSName() {\n  let OSName = 'Unknown';\n  if (window.navigator.userAgent.indexOf('Windows NT 10.0') !== -1) OSName = 'Windows 10';\n  if (window.navigator.userAgent.indexOf('Windows NT 6.2') !== -1) OSName = 'Windows 8';\n  if (window.navigator.userAgent.indexOf('Windows NT 6.1') !== -1) OSName = 'Windows 7';\n  if (window.navigator.userAgent.indexOf('Windows NT 6.0') !== -1) OSName = 'Windows Vista';\n  if (window.navigator.userAgent.indexOf('Windows NT 5.1') !== -1) OSName = 'Windows XP';\n  if (window.navigator.userAgent.indexOf('Windows NT 5.0') !== -1) OSName = 'Windows 2000';\n  if (window.navigator.userAgent.indexOf('Mac') !== -1) OSName = 'Mac/iOS';\n  if (window.navigator.userAgent.indexOf('X11') !== -1) OSName = 'UNIX';\n  if (window.navigator.userAgent.indexOf('Linux') !== -1) OSName = 'Linux';\n  return OSName;\n}\n\nfunction getBrowser() {\n  let browser_name = '';\n  let isIE =\n  /*@cc_on!@*/\n  false || !!document.documentMode;\n  let isEdge = !isIE && !!window.StyleMedia;\n\n  if (navigator.userAgent.indexOf('Chrome') !== -1 && !isEdge) {\n    browser_name = 'Chrome';\n  } else if (navigator.userAgent.indexOf('Safari') !== -1 && !isEdge) {\n    browser_name = 'Safari';\n  } else if (navigator.userAgent.indexOf('Firefox') !== -1) {\n    browser_name = 'Firefox';\n  } else if (navigator.userAgent.indexOf('MSIE') !== -1 || !!document.documentMode === true) {\n    //IF IE > 10\n    browser_name = 'IE';\n  } else if (isEdge) {\n    browser_name = 'Edge';\n  } else {\n    browser_name = 'Unknown';\n  }\n\n  return browser_name;\n}\n\nfunction isValidPhoneNumber(phoneNumber) {\n  if (!phoneNumber) return false;\n  let isBad = !phoneNumber.match(/^[\\d\\-+\\s]+$/);\n\n  if (!isBad) {\n    phoneNumber = phoneNumber.replace(/\\D/g, '');\n\n    if (phoneNumber.length < 7) {\n      isBad = true;\n    }\n  }\n\n  return !isBad;\n}\n\nfunction stringToBoolean(string) {\n  switch (string.toLowerCase().trim()) {\n    case 'true':\n    case 'yes':\n    case '1':\n      return true;\n\n    case 'false':\n    case 'no':\n    case '0':\n    case null:\n      return false;\n\n    default:\n      return Boolean(string);\n  }\n}\n\nfunction orderCompare(order1, order2) {\n  let diff = order1.length - order2.length;\n  if (diff !== 0) return diff < 0 ? -1 : 1;\n  if (order1 === order2) return 0;\n  return order1 > order2 ? 1 : -1;\n}\n\nfunction getPhotoThumbnailSize(sizes) {\n  return getSize(sizes, PHOTO_THUMBNAIL_SIZE);\n}\n\nfunction getPhotoSize(sizes, displaySize = PHOTO_SIZE) {\n  return getSize(sizes, displaySize);\n}\n\nfunction getSize(sizes, dimension) {\n  if (!sizes) return null;\n  if (sizes.length === 0) return null;\n  if (dimension === 0) return null; // let iSize = sizes[2];//.find(x => x.type === 'i');\n  // if (iSize){\n  //     return iSize;\n  // }\n\n  let useWidth = sizes[0].width >= sizes[0].height;\n  let diff = Math.abs(dimension - (useWidth ? sizes[0].width : sizes[0].height));\n  let index = 0;\n\n  for (let i = 1; i < sizes.length; i++) {\n    if (sizes[i].type === 'i' && !sizes[i].photo.local.is_downloading_completed) {\n      continue;\n    }\n\n    let currDiff = Math.abs(dimension - (useWidth ? sizes[i].width : sizes[i].height));\n\n    if (currDiff < diff) {\n      index = i;\n      currDiff = diff;\n    }\n  }\n\n  return sizes[index];\n}\n\nfunction getFitSize(size, max, increaseToMax = true) {\n  if (!size) return {\n    width: 0,\n    height: 0\n  };\n\n  if (!increaseToMax) {\n    if (size.width < max && size.height < max) {\n      return size;\n    }\n  }\n\n  if (size.width > size.height) {\n    return {\n      width: max,\n      height: Math.floor(size.height * max / size.width)\n    };\n  }\n\n  return {\n    width: Math.floor(size.width * max / size.height),\n    height: max\n  };\n}\n\nfunction itemsInView(scrollContainerRef, itemsContainerRef) {\n  let scrollContainer = scrollContainerRef.current;\n  let itemsContainer = itemsContainerRef ? itemsContainerRef.current : scrollContainer;\n  const items = [];\n\n  for (let i = 0; i < itemsContainer.children.length; i++) {\n    let child = itemsContainer.children[i];\n\n    if (child.offsetTop + child.offsetHeight >= scrollContainer.scrollTop && child.offsetTop <= scrollContainer.scrollTop + scrollContainer.offsetHeight) {\n      items.push(i);\n    }\n  }\n\n  return items;\n} // Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\n\n\nfunction throttle(func, wait, options) {\n  var context, args, result;\n  var timeout = null;\n  var previous = 0;\n  if (!options) options = {};\n\n  var later = function () {\n    previous = options.leading === false ? 0 : Date.now();\n    timeout = null;\n    result = func.apply(context, args);\n    if (!timeout) context = args = null;\n  };\n\n  return function () {\n    var now = Date.now();\n    if (!previous && options.leading === false) previous = now;\n    var remaining = wait - (now - previous);\n    context = this;\n    args = arguments;\n\n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n\n      previous = now;\n      result = func.apply(context, args);\n      if (!timeout) context = args = null;\n    } else if (!timeout && options.trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n\n    return result;\n  };\n} // Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\n\n\nfunction debounce(func, wait, immediate) {\n  var timeout;\n  return function () {\n    var context = this,\n        args = arguments;\n\n    var later = function () {\n      timeout = null;\n\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n}\n\nfunction getFirstLetter(str) {\n  if (!str) return '';\n\n  for (let i = 0; i < str.length; i++) {\n    if (str[i].toUpperCase() !== str[i].toLowerCase()) {\n      return str[i];\n    } else if (str[i] >= '0' && str[i] <= '9') {\n      return str[i];\n    }\n  }\n\n  return '';\n}\n\nfunction getLetters(title) {\n  if (!title) return null;\n  if (title.length === 0) return null;\n  const split = title.split(' ');\n\n  if (split.length === 1) {\n    return getFirstLetter(split[0]);\n  }\n\n  if (split.length > 1) {\n    return getFirstLetter(split[0]) + getFirstLetter(split[1]);\n  }\n\n  return null;\n}\n\nfunction readImageSize(file, callback) {\n  let useBlob = false; // Create a new FileReader instance\n  // https://developer.mozilla.org/en/docs/Web/API/FileReader\n\n  var reader = new FileReader(); // Once a file is successfully readed:\n\n  reader.addEventListener('load', function () {\n    // At this point `reader.result` contains already the Base64 Data-URL\n    // and we've could immediately show an image using\n    // `elPreview.insertAdjacentHTML(\"beforeend\", \"<img src='\"+ reader.result +\"'>\");`\n    // But we want to get that image's width and height px values!\n    // Since the File Object does not hold the size of an image\n    // we need to create a new image and assign it's src, so when\n    // the image is loaded we can calculate it's width and height:\n    var image = new Image();\n    image.addEventListener('load', function () {\n      // Concatenate our HTML image info\n      // var imageInfo = file.name    +' '+ // get the value of `name` from the `file` Obj\n      //     image.width  +'×'+ // But get the width from our `image`\n      //     image.height +' '+\n      //     file.type    +' '+\n      //     Math.round(file.size/1024) +'KB';\n      //alert(imageInfo);\n      file.photoWidth = image.width;\n      file.photoHeight = image.height; // Finally append our created image and the HTML info string to our `#preview`\n      //elPreview.appendChild( this );\n      //elPreview.insertAdjacentHTML(\"beforeend\", imageInfo +'<br>');\n      // If we set the variable `useBlob` to true:\n      // (Data-URLs can end up being really large\n      // `src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA...........etc`\n      // Blobs are usually faster and the image src will hold a shorter blob name\n      // src=\"blob:http%3A//example.com/2a303acf-c34c-4d0a-85d4-2136eef7d723\"\n\n      if (useBlob) {\n        // Free some memory for optimal performance\n        window.URL.revokeObjectURL(image.src);\n      }\n\n      callback(file);\n    });\n    image.src = useBlob ? window.URL.createObjectURL(file) : reader.result;\n  }); // https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL\n\n  reader.readAsDataURL(file);\n}\n\nfunction formatPhoneNumber(number) {\n  const unformattedNumber = number && number.startsWith('+') ? number : '+' + number;\n  const formattedNumber = formatNumber(unformattedNumber, 'International');\n  return formattedNumber || unformattedNumber;\n}\n/**\n * use this to make a Base64 encoded string URL friendly,\n * i.e. '+' and '/' are replaced with '-' and '_' also any trailing '='\n * characters are removed\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\n\n\nfunction Base64EncodeUrl(str) {\n  return str.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/\\=+$/, '');\n}\n/**\n * Use this to recreate a Base64 encoded string that was made URL friendly\n * using Base64EncodeurlFriendly.\n * '-' and '_' are replaced with '+' and '/' and also it is padded with '+'\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\n\n\nfunction Base64DecodeUrl(str) {\n  str = (str + '===').slice(0, str.length + str.length % 4);\n  return str.replace(/-/g, '+').replace(/_/g, '/');\n}\n\nfunction arrayBufferToBase64(buffer) {\n  var binary = '';\n  var bytes = new Uint8Array(buffer);\n  var len = bytes.byteLength;\n\n  for (var i = 0; i < len; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n\n  return Base64EncodeUrl(window.btoa(binary));\n}\n\nfunction isAuthorizationReady(state) {\n  if (!state) return false;\n  return state['@type'] === 'authorizationStateReady';\n}\n\nfunction between(item, first, last, inclusive = false) {\n  return inclusive ? item >= first && item <= last : item > first && item < last;\n}\n\nfunction clamp(item, first, last) {\n  if (item < first) return first;\n  if (item > last) return last;\n  return item;\n}\n\nfunction getDurationString(secondsTotal) {\n  let hours = Math.floor(secondsTotal / 3600);\n  let minutes = Math.floor((secondsTotal - hours * 3600) / 60);\n  let seconds = secondsTotal - hours * 3600 - minutes * 60;\n\n  if (hours > 0 && minutes < 10) {\n    minutes = '0' + minutes;\n  }\n\n  if (seconds < 10) {\n    seconds = '0' + seconds;\n  }\n\n  return (hours > 0 ? hours + ':' : '') + minutes + ':' + seconds;\n}\n\nfunction getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\n}\n\nfunction historyEquals(first, second) {\n  if (!first && second) return false;\n  if (first && !second) return false;\n  if (!first && !second) return true;\n  if (first.length === 0 && second.length === 0) return true;\n  return first === second;\n}\n\nfunction insertByOrder(array, element, comparator) {\n  let i = 0;\n\n  for (; i < array.length && comparator(array[i], element) < 0; i++) {}\n\n  return [...array.slice(0, i), element, ...array.slice(i)];\n}\n\nexport { cleanProgressStatus, isConnecting, getBrowser, getOSName, isValidPhoneNumber, stringToBoolean, orderCompare, getSize, getPhotoThumbnailSize, getPhotoSize, getFitSize, itemsInView, throttle, debounce, getLetters, readImageSize, formatPhoneNumber, arrayBufferToBase64, isAuthorizationReady, between, clamp, getDurationString, getRandomInt, isAppleDevice, historyEquals, insertByOrder };","map":{"version":3,"sources":["/Users/yosuahalim/Documents/Projects/telegram-app/src/Utils/Common.js"],"names":["formatNumber","PHOTO_SIZE","PHOTO_THUMBNAIL_SIZE","isAppleDevice","iDevices","navigator","platform","indexOf","test","userAgent","window","MSStream","isConnecting","state","cleanProgressStatus","status","replace","getOSName","OSName","getBrowser","browser_name","isIE","document","documentMode","isEdge","StyleMedia","isValidPhoneNumber","phoneNumber","isBad","match","length","stringToBoolean","string","toLowerCase","trim","Boolean","orderCompare","order1","order2","diff","getPhotoThumbnailSize","sizes","getSize","getPhotoSize","displaySize","dimension","useWidth","width","height","Math","abs","index","i","type","photo","local","is_downloading_completed","currDiff","getFitSize","size","max","increaseToMax","floor","itemsInView","scrollContainerRef","itemsContainerRef","scrollContainer","current","itemsContainer","items","children","child","offsetTop","offsetHeight","scrollTop","push","throttle","func","wait","options","context","args","result","timeout","previous","later","leading","Date","now","apply","remaining","arguments","clearTimeout","trailing","setTimeout","debounce","immediate","callNow","getFirstLetter","str","toUpperCase","getLetters","title","split","readImageSize","file","callback","useBlob","reader","FileReader","addEventListener","image","Image","photoWidth","photoHeight","URL","revokeObjectURL","src","createObjectURL","readAsDataURL","formatPhoneNumber","number","unformattedNumber","startsWith","formattedNumber","Base64EncodeUrl","Base64DecodeUrl","slice","arrayBufferToBase64","buffer","binary","bytes","Uint8Array","len","byteLength","String","fromCharCode","btoa","isAuthorizationReady","between","item","first","last","inclusive","clamp","getDurationString","secondsTotal","hours","minutes","seconds","getRandomInt","min","ceil","random","historyEquals","second","insertByOrder","array","element","comparator"],"mappings":"AAAA;;;;;;AAOA,SAASA,YAAT,QAA6B,mBAA7B;AACA,SAASC,UAAT,EAAqBC,oBAArB,QAAiD,cAAjD;;AAEA,SAASC,aAAT,GAAyB;AACrB,QAAMC,QAAQ,GAAG,CAAC,gBAAD,EAAmB,kBAAnB,EAAuC,gBAAvC,EAAyD,MAAzD,EAAiE,QAAjE,EAA2E,MAA3E,EAAmF,UAAnF,CAAjB;;AAEA,MAAI,CAAC,CAACC,SAAS,CAACC,QAAhB,EAA0B;AACtB,WAAOF,QAAQ,CAACG,OAAT,CAAiBF,SAAS,CAACC,QAA3B,IAAuC,CAAC,CAA/C;AACH;;AAED,SAAO,8BAA8BE,IAA9B,CAAmCH,SAAS,CAACI,SAA7C,KAA2D,CAACC,MAAM,CAACC,QAA1E;AACH;;AAED,SAASC,YAAT,CAAsBC,KAAtB,EAA6B;AACzB,MAAI,CAACA,KAAL,EAAY,OAAO,KAAP;;AAEZ,UAAQA,KAAK,CAAC,OAAD,CAAb;AACI,SAAK,2BAAL;AAAkC;AAC9B,eAAO,IAAP;AACH;;AACD,SAAK,kCAAL;AAAyC;AACrC,eAAO,IAAP;AACH;;AACD,SAAK,sBAAL;AAA6B;AACzB,eAAO,KAAP;AACH;;AACD,SAAK,yBAAL;AAAgC;AAC5B,eAAO,KAAP;AACH;;AACD,SAAK,kCAAL;AAAyC;AACrC,eAAO,KAAP;AACH;AAfL;;AAkBA,SAAO,KAAP;AACH;;AAED,SAASC,mBAAT,CAA6BC,MAA7B,EAAqC;AACjC,MAAI,CAACA,MAAL,EAAa,OAAOA,MAAP;AAEb,SAAOA,MAAM,CAACC,OAAP,CAAe,KAAf,EAAsB,EAAtB,EAA0BA,OAA1B,CAAkC,GAAlC,EAAuC,EAAvC,CAAP;AACH;;AAED,SAASC,SAAT,GAAqB;AACjB,MAAIC,MAAM,GAAG,SAAb;AACA,MAAIR,MAAM,CAACL,SAAP,CAAiBI,SAAjB,CAA2BF,OAA3B,CAAmC,iBAAnC,MAA0D,CAAC,CAA/D,EAAkEW,MAAM,GAAG,YAAT;AAClE,MAAIR,MAAM,CAACL,SAAP,CAAiBI,SAAjB,CAA2BF,OAA3B,CAAmC,gBAAnC,MAAyD,CAAC,CAA9D,EAAiEW,MAAM,GAAG,WAAT;AACjE,MAAIR,MAAM,CAACL,SAAP,CAAiBI,SAAjB,CAA2BF,OAA3B,CAAmC,gBAAnC,MAAyD,CAAC,CAA9D,EAAiEW,MAAM,GAAG,WAAT;AACjE,MAAIR,MAAM,CAACL,SAAP,CAAiBI,SAAjB,CAA2BF,OAA3B,CAAmC,gBAAnC,MAAyD,CAAC,CAA9D,EAAiEW,MAAM,GAAG,eAAT;AACjE,MAAIR,MAAM,CAACL,SAAP,CAAiBI,SAAjB,CAA2BF,OAA3B,CAAmC,gBAAnC,MAAyD,CAAC,CAA9D,EAAiEW,MAAM,GAAG,YAAT;AACjE,MAAIR,MAAM,CAACL,SAAP,CAAiBI,SAAjB,CAA2BF,OAA3B,CAAmC,gBAAnC,MAAyD,CAAC,CAA9D,EAAiEW,MAAM,GAAG,cAAT;AACjE,MAAIR,MAAM,CAACL,SAAP,CAAiBI,SAAjB,CAA2BF,OAA3B,CAAmC,KAAnC,MAA8C,CAAC,CAAnD,EAAsDW,MAAM,GAAG,SAAT;AACtD,MAAIR,MAAM,CAACL,SAAP,CAAiBI,SAAjB,CAA2BF,OAA3B,CAAmC,KAAnC,MAA8C,CAAC,CAAnD,EAAsDW,MAAM,GAAG,MAAT;AACtD,MAAIR,MAAM,CAACL,SAAP,CAAiBI,SAAjB,CAA2BF,OAA3B,CAAmC,OAAnC,MAAgD,CAAC,CAArD,EAAwDW,MAAM,GAAG,OAAT;AAExD,SAAOA,MAAP;AACH;;AAED,SAASC,UAAT,GAAsB;AAClB,MAAIC,YAAY,GAAG,EAAnB;AACA,MAAIC,IAAI;AAAG;AAAa,WAAS,CAAC,CAACC,QAAQ,CAACC,YAA5C;AACA,MAAIC,MAAM,GAAG,CAACH,IAAD,IAAS,CAAC,CAACX,MAAM,CAACe,UAA/B;;AACA,MAAIpB,SAAS,CAACI,SAAV,CAAoBF,OAApB,CAA4B,QAA5B,MAA0C,CAAC,CAA3C,IAAgD,CAACiB,MAArD,EAA6D;AACzDJ,IAAAA,YAAY,GAAG,QAAf;AACH,GAFD,MAEO,IAAIf,SAAS,CAACI,SAAV,CAAoBF,OAApB,CAA4B,QAA5B,MAA0C,CAAC,CAA3C,IAAgD,CAACiB,MAArD,EAA6D;AAChEJ,IAAAA,YAAY,GAAG,QAAf;AACH,GAFM,MAEA,IAAIf,SAAS,CAACI,SAAV,CAAoBF,OAApB,CAA4B,SAA5B,MAA2C,CAAC,CAAhD,EAAmD;AACtDa,IAAAA,YAAY,GAAG,SAAf;AACH,GAFM,MAEA,IAAIf,SAAS,CAACI,SAAV,CAAoBF,OAApB,CAA4B,MAA5B,MAAwC,CAAC,CAAzC,IAA8C,CAAC,CAACe,QAAQ,CAACC,YAAX,KAA4B,IAA9E,EAAoF;AACvF;AACAH,IAAAA,YAAY,GAAG,IAAf;AACH,GAHM,MAGA,IAAII,MAAJ,EAAY;AACfJ,IAAAA,YAAY,GAAG,MAAf;AACH,GAFM,MAEA;AACHA,IAAAA,YAAY,GAAG,SAAf;AACH;;AAED,SAAOA,YAAP;AACH;;AAED,SAASM,kBAAT,CAA4BC,WAA5B,EAAyC;AACrC,MAAI,CAACA,WAAL,EAAkB,OAAO,KAAP;AAElB,MAAIC,KAAK,GAAG,CAACD,WAAW,CAACE,KAAZ,CAAkB,cAAlB,CAAb;;AACA,MAAI,CAACD,KAAL,EAAY;AACRD,IAAAA,WAAW,GAAGA,WAAW,CAACX,OAAZ,CAAoB,KAApB,EAA2B,EAA3B,CAAd;;AACA,QAAIW,WAAW,CAACG,MAAZ,GAAqB,CAAzB,EAA4B;AACxBF,MAAAA,KAAK,GAAG,IAAR;AACH;AACJ;;AAED,SAAO,CAACA,KAAR;AACH;;AAED,SAASG,eAAT,CAAyBC,MAAzB,EAAiC;AAC7B,UAAQA,MAAM,CAACC,WAAP,GAAqBC,IAArB,EAAR;AACI,SAAK,MAAL;AACA,SAAK,KAAL;AACA,SAAK,GAAL;AACI,aAAO,IAAP;;AACJ,SAAK,OAAL;AACA,SAAK,IAAL;AACA,SAAK,GAAL;AACA,SAAK,IAAL;AACI,aAAO,KAAP;;AACJ;AACI,aAAOC,OAAO,CAACH,MAAD,CAAd;AAXR;AAaH;;AAED,SAASI,YAAT,CAAsBC,MAAtB,EAA8BC,MAA9B,EAAsC;AAClC,MAAIC,IAAI,GAAGF,MAAM,CAACP,MAAP,GAAgBQ,MAAM,CAACR,MAAlC;AACA,MAAIS,IAAI,KAAK,CAAb,EAAgB,OAAOA,IAAI,GAAG,CAAP,GAAW,CAAC,CAAZ,GAAgB,CAAvB;AAChB,MAAIF,MAAM,KAAKC,MAAf,EAAuB,OAAO,CAAP;AAEvB,SAAOD,MAAM,GAAGC,MAAT,GAAkB,CAAlB,GAAsB,CAAC,CAA9B;AACH;;AAED,SAASE,qBAAT,CAA+BC,KAA/B,EAAsC;AAClC,SAAOC,OAAO,CAACD,KAAD,EAAQvC,oBAAR,CAAd;AACH;;AAED,SAASyC,YAAT,CAAsBF,KAAtB,EAA6BG,WAAW,GAAG3C,UAA3C,EAAuD;AACnD,SAAOyC,OAAO,CAACD,KAAD,EAAQG,WAAR,CAAd;AACH;;AAED,SAASF,OAAT,CAAiBD,KAAjB,EAAwBI,SAAxB,EAAmC;AAC/B,MAAI,CAACJ,KAAL,EAAY,OAAO,IAAP;AACZ,MAAIA,KAAK,CAACX,MAAN,KAAiB,CAArB,EAAwB,OAAO,IAAP;AACxB,MAAIe,SAAS,KAAK,CAAlB,EAAqB,OAAO,IAAP,CAHU,CAK/B;AACA;AACA;AACA;;AAEA,MAAIC,QAAQ,GAAGL,KAAK,CAAC,CAAD,CAAL,CAASM,KAAT,IAAkBN,KAAK,CAAC,CAAD,CAAL,CAASO,MAA1C;AACA,MAAIT,IAAI,GAAGU,IAAI,CAACC,GAAL,CAASL,SAAS,IAAIC,QAAQ,GAAGL,KAAK,CAAC,CAAD,CAAL,CAASM,KAAZ,GAAoBN,KAAK,CAAC,CAAD,CAAL,CAASO,MAAzC,CAAlB,CAAX;AACA,MAAIG,KAAK,GAAG,CAAZ;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,KAAK,CAACX,MAA1B,EAAkCsB,CAAC,EAAnC,EAAuC;AACnC,QAAIX,KAAK,CAACW,CAAD,CAAL,CAASC,IAAT,KAAkB,GAAlB,IAAyB,CAACZ,KAAK,CAACW,CAAD,CAAL,CAASE,KAAT,CAAeC,KAAf,CAAqBC,wBAAnD,EAA6E;AACzE;AACH;;AAED,QAAIC,QAAQ,GAAGR,IAAI,CAACC,GAAL,CAASL,SAAS,IAAIC,QAAQ,GAAGL,KAAK,CAACW,CAAD,CAAL,CAASL,KAAZ,GAAoBN,KAAK,CAACW,CAAD,CAAL,CAASJ,MAAzC,CAAlB,CAAf;;AACA,QAAIS,QAAQ,GAAGlB,IAAf,EAAqB;AACjBY,MAAAA,KAAK,GAAGC,CAAR;AACAK,MAAAA,QAAQ,GAAGlB,IAAX;AACH;AACJ;;AAED,SAAOE,KAAK,CAACU,KAAD,CAAZ;AACH;;AAED,SAASO,UAAT,CAAoBC,IAApB,EAA0BC,GAA1B,EAA+BC,aAAa,GAAG,IAA/C,EAAqD;AACjD,MAAI,CAACF,IAAL,EAAW,OAAO;AAAEZ,IAAAA,KAAK,EAAE,CAAT;AAAYC,IAAAA,MAAM,EAAE;AAApB,GAAP;;AAEX,MAAI,CAACa,aAAL,EAAoB;AAChB,QAAIF,IAAI,CAACZ,KAAL,GAAaa,GAAb,IAAoBD,IAAI,CAACX,MAAL,GAAcY,GAAtC,EAA2C;AACvC,aAAOD,IAAP;AACH;AACJ;;AAED,MAAIA,IAAI,CAACZ,KAAL,GAAaY,IAAI,CAACX,MAAtB,EAA8B;AAC1B,WAAO;AAAED,MAAAA,KAAK,EAAEa,GAAT;AAAcZ,MAAAA,MAAM,EAAEC,IAAI,CAACa,KAAL,CAAYH,IAAI,CAACX,MAAL,GAAcY,GAAf,GAAsBD,IAAI,CAACZ,KAAtC;AAAtB,KAAP;AACH;;AAED,SAAO;AAAEA,IAAAA,KAAK,EAAEE,IAAI,CAACa,KAAL,CAAYH,IAAI,CAACZ,KAAL,GAAaa,GAAd,GAAqBD,IAAI,CAACX,MAArC,CAAT;AAAuDA,IAAAA,MAAM,EAAEY;AAA/D,GAAP;AACH;;AAED,SAASG,WAAT,CAAqBC,kBAArB,EAAyCC,iBAAzC,EAA4D;AACxD,MAAIC,eAAe,GAAGF,kBAAkB,CAACG,OAAzC;AACA,MAAIC,cAAc,GAAGH,iBAAiB,GAAGA,iBAAiB,CAACE,OAArB,GAA+BD,eAArE;AAEA,QAAMG,KAAK,GAAG,EAAd;;AACA,OAAK,IAAIjB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgB,cAAc,CAACE,QAAf,CAAwBxC,MAA5C,EAAoDsB,CAAC,EAArD,EAAyD;AACrD,QAAImB,KAAK,GAAGH,cAAc,CAACE,QAAf,CAAwBlB,CAAxB,CAAZ;;AACA,QACImB,KAAK,CAACC,SAAN,GAAkBD,KAAK,CAACE,YAAxB,IAAwCP,eAAe,CAACQ,SAAxD,IACAH,KAAK,CAACC,SAAN,IAAmBN,eAAe,CAACQ,SAAhB,GAA4BR,eAAe,CAACO,YAFnE,EAGE;AACEJ,MAAAA,KAAK,CAACM,IAAN,CAAWvB,CAAX;AACH;AACJ;;AAED,SAAOiB,KAAP;AACH,C,CAED;AACA;AACA;AACA;AACA;;;AACA,SAASO,QAAT,CAAkBC,IAAlB,EAAwBC,IAAxB,EAA8BC,OAA9B,EAAuC;AACnC,MAAIC,OAAJ,EAAaC,IAAb,EAAmBC,MAAnB;AACA,MAAIC,OAAO,GAAG,IAAd;AACA,MAAIC,QAAQ,GAAG,CAAf;AACA,MAAI,CAACL,OAAL,EAAcA,OAAO,GAAG,EAAV;;AACd,MAAIM,KAAK,GAAG,YAAW;AACnBD,IAAAA,QAAQ,GAAGL,OAAO,CAACO,OAAR,KAAoB,KAApB,GAA4B,CAA5B,GAAgCC,IAAI,CAACC,GAAL,EAA3C;AACAL,IAAAA,OAAO,GAAG,IAAV;AACAD,IAAAA,MAAM,GAAGL,IAAI,CAACY,KAAL,CAAWT,OAAX,EAAoBC,IAApB,CAAT;AACA,QAAI,CAACE,OAAL,EAAcH,OAAO,GAAGC,IAAI,GAAG,IAAjB;AACjB,GALD;;AAMA,SAAO,YAAW;AACd,QAAIO,GAAG,GAAGD,IAAI,CAACC,GAAL,EAAV;AACA,QAAI,CAACJ,QAAD,IAAaL,OAAO,CAACO,OAAR,KAAoB,KAArC,EAA4CF,QAAQ,GAAGI,GAAX;AAC5C,QAAIE,SAAS,GAAGZ,IAAI,IAAIU,GAAG,GAAGJ,QAAV,CAApB;AACAJ,IAAAA,OAAO,GAAG,IAAV;AACAC,IAAAA,IAAI,GAAGU,SAAP;;AACA,QAAID,SAAS,IAAI,CAAb,IAAkBA,SAAS,GAAGZ,IAAlC,EAAwC;AACpC,UAAIK,OAAJ,EAAa;AACTS,QAAAA,YAAY,CAACT,OAAD,CAAZ;AACAA,QAAAA,OAAO,GAAG,IAAV;AACH;;AACDC,MAAAA,QAAQ,GAAGI,GAAX;AACAN,MAAAA,MAAM,GAAGL,IAAI,CAACY,KAAL,CAAWT,OAAX,EAAoBC,IAApB,CAAT;AACA,UAAI,CAACE,OAAL,EAAcH,OAAO,GAAGC,IAAI,GAAG,IAAjB;AACjB,KARD,MAQO,IAAI,CAACE,OAAD,IAAYJ,OAAO,CAACc,QAAR,KAAqB,KAArC,EAA4C;AAC/CV,MAAAA,OAAO,GAAGW,UAAU,CAACT,KAAD,EAAQK,SAAR,CAApB;AACH;;AACD,WAAOR,MAAP;AACH,GAlBD;AAmBH,C,CAED;AACA;AACA;AACA;;;AACA,SAASa,QAAT,CAAkBlB,IAAlB,EAAwBC,IAAxB,EAA8BkB,SAA9B,EAAyC;AACrC,MAAIb,OAAJ;AACA,SAAO,YAAW;AACd,QAAIH,OAAO,GAAG,IAAd;AAAA,QACIC,IAAI,GAAGU,SADX;;AAEA,QAAIN,KAAK,GAAG,YAAW;AACnBF,MAAAA,OAAO,GAAG,IAAV;;AACA,UAAI,CAACa,SAAL,EAAgB;AACZnB,QAAAA,IAAI,CAACY,KAAL,CAAWT,OAAX,EAAoBC,IAApB;AACH;AACJ,KALD;;AAMA,QAAIgB,OAAO,GAAGD,SAAS,IAAI,CAACb,OAA5B;AACAS,IAAAA,YAAY,CAACT,OAAD,CAAZ;AACAA,IAAAA,OAAO,GAAGW,UAAU,CAACT,KAAD,EAAQP,IAAR,CAApB;;AACA,QAAImB,OAAJ,EAAa;AACTpB,MAAAA,IAAI,CAACY,KAAL,CAAWT,OAAX,EAAoBC,IAApB;AACH;AACJ,GAfD;AAgBH;;AAED,SAASiB,cAAT,CAAwBC,GAAxB,EAA6B;AACzB,MAAI,CAACA,GAAL,EAAU,OAAO,EAAP;;AACV,OAAK,IAAI/C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+C,GAAG,CAACrE,MAAxB,EAAgCsB,CAAC,EAAjC,EAAqC;AACjC,QAAI+C,GAAG,CAAC/C,CAAD,CAAH,CAAOgD,WAAP,OAAyBD,GAAG,CAAC/C,CAAD,CAAH,CAAOnB,WAAP,EAA7B,EAAmD;AAC/C,aAAOkE,GAAG,CAAC/C,CAAD,CAAV;AACH,KAFD,MAEO,IAAI+C,GAAG,CAAC/C,CAAD,CAAH,IAAU,GAAV,IAAiB+C,GAAG,CAAC/C,CAAD,CAAH,IAAU,GAA/B,EAAoC;AACvC,aAAO+C,GAAG,CAAC/C,CAAD,CAAV;AACH;AACJ;;AAED,SAAO,EAAP;AACH;;AAED,SAASiD,UAAT,CAAoBC,KAApB,EAA2B;AACvB,MAAI,CAACA,KAAL,EAAY,OAAO,IAAP;AACZ,MAAIA,KAAK,CAACxE,MAAN,KAAiB,CAArB,EAAwB,OAAO,IAAP;AAExB,QAAMyE,KAAK,GAAGD,KAAK,CAACC,KAAN,CAAY,GAAZ,CAAd;;AACA,MAAIA,KAAK,CAACzE,MAAN,KAAiB,CAArB,EAAwB;AACpB,WAAOoE,cAAc,CAACK,KAAK,CAAC,CAAD,CAAN,CAArB;AACH;;AACD,MAAIA,KAAK,CAACzE,MAAN,GAAe,CAAnB,EAAsB;AAClB,WAAOoE,cAAc,CAACK,KAAK,CAAC,CAAD,CAAN,CAAd,GAA2BL,cAAc,CAACK,KAAK,CAAC,CAAD,CAAN,CAAhD;AACH;;AAED,SAAO,IAAP;AACH;;AAED,SAASC,aAAT,CAAuBC,IAAvB,EAA6BC,QAA7B,EAAuC;AACnC,MAAIC,OAAO,GAAG,KAAd,CADmC,CAEnC;AACA;;AACA,MAAIC,MAAM,GAAG,IAAIC,UAAJ,EAAb,CAJmC,CAMnC;;AACAD,EAAAA,MAAM,CAACE,gBAAP,CAAwB,MAAxB,EAAgC,YAAW;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAIC,KAAK,GAAG,IAAIC,KAAJ,EAAZ;AACAD,IAAAA,KAAK,CAACD,gBAAN,CAAuB,MAAvB,EAA+B,YAAW;AACtC;AACA;AACA;AACA;AACA;AACA;AAEA;AACAL,MAAAA,IAAI,CAACQ,UAAL,GAAkBF,KAAK,CAAChE,KAAxB;AACA0D,MAAAA,IAAI,CAACS,WAAL,GAAmBH,KAAK,CAAC/D,MAAzB,CAVsC,CAWtC;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;;AACA,UAAI2D,OAAJ,EAAa;AACT;AACAjG,QAAAA,MAAM,CAACyG,GAAP,CAAWC,eAAX,CAA2BL,KAAK,CAACM,GAAjC;AACH;;AAEDX,MAAAA,QAAQ,CAACD,IAAD,CAAR;AACH,KA1BD;AA4BAM,IAAAA,KAAK,CAACM,GAAN,GAAYV,OAAO,GAAGjG,MAAM,CAACyG,GAAP,CAAWG,eAAX,CAA2Bb,IAA3B,CAAH,GAAsCG,MAAM,CAAC1B,MAAhE;AACH,GAtCD,EAPmC,CA+CnC;;AACA0B,EAAAA,MAAM,CAACW,aAAP,CAAqBd,IAArB;AACH;;AAED,SAASe,iBAAT,CAA2BC,MAA3B,EAAmC;AAC/B,QAAMC,iBAAiB,GAAGD,MAAM,IAAIA,MAAM,CAACE,UAAP,CAAkB,GAAlB,CAAV,GAAmCF,MAAnC,GAA4C,MAAMA,MAA5E;AACA,QAAMG,eAAe,GAAG5H,YAAY,CAAC0H,iBAAD,EAAoB,eAApB,CAApC;AACA,SAAOE,eAAe,IAAIF,iBAA1B;AACH;AAED;;;;;;;;;;AAQA,SAASG,eAAT,CAAyB1B,GAAzB,EAA8B;AAC1B,SAAOA,GAAG,CACLnF,OADE,CACM,KADN,EACa,GADb,EAEFA,OAFE,CAEM,KAFN,EAEa,GAFb,EAGFA,OAHE,CAGM,MAHN,EAGc,EAHd,CAAP;AAIH;AAED;;;;;;;;;;AAQA,SAAS8G,eAAT,CAAyB3B,GAAzB,EAA8B;AAC1BA,EAAAA,GAAG,GAAG,CAACA,GAAG,GAAG,KAAP,EAAc4B,KAAd,CAAoB,CAApB,EAAuB5B,GAAG,CAACrE,MAAJ,GAAcqE,GAAG,CAACrE,MAAJ,GAAa,CAAlD,CAAN;AACA,SAAOqE,GAAG,CAACnF,OAAJ,CAAY,IAAZ,EAAkB,GAAlB,EAAuBA,OAAvB,CAA+B,IAA/B,EAAqC,GAArC,CAAP;AACH;;AAED,SAASgH,mBAAT,CAA6BC,MAA7B,EAAqC;AACjC,MAAIC,MAAM,GAAG,EAAb;AACA,MAAIC,KAAK,GAAG,IAAIC,UAAJ,CAAeH,MAAf,CAAZ;AACA,MAAII,GAAG,GAAGF,KAAK,CAACG,UAAhB;;AACA,OAAK,IAAIlF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiF,GAApB,EAAyBjF,CAAC,EAA1B,EAA8B;AAC1B8E,IAAAA,MAAM,IAAIK,MAAM,CAACC,YAAP,CAAoBL,KAAK,CAAC/E,CAAD,CAAzB,CAAV;AACH;;AACD,SAAOyE,eAAe,CAACnH,MAAM,CAAC+H,IAAP,CAAYP,MAAZ,CAAD,CAAtB;AACH;;AAED,SAASQ,oBAAT,CAA8B7H,KAA9B,EAAqC;AACjC,MAAI,CAACA,KAAL,EAAY,OAAO,KAAP;AAEZ,SAAOA,KAAK,CAAC,OAAD,CAAL,KAAmB,yBAA1B;AACH;;AAED,SAAS8H,OAAT,CAAiBC,IAAjB,EAAuBC,KAAvB,EAA8BC,IAA9B,EAAoCC,SAAS,GAAG,KAAhD,EAAuD;AACnD,SAAOA,SAAS,GAAGH,IAAI,IAAIC,KAAR,IAAiBD,IAAI,IAAIE,IAA5B,GAAmCF,IAAI,GAAGC,KAAP,IAAgBD,IAAI,GAAGE,IAA1E;AACH;;AAED,SAASE,KAAT,CAAeJ,IAAf,EAAqBC,KAArB,EAA4BC,IAA5B,EAAkC;AAC9B,MAAIF,IAAI,GAAGC,KAAX,EAAkB,OAAOA,KAAP;AAClB,MAAID,IAAI,GAAGE,IAAX,EAAiB,OAAOA,IAAP;AAEjB,SAAOF,IAAP;AACH;;AAED,SAASK,iBAAT,CAA2BC,YAA3B,EAAyC;AACrC,MAAIC,KAAK,GAAGlG,IAAI,CAACa,KAAL,CAAWoF,YAAY,GAAG,IAA1B,CAAZ;AACA,MAAIE,OAAO,GAAGnG,IAAI,CAACa,KAAL,CAAW,CAACoF,YAAY,GAAGC,KAAK,GAAG,IAAxB,IAAgC,EAA3C,CAAd;AACA,MAAIE,OAAO,GAAGH,YAAY,GAAGC,KAAK,GAAG,IAAvB,GAA8BC,OAAO,GAAG,EAAtD;;AAEA,MAAID,KAAK,GAAG,CAAR,IAAaC,OAAO,GAAG,EAA3B,EAA+B;AAC3BA,IAAAA,OAAO,GAAG,MAAMA,OAAhB;AACH;;AACD,MAAIC,OAAO,GAAG,EAAd,EAAkB;AACdA,IAAAA,OAAO,GAAG,MAAMA,OAAhB;AACH;;AAED,SAAO,CAACF,KAAK,GAAG,CAAR,GAAYA,KAAK,GAAG,GAApB,GAA0B,EAA3B,IAAiCC,OAAjC,GAA2C,GAA3C,GAAiDC,OAAxD;AACH;;AAED,SAASC,YAAT,CAAsBC,GAAtB,EAA2B3F,GAA3B,EAAgC;AAC5B2F,EAAAA,GAAG,GAAGtG,IAAI,CAACuG,IAAL,CAAUD,GAAV,CAAN;AACA3F,EAAAA,GAAG,GAAGX,IAAI,CAACa,KAAL,CAAWF,GAAX,CAAN;AACA,SAAOX,IAAI,CAACa,KAAL,CAAWb,IAAI,CAACwG,MAAL,MAAiB7F,GAAG,GAAG2F,GAAvB,CAAX,IAA0CA,GAAjD,CAH4B,CAG0B;AACzD;;AAED,SAASG,aAAT,CAAuBb,KAAvB,EAA8Bc,MAA9B,EAAsC;AAClC,MAAI,CAACd,KAAD,IAAUc,MAAd,EAAsB,OAAO,KAAP;AACtB,MAAId,KAAK,IAAI,CAACc,MAAd,EAAsB,OAAO,KAAP;AAEtB,MAAI,CAACd,KAAD,IAAU,CAACc,MAAf,EAAuB,OAAO,IAAP;AACvB,MAAId,KAAK,CAAC/G,MAAN,KAAiB,CAAjB,IAAsB6H,MAAM,CAAC7H,MAAP,KAAkB,CAA5C,EAA+C,OAAO,IAAP;AAE/C,SAAO+G,KAAK,KAAKc,MAAjB;AACH;;AAED,SAASC,aAAT,CAAuBC,KAAvB,EAA8BC,OAA9B,EAAuCC,UAAvC,EAAmD;AAC/C,MAAI3G,CAAC,GAAG,CAAR;;AACA,SAAOA,CAAC,GAAGyG,KAAK,CAAC/H,MAAV,IAAoBiI,UAAU,CAACF,KAAK,CAACzG,CAAD,CAAN,EAAW0G,OAAX,CAAV,GAAgC,CAA3D,EAA8D1G,CAAC,EAA/D,EAAmE,CAAE;;AAErE,SAAO,CAAC,GAAGyG,KAAK,CAAC9B,KAAN,CAAY,CAAZ,EAAe3E,CAAf,CAAJ,EAAuB0G,OAAvB,EAAgC,GAAGD,KAAK,CAAC9B,KAAN,CAAY3E,CAAZ,CAAnC,CAAP;AACH;;AAED,SACItC,mBADJ,EAEIF,YAFJ,EAGIO,UAHJ,EAIIF,SAJJ,EAKIS,kBALJ,EAMIK,eANJ,EAOIK,YAPJ,EAQIM,OARJ,EASIF,qBATJ,EAUIG,YAVJ,EAWIe,UAXJ,EAYIK,WAZJ,EAaIa,QAbJ,EAcImB,QAdJ,EAeIM,UAfJ,EAgBIG,aAhBJ,EAiBIgB,iBAjBJ,EAkBIQ,mBAlBJ,EAmBIU,oBAnBJ,EAoBIC,OApBJ,EAqBIK,KArBJ,EAsBIC,iBAtBJ,EAuBIK,YAvBJ,EAwBInJ,aAxBJ,EAyBIuJ,aAzBJ,EA0BIE,aA1BJ","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport { formatNumber } from 'libphonenumber-js';\nimport { PHOTO_SIZE, PHOTO_THUMBNAIL_SIZE } from '../Constants';\n\nfunction isAppleDevice() {\n    const iDevices = ['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod', 'MacIntel'];\n\n    if (!!navigator.platform) {\n        return iDevices.indexOf(navigator.platform) > -1;\n    }\n\n    return /iPad|iPhone|iPod|Mac\\sOS\\sX/.test(navigator.userAgent) && !window.MSStream;\n}\n\nfunction isConnecting(state) {\n    if (!state) return false;\n\n    switch (state['@type']) {\n        case 'connectionStateConnecting': {\n            return true;\n        }\n        case 'connectionStateConnectingToProxy': {\n            return true;\n        }\n        case 'connectionStateReady': {\n            return false;\n        }\n        case 'connectionStateUpdating': {\n            return false;\n        }\n        case 'connectionStateWaitingForNetwork': {\n            return false;\n        }\n    }\n\n    return false;\n}\n\nfunction cleanProgressStatus(status) {\n    if (!status) return status;\n\n    return status.replace('...', '').replace('…', '');\n}\n\nfunction getOSName() {\n    let OSName = 'Unknown';\n    if (window.navigator.userAgent.indexOf('Windows NT 10.0') !== -1) OSName = 'Windows 10';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.2') !== -1) OSName = 'Windows 8';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.1') !== -1) OSName = 'Windows 7';\n    if (window.navigator.userAgent.indexOf('Windows NT 6.0') !== -1) OSName = 'Windows Vista';\n    if (window.navigator.userAgent.indexOf('Windows NT 5.1') !== -1) OSName = 'Windows XP';\n    if (window.navigator.userAgent.indexOf('Windows NT 5.0') !== -1) OSName = 'Windows 2000';\n    if (window.navigator.userAgent.indexOf('Mac') !== -1) OSName = 'Mac/iOS';\n    if (window.navigator.userAgent.indexOf('X11') !== -1) OSName = 'UNIX';\n    if (window.navigator.userAgent.indexOf('Linux') !== -1) OSName = 'Linux';\n\n    return OSName;\n}\n\nfunction getBrowser() {\n    let browser_name = '';\n    let isIE = /*@cc_on!@*/ false || !!document.documentMode;\n    let isEdge = !isIE && !!window.StyleMedia;\n    if (navigator.userAgent.indexOf('Chrome') !== -1 && !isEdge) {\n        browser_name = 'Chrome';\n    } else if (navigator.userAgent.indexOf('Safari') !== -1 && !isEdge) {\n        browser_name = 'Safari';\n    } else if (navigator.userAgent.indexOf('Firefox') !== -1) {\n        browser_name = 'Firefox';\n    } else if (navigator.userAgent.indexOf('MSIE') !== -1 || !!document.documentMode === true) {\n        //IF IE > 10\n        browser_name = 'IE';\n    } else if (isEdge) {\n        browser_name = 'Edge';\n    } else {\n        browser_name = 'Unknown';\n    }\n\n    return browser_name;\n}\n\nfunction isValidPhoneNumber(phoneNumber) {\n    if (!phoneNumber) return false;\n\n    let isBad = !phoneNumber.match(/^[\\d\\-+\\s]+$/);\n    if (!isBad) {\n        phoneNumber = phoneNumber.replace(/\\D/g, '');\n        if (phoneNumber.length < 7) {\n            isBad = true;\n        }\n    }\n\n    return !isBad;\n}\n\nfunction stringToBoolean(string) {\n    switch (string.toLowerCase().trim()) {\n        case 'true':\n        case 'yes':\n        case '1':\n            return true;\n        case 'false':\n        case 'no':\n        case '0':\n        case null:\n            return false;\n        default:\n            return Boolean(string);\n    }\n}\n\nfunction orderCompare(order1, order2) {\n    let diff = order1.length - order2.length;\n    if (diff !== 0) return diff < 0 ? -1 : 1;\n    if (order1 === order2) return 0;\n\n    return order1 > order2 ? 1 : -1;\n}\n\nfunction getPhotoThumbnailSize(sizes) {\n    return getSize(sizes, PHOTO_THUMBNAIL_SIZE);\n}\n\nfunction getPhotoSize(sizes, displaySize = PHOTO_SIZE) {\n    return getSize(sizes, displaySize);\n}\n\nfunction getSize(sizes, dimension) {\n    if (!sizes) return null;\n    if (sizes.length === 0) return null;\n    if (dimension === 0) return null;\n\n    // let iSize = sizes[2];//.find(x => x.type === 'i');\n    // if (iSize){\n    //     return iSize;\n    // }\n\n    let useWidth = sizes[0].width >= sizes[0].height;\n    let diff = Math.abs(dimension - (useWidth ? sizes[0].width : sizes[0].height));\n    let index = 0;\n    for (let i = 1; i < sizes.length; i++) {\n        if (sizes[i].type === 'i' && !sizes[i].photo.local.is_downloading_completed) {\n            continue;\n        }\n\n        let currDiff = Math.abs(dimension - (useWidth ? sizes[i].width : sizes[i].height));\n        if (currDiff < diff) {\n            index = i;\n            currDiff = diff;\n        }\n    }\n\n    return sizes[index];\n}\n\nfunction getFitSize(size, max, increaseToMax = true) {\n    if (!size) return { width: 0, height: 0 };\n\n    if (!increaseToMax) {\n        if (size.width < max && size.height < max) {\n            return size;\n        }\n    }\n\n    if (size.width > size.height) {\n        return { width: max, height: Math.floor((size.height * max) / size.width) };\n    }\n\n    return { width: Math.floor((size.width * max) / size.height), height: max };\n}\n\nfunction itemsInView(scrollContainerRef, itemsContainerRef) {\n    let scrollContainer = scrollContainerRef.current;\n    let itemsContainer = itemsContainerRef ? itemsContainerRef.current : scrollContainer;\n\n    const items = [];\n    for (let i = 0; i < itemsContainer.children.length; i++) {\n        let child = itemsContainer.children[i];\n        if (\n            child.offsetTop + child.offsetHeight >= scrollContainer.scrollTop &&\n            child.offsetTop <= scrollContainer.scrollTop + scrollContainer.offsetHeight\n        ) {\n            items.push(i);\n        }\n    }\n\n    return items;\n}\n\n// Returns a function, that, when invoked, will only be triggered at most once\n// during a given window of time. Normally, the throttled function will run\n// as much as it can, without ever going more than once per `wait` duration;\n// but if you'd like to disable the execution on the leading edge, pass\n// `{leading: false}`. To disable execution on the trailing edge, ditto.\nfunction throttle(func, wait, options) {\n    var context, args, result;\n    var timeout = null;\n    var previous = 0;\n    if (!options) options = {};\n    var later = function() {\n        previous = options.leading === false ? 0 : Date.now();\n        timeout = null;\n        result = func.apply(context, args);\n        if (!timeout) context = args = null;\n    };\n    return function() {\n        var now = Date.now();\n        if (!previous && options.leading === false) previous = now;\n        var remaining = wait - (now - previous);\n        context = this;\n        args = arguments;\n        if (remaining <= 0 || remaining > wait) {\n            if (timeout) {\n                clearTimeout(timeout);\n                timeout = null;\n            }\n            previous = now;\n            result = func.apply(context, args);\n            if (!timeout) context = args = null;\n        } else if (!timeout && options.trailing !== false) {\n            timeout = setTimeout(later, remaining);\n        }\n        return result;\n    };\n}\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nfunction debounce(func, wait, immediate) {\n    var timeout;\n    return function() {\n        var context = this,\n            args = arguments;\n        var later = function() {\n            timeout = null;\n            if (!immediate) {\n                func.apply(context, args);\n            }\n        };\n        var callNow = immediate && !timeout;\n        clearTimeout(timeout);\n        timeout = setTimeout(later, wait);\n        if (callNow) {\n            func.apply(context, args);\n        }\n    };\n}\n\nfunction getFirstLetter(str) {\n    if (!str) return '';\n    for (let i = 0; i < str.length; i++) {\n        if (str[i].toUpperCase() !== str[i].toLowerCase()) {\n            return str[i];\n        } else if (str[i] >= '0' && str[i] <= '9') {\n            return str[i];\n        }\n    }\n\n    return '';\n}\n\nfunction getLetters(title) {\n    if (!title) return null;\n    if (title.length === 0) return null;\n\n    const split = title.split(' ');\n    if (split.length === 1) {\n        return getFirstLetter(split[0]);\n    }\n    if (split.length > 1) {\n        return getFirstLetter(split[0]) + getFirstLetter(split[1]);\n    }\n\n    return null;\n}\n\nfunction readImageSize(file, callback) {\n    let useBlob = false;\n    // Create a new FileReader instance\n    // https://developer.mozilla.org/en/docs/Web/API/FileReader\n    var reader = new FileReader();\n\n    // Once a file is successfully readed:\n    reader.addEventListener('load', function() {\n        // At this point `reader.result` contains already the Base64 Data-URL\n        // and we've could immediately show an image using\n        // `elPreview.insertAdjacentHTML(\"beforeend\", \"<img src='\"+ reader.result +\"'>\");`\n        // But we want to get that image's width and height px values!\n        // Since the File Object does not hold the size of an image\n        // we need to create a new image and assign it's src, so when\n        // the image is loaded we can calculate it's width and height:\n        var image = new Image();\n        image.addEventListener('load', function() {\n            // Concatenate our HTML image info\n            // var imageInfo = file.name    +' '+ // get the value of `name` from the `file` Obj\n            //     image.width  +'×'+ // But get the width from our `image`\n            //     image.height +' '+\n            //     file.type    +' '+\n            //     Math.round(file.size/1024) +'KB';\n\n            //alert(imageInfo);\n            file.photoWidth = image.width;\n            file.photoHeight = image.height;\n            // Finally append our created image and the HTML info string to our `#preview`\n            //elPreview.appendChild( this );\n            //elPreview.insertAdjacentHTML(\"beforeend\", imageInfo +'<br>');\n\n            // If we set the variable `useBlob` to true:\n            // (Data-URLs can end up being really large\n            // `src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAA...........etc`\n            // Blobs are usually faster and the image src will hold a shorter blob name\n            // src=\"blob:http%3A//example.com/2a303acf-c34c-4d0a-85d4-2136eef7d723\"\n            if (useBlob) {\n                // Free some memory for optimal performance\n                window.URL.revokeObjectURL(image.src);\n            }\n\n            callback(file);\n        });\n\n        image.src = useBlob ? window.URL.createObjectURL(file) : reader.result;\n    });\n\n    // https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsDataURL\n    reader.readAsDataURL(file);\n}\n\nfunction formatPhoneNumber(number) {\n    const unformattedNumber = number && number.startsWith('+') ? number : '+' + number;\n    const formattedNumber = formatNumber(unformattedNumber, 'International');\n    return formattedNumber || unformattedNumber;\n}\n\n/**\n * use this to make a Base64 encoded string URL friendly,\n * i.e. '+' and '/' are replaced with '-' and '_' also any trailing '='\n * characters are removed\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\nfunction Base64EncodeUrl(str) {\n    return str\n        .replace(/\\+/g, '-')\n        .replace(/\\//g, '_')\n        .replace(/\\=+$/, '');\n}\n\n/**\n * Use this to recreate a Base64 encoded string that was made URL friendly\n * using Base64EncodeurlFriendly.\n * '-' and '_' are replaced with '+' and '/' and also it is padded with '+'\n *\n * @param {String} str the encoded string\n * @returns {String} the URL friendly encoded String\n */\nfunction Base64DecodeUrl(str) {\n    str = (str + '===').slice(0, str.length + (str.length % 4));\n    return str.replace(/-/g, '+').replace(/_/g, '/');\n}\n\nfunction arrayBufferToBase64(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    var len = bytes.byteLength;\n    for (var i = 0; i < len; i++) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return Base64EncodeUrl(window.btoa(binary));\n}\n\nfunction isAuthorizationReady(state) {\n    if (!state) return false;\n\n    return state['@type'] === 'authorizationStateReady';\n}\n\nfunction between(item, first, last, inclusive = false) {\n    return inclusive ? item >= first && item <= last : item > first && item < last;\n}\n\nfunction clamp(item, first, last) {\n    if (item < first) return first;\n    if (item > last) return last;\n\n    return item;\n}\n\nfunction getDurationString(secondsTotal) {\n    let hours = Math.floor(secondsTotal / 3600);\n    let minutes = Math.floor((secondsTotal - hours * 3600) / 60);\n    let seconds = secondsTotal - hours * 3600 - minutes * 60;\n\n    if (hours > 0 && minutes < 10) {\n        minutes = '0' + minutes;\n    }\n    if (seconds < 10) {\n        seconds = '0' + seconds;\n    }\n\n    return (hours > 0 ? hours + ':' : '') + minutes + ':' + seconds;\n}\n\nfunction getRandomInt(min, max) {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min)) + min; //The maximum is exclusive and the minimum is inclusive\n}\n\nfunction historyEquals(first, second) {\n    if (!first && second) return false;\n    if (first && !second) return false;\n\n    if (!first && !second) return true;\n    if (first.length === 0 && second.length === 0) return true;\n\n    return first === second;\n}\n\nfunction insertByOrder(array, element, comparator) {\n    let i = 0;\n    for (; i < array.length && comparator(array[i], element) < 0; i++) {}\n\n    return [...array.slice(0, i), element, ...array.slice(i)];\n}\n\nexport {\n    cleanProgressStatus,\n    isConnecting,\n    getBrowser,\n    getOSName,\n    isValidPhoneNumber,\n    stringToBoolean,\n    orderCompare,\n    getSize,\n    getPhotoThumbnailSize,\n    getPhotoSize,\n    getFitSize,\n    itemsInView,\n    throttle,\n    debounce,\n    getLetters,\n    readImageSize,\n    formatPhoneNumber,\n    arrayBufferToBase64,\n    isAuthorizationReady,\n    between,\n    clamp,\n    getDurationString,\n    getRandomInt,\n    isAppleDevice,\n    historyEquals,\n    insertByOrder\n};\n"]},"metadata":{},"sourceType":"module"}
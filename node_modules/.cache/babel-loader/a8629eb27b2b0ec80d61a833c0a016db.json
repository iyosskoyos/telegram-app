{"ast":null,"code":"import _classCallCheck from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import classNames from'classnames';import withStyles from'@material-ui/core/styles/withStyles';import{isUserOnline}from'../../Utils/User';import{getChatUserId}from'../../Utils/Chat';import UserStore from'./../../Stores/UserStore';import'./ChatStatus.css';var styles=function styles(theme){return{root:{background:theme.palette.type==='dark'?theme.palette.background.default:'#FFFFFF',borderRadius:'50%',overflow:'hidden'},icon:{background:'transparent',width:'100%',height:'100%',boxSizing:'border-box'},iconIndicator:{width:'100%',height:'100%',borderRadius:'50%',background:'#80d066'}};};var ChatStatus=/*#__PURE__*/function(_React$Component){_inherits(ChatStatus,_React$Component);function ChatStatus(props){var _this;_classCallCheck(this,ChatStatus);_this=_possibleConstructorReturn(this,_getPrototypeOf(ChatStatus).call(this,props));_this.onUpdateUserStatus=function(update){var userId=_this.state.userId;var user_id=update.user_id;if(user_id!==userId)return;var user=UserStore.get(userId);if(!user)return;_this.setState({online:isUserOnline(user)});};var _userId=getChatUserId(props.chatId);var _user=UserStore.get(_userId);_this.state={userId:_userId,online:isUserOnline(_user)};return _this;}_createClass(ChatStatus,[{key:\"componentDidMount\",value:function componentDidMount(){UserStore.on('updateUserStatus',this.onUpdateUserStatus);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){UserStore.removeListener('updateUserStatus',this.onUpdateUserStatus);}},{key:\"render\",value:function render(){var _this$props=this.props,classes=_this$props.classes,size=_this$props.size,borderSize=_this$props.borderSize,className=_this$props.className;var online=this.state.online;if(!online)return null;return React.createElement(\"div\",{className:classNames(className,classes.root),style:{width:size,height:size}},React.createElement(\"div\",{className:classes.icon,style:{padding:borderSize}},React.createElement(\"div\",{className:classes.iconIndicator})));}}]);return ChatStatus;}(React.Component);ChatStatus.defaultProps={size:12,borderSize:2};export default withStyles(styles)(ChatStatus);","map":{"version":3,"sources":["/home/me-admin/Downloads/my-app/src/Components/Tile/ChatStatus.js"],"names":["React","classNames","withStyles","isUserOnline","getChatUserId","UserStore","styles","theme","root","background","palette","type","default","borderRadius","overflow","icon","width","height","boxSizing","iconIndicator","ChatStatus","props","onUpdateUserStatus","update","userId","state","user_id","user","get","setState","online","chatId","on","removeListener","classes","size","borderSize","className","padding","Component","defaultProps"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport { isUserOnline } from '../../Utils/User';\nimport { getChatUserId } from '../../Utils/Chat';\nimport UserStore from './../../Stores/UserStore';\nimport './ChatStatus.css';\n\nconst styles = theme => ({\n    root: {\n        background: theme.palette.type === 'dark' ? theme.palette.background.default : '#FFFFFF',\n        borderRadius: '50%',\n        overflow: 'hidden'\n    },\n    icon: {\n        background: 'transparent',\n        width: '100%',\n        height: '100%',\n        boxSizing: 'border-box'\n    },\n    iconIndicator: {\n        width: '100%',\n        height: '100%',\n        borderRadius: '50%',\n        background: '#80d066'\n    }\n});\n\nclass ChatStatus extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const userId = getChatUserId(props.chatId);\n        const user = UserStore.get(userId);\n\n        this.state = {\n            userId: userId,\n            online: isUserOnline(user)\n        };\n    }\n\n    componentDidMount() {\n        UserStore.on('updateUserStatus', this.onUpdateUserStatus);\n    }\n\n    componentWillUnmount() {\n        UserStore.removeListener('updateUserStatus', this.onUpdateUserStatus);\n    }\n\n    onUpdateUserStatus = update => {\n        const { userId } = this.state;\n        const { user_id } = update;\n        if (user_id !== userId) return;\n\n        const user = UserStore.get(userId);\n        if (!user) return;\n\n        this.setState({ online: isUserOnline(user) });\n    };\n\n    render() {\n        const { classes, size, borderSize, className } = this.props;\n        const { online } = this.state;\n        if (!online) return null;\n\n        return (\n            <div className={classNames(className, classes.root)} style={{ width: size, height: size }}>\n                <div className={classes.icon} style={{ padding: borderSize }}>\n                    <div className={classes.iconIndicator} />\n                </div>\n            </div>\n        );\n    }\n}\n\nChatStatus.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    size: PropTypes.number,\n    borderSize: PropTypes.number\n};\n\nChatStatus.defaultProps = {\n    size: 12,\n    borderSize: 2\n};\n\nexport default withStyles(styles)(ChatStatus);\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import SaveIcon from'@material-ui/icons/GetApp';import MediaViewerFooterButton from'./MediaViewerFooterButton';import FileStore from'../../Stores/FileStore';import'./MediaViewerFooterButton.css';var iconStyle={padding:20,color:'white'};var MediaViewerDownloadButton=/*#__PURE__*/function(_React$Component){_inherits(MediaViewerDownloadButton,_React$Component);function MediaViewerDownloadButton(props){var _this;_classCallCheck(this,MediaViewerDownloadButton);_this=_possibleConstructorReturn(this,_getPrototypeOf(MediaViewerDownloadButton).call(this,props));_this.onClientUpdateMediaBlob=function(update){var fileId=_this.state.fileId;if(fileId===update.fileId){_this.setState({disabled:MediaViewerDownloadButton.saveDisabled(fileId)});}};_this.handleClick=function(event){event.stopPropagation();var onClick=_this.props.onClick;var disabled=_this.state.disabled;if(disabled)return;onClick(event);};var _fileId=props.fileId;_this.state={prevPropsFileId:_fileId,fileId:_fileId,disabled:MediaViewerDownloadButton.saveDisabled(_fileId)};return _this;}_createClass(MediaViewerDownloadButton,[{key:\"componentDidMount\",value:function componentDidMount(){FileStore.on('clientUpdateAnimationBlob',this.onClientUpdateMediaBlob);FileStore.on('clientUpdateChatBlob',this.onClientUpdateMediaBlob);FileStore.on('clientUpdateDocumentBlob',this.onClientUpdateMediaBlob);FileStore.on('clientUpdatePhotoBlob',this.onClientUpdateMediaBlob);FileStore.on('clientUpdateUserBlob',this.onClientUpdateMediaBlob);FileStore.on('clientUpdateVideoBlob',this.onClientUpdateMediaBlob);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){FileStore.removeListener('clientUpdateAnimationBlob',this.onClientUpdateMediaBlob);FileStore.removeListener('clientUpdateChatBlob',this.onClientUpdateMediaBlob);FileStore.removeListener('clientUpdateDocumentBlob',this.onClientUpdateMediaBlob);FileStore.removeListener('clientUpdatePhotoBlob',this.onClientUpdateMediaBlob);FileStore.removeListener('clientUpdateUserBlob',this.onClientUpdateMediaBlob);FileStore.removeListener('clientUpdateVideoBlob',this.onClientUpdateMediaBlob);}},{key:\"render\",value:function render(){var title=this.props.title;var disabled=this.state.disabled;return React.createElement(MediaViewerFooterButton,{disabled:disabled,title:title,onClick:this.handleClick},React.createElement(SaveIcon,{style:iconStyle}));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){var fileId=props.fileId;var prevPropsFileId=state.prevPropsFileId;if(fileId!==prevPropsFileId){return{prevPropsFileId:fileId,fileId:fileId,disabled:MediaViewerDownloadButton.saveDisabled(fileId)};}return null;}}]);return MediaViewerDownloadButton;}(React.Component);MediaViewerDownloadButton.saveDisabled=function(fileId){return!Boolean(FileStore.getBlob(fileId));};export default MediaViewerDownloadButton;","map":{"version":3,"sources":["/home/me-admin/Downloads/my-app/src/Components/Viewer/MediaViewerDownloadButton.js"],"names":["React","SaveIcon","MediaViewerFooterButton","FileStore","iconStyle","padding","color","MediaViewerDownloadButton","props","onClientUpdateMediaBlob","update","fileId","state","setState","disabled","saveDisabled","handleClick","event","stopPropagation","onClick","prevPropsFileId","on","removeListener","title","Component","Boolean","getBlob"],"mappings":"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","sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport SaveIcon from '@material-ui/icons/GetApp';\nimport MediaViewerFooterButton from './MediaViewerFooterButton';\nimport FileStore from '../../Stores/FileStore';\nimport './MediaViewerFooterButton.css';\n\nconst iconStyle = {\n    padding: 20,\n    color: 'white'\n};\n\nclass MediaViewerDownloadButton extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { fileId } = props;\n\n        this.state = {\n            prevPropsFileId: fileId,\n            fileId: fileId,\n            disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n        };\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { fileId } = props;\n        const { prevPropsFileId } = state;\n\n        if (fileId !== prevPropsFileId) {\n            return {\n                prevPropsFileId: fileId,\n                fileId: fileId,\n                disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n            };\n        }\n\n        return null;\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateChatBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateDocumentBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateUserBlob', this.onClientUpdateMediaBlob);\n        FileStore.on('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateAnimationBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateChatBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateDocumentBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdatePhotoBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateUserBlob', this.onClientUpdateMediaBlob);\n        FileStore.removeListener('clientUpdateVideoBlob', this.onClientUpdateMediaBlob);\n    }\n\n    onClientUpdateMediaBlob = update => {\n        const { fileId } = this.state;\n\n        if (fileId === update.fileId) {\n            this.setState({\n                disabled: MediaViewerDownloadButton.saveDisabled(fileId)\n            });\n        }\n    };\n\n    static saveDisabled = fileId => {\n        return !Boolean(FileStore.getBlob(fileId));\n    };\n\n    handleClick = event => {\n        event.stopPropagation();\n\n        const { onClick } = this.props;\n        const { disabled } = this.state;\n        if (disabled) return;\n\n        onClick(event);\n    };\n\n    render() {\n        const { title } = this.props;\n        const { disabled } = this.state;\n\n        return (\n            <MediaViewerFooterButton disabled={disabled} title={title} onClick={this.handleClick}>\n                <SaveIcon style={iconStyle} />\n            </MediaViewerFooterButton>\n        );\n    }\n}\n\nMediaViewerDownloadButton.propTypes = {\n    fileId: PropTypes.number.isRequired,\n    onClick: PropTypes.func.isRequired,\n    title: PropTypes.string\n};\n\nexport default MediaViewerDownloadButton;\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"var _jsxFileName = \"/home/chilly/Projects/Capacitor/telegram-app/src/Components/ColumnLeft/UpdatePanel.js\";\n\n/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Button from '@material-ui/core/Button';\nimport ApplicationStore from '../../Stores/ApplicationStore';\nconst styles = {\n  root: {\n    margin: 0,\n    padding: '24px',\n    width: '100%',\n    borderRadius: 0,\n    color: 'white',\n    maxHeight: '65px'\n  }\n};\n\nclass UpdatePanel extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.onClientUpdateNewContentAvailable = () => {\n      this.setState({\n        newContentAvailable: true\n      });\n    };\n\n    this.handleUpdate = () => {\n      if (this.handled) return;\n      this.handled = true;\n      setTimeout(() => {\n        window.location.reload();\n      }, 250);\n    };\n\n    this.state = {\n      newContentAvailable: false\n    };\n  }\n\n  componentDidMount() {\n    ApplicationStore.on('clientUpdateNewContentAvailable', this.onClientUpdateNewContentAvailable);\n  }\n\n  componentWillUnmount() {\n    ApplicationStore.removeListener('clientUpdateNewContentAvailable', this.onClientUpdateNewContentAvailable);\n  }\n\n  render() {\n    const newContentAvailable = this.state.newContentAvailable;\n    const classes = this.props.classes;\n    const content = newContentAvailable ? React.createElement(Button, {\n      variant: \"contained\",\n      color: \"primary\",\n      className: classes.root,\n      onClick: this.handleUpdate,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }, \"Update\") : null;\n    return React.createElement(React.Fragment, null, content);\n  }\n\n}\n\nexport default withStyles(styles)(UpdatePanel);","map":{"version":3,"sources":["/home/chilly/Projects/Capacitor/telegram-app/src/Components/ColumnLeft/UpdatePanel.js"],"names":["React","withStyles","Button","ApplicationStore","styles","root","margin","padding","width","borderRadius","color","maxHeight","UpdatePanel","Component","constructor","props","onClientUpdateNewContentAvailable","setState","newContentAvailable","handleUpdate","handled","setTimeout","window","location","reload","state","componentDidMount","on","componentWillUnmount","removeListener","render","classes","content"],"mappings":";;AAAA;;;;;;AAOA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,qCAAvB;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,OAAOC,gBAAP,MAA6B,+BAA7B;AAEA,MAAMC,MAAM,GAAG;AACXC,EAAAA,IAAI,EAAE;AACFC,IAAAA,MAAM,EAAE,CADN;AAEFC,IAAAA,OAAO,EAAE,MAFP;AAGFC,IAAAA,KAAK,EAAE,MAHL;AAIFC,IAAAA,YAAY,EAAE,CAJZ;AAKFC,IAAAA,KAAK,EAAE,OALL;AAMFC,IAAAA,SAAS,EAAE;AANT;AADK,CAAf;;AAWA,MAAMC,WAAN,SAA0BZ,KAAK,CAACa,SAAhC,CAA0C;AACtCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAgBnBC,iCAhBmB,GAgBiB,MAAM;AACtC,WAAKC,QAAL,CAAc;AAAEC,QAAAA,mBAAmB,EAAE;AAAvB,OAAd;AACH,KAlBkB;;AAAA,SAoBnBC,YApBmB,GAoBJ,MAAM;AACjB,UAAI,KAAKC,OAAT,EAAkB;AAElB,WAAKA,OAAL,GAAe,IAAf;AACAC,MAAAA,UAAU,CAAC,MAAM;AACbC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACH,OAFS,EAEP,GAFO,CAAV;AAGH,KA3BkB;;AAGf,SAAKC,KAAL,GAAa;AACTP,MAAAA,mBAAmB,EAAE;AADZ,KAAb;AAGH;;AAEDQ,EAAAA,iBAAiB,GAAG;AAChBvB,IAAAA,gBAAgB,CAACwB,EAAjB,CAAoB,iCAApB,EAAuD,KAAKX,iCAA5D;AACH;;AAEDY,EAAAA,oBAAoB,GAAG;AACnBzB,IAAAA,gBAAgB,CAAC0B,cAAjB,CAAgC,iCAAhC,EAAmE,KAAKb,iCAAxE;AACH;;AAeDc,EAAAA,MAAM,GAAG;AAAA,UACGZ,mBADH,GAC2B,KAAKO,KADhC,CACGP,mBADH;AAAA,UAEGa,OAFH,GAEe,KAAKhB,KAFpB,CAEGgB,OAFH;AAIL,UAAMC,OAAO,GAAGd,mBAAmB,GAC/B,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAC,WAAhB;AAA4B,MAAA,KAAK,EAAC,SAAlC;AAA4C,MAAA,SAAS,EAAEa,OAAO,CAAC1B,IAA/D;AAAqE,MAAA,OAAO,EAAE,KAAKc,YAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAD+B,GAI/B,IAJJ;AAMA,WAAO,0CAAGa,OAAH,CAAP;AACH;;AAzCqC;;AA4C1C,eAAe/B,UAAU,CAACG,MAAD,CAAV,CAAmBQ,WAAnB,CAAf","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Button from '@material-ui/core/Button';\nimport ApplicationStore from '../../Stores/ApplicationStore';\n\nconst styles = {\n    root: {\n        margin: 0,\n        padding: '24px',\n        width: '100%',\n        borderRadius: 0,\n        color: 'white',\n        maxHeight: '65px'\n    }\n};\n\nclass UpdatePanel extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            newContentAvailable: false\n        };\n    }\n\n    componentDidMount() {\n        ApplicationStore.on('clientUpdateNewContentAvailable', this.onClientUpdateNewContentAvailable);\n    }\n\n    componentWillUnmount() {\n        ApplicationStore.removeListener('clientUpdateNewContentAvailable', this.onClientUpdateNewContentAvailable);\n    }\n\n    onClientUpdateNewContentAvailable = () => {\n        this.setState({ newContentAvailable: true });\n    };\n\n    handleUpdate = () => {\n        if (this.handled) return;\n\n        this.handled = true;\n        setTimeout(() => {\n            window.location.reload();\n        }, 250);\n    };\n\n    render() {\n        const { newContentAvailable } = this.state;\n        const { classes } = this.props;\n\n        const content = newContentAvailable ? (\n            <Button variant='contained' color='primary' className={classes.root} onClick={this.handleUpdate}>\n                Update\n            </Button>\n        ) : null;\n\n        return <>{content}</>;\n    }\n}\n\nexport default withStyles(styles)(UpdatePanel);\n"]},"metadata":{},"sourceType":"module"}
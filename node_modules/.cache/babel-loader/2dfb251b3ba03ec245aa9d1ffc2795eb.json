{"ast":null,"code":"import _classCallCheck from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import classNames from'classnames';import withStyles from'@material-ui/core/styles/withStyles';import FileProgress from'../../Components/Viewer/FileProgress';import{getSrc}from'../../Utils/File';import FileStore from'../../Stores/FileStore';import'./DocumentTile.css';var styles=function styles(theme){return{background:{background:theme.palette.primary.main,borderRadius:'50%',width:48,height:48}};};var DocumentTile=/*#__PURE__*/function(_React$Component){_inherits(DocumentTile,_React$Component);function DocumentTile(props){var _this;_classCallCheck(this,DocumentTile);_this=_possibleConstructorReturn(this,_getPrototypeOf(DocumentTile).call(this,props));_this.onClientUpdateDocumentThumbnailBlob=function(update){var thumbnail=_this.props.thumbnail;if(!thumbnail)return;var file=thumbnail.photo;if(!file)return;var fileId=update.fileId;if(file.id!==fileId){return;}_this.forceUpdate();};_this.handleLoad=function(){_this.setState({loaded:true});};_this.state={loaded:false};return _this;}_createClass(DocumentTile,[{key:\"componentDidMount\",value:function componentDidMount(){FileStore.on('clientUpdateDocumentThumbnailBlob',this.onClientUpdateDocumentThumbnailBlob);FileStore.on('clientUpdateAudioThumbnailBlob',this.onClientUpdateDocumentThumbnailBlob);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){FileStore.removeListener('clientUpdateDocumentThumbnailBlob',this.onClientUpdateDocumentThumbnailBlob);FileStore.removeListener('clientUpdateAudioThumbnailBlob',this.onClientUpdateDocumentThumbnailBlob);}},{key:\"render\",value:function render(){var _this$props=this.props,classes=_this$props.classes,thumbnail=_this$props.thumbnail,file=_this$props.file,icon=_this$props.icon,completeIcon=_this$props.completeIcon,openMedia=_this$props.openMedia;var loaded=this.state.loaded;var thumbnailSrc=getSrc(thumbnail?thumbnail.photo:null);var className=classNames('tile-photo',{'document-tile-background':!thumbnailSrc});var tileLoaded=thumbnailSrc&&loaded;return React.createElement(\"div\",{className:\"document-tile\",onClick:openMedia},!tileLoaded&&React.createElement(\"div\",{className:classes.background}),thumbnailSrc&&React.createElement(\"img\",{className:className,src:thumbnailSrc,onLoad:this.handleLoad,draggable:false,alt:\"\"}),file&&React.createElement(FileProgress,{file:file,thumbnailSrc:thumbnailSrc,download:true,upload:true,cancelButton:true,zIndex:1,icon:icon,completeIcon:completeIcon}));}}]);return DocumentTile;}(React.Component);export default withStyles(styles,{withTheme:true})(DocumentTile);","map":{"version":3,"sources":["/home/me-admin/Downloads/my-app/src/Components/Tile/DocumentTile.js"],"names":["React","classNames","withStyles","FileProgress","getSrc","FileStore","styles","theme","background","palette","primary","main","borderRadius","width","height","DocumentTile","props","onClientUpdateDocumentThumbnailBlob","update","thumbnail","file","photo","fileId","id","forceUpdate","handleLoad","setState","loaded","state","on","removeListener","classes","icon","completeIcon","openMedia","thumbnailSrc","className","tileLoaded","Component","withTheme"],"mappings":"wkBAAA;;;;;GAOA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,qCAAvB,CACA,MAAOC,CAAAA,YAAP,KAAyB,sCAAzB,CACA,OAASC,MAAT,KAAuB,kBAAvB,CACA,MAAOC,CAAAA,SAAP,KAAsB,wBAAtB,CACA,MAAO,oBAAP,CAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,CAAAC,KAAK,QAAK,CACrBC,UAAU,CAAE,CACRA,UAAU,CAAED,KAAK,CAACE,OAAN,CAAcC,OAAd,CAAsBC,IAD1B,CAERC,YAAY,CAAE,KAFN,CAGRC,KAAK,CAAE,EAHC,CAIRC,MAAM,CAAE,EAJA,CADS,CAAL,EAApB,C,GASMC,CAAAA,Y,kFACF,sBAAYC,KAAZ,CAAmB,8CACf,8EAAMA,KAAN,GADe,MAkBnBC,mCAlBmB,CAkBmB,SAAAC,MAAM,CAAI,IACpCC,CAAAA,SADoC,CACtB,MAAKH,KADiB,CACpCG,SADoC,CAE5C,GAAI,CAACA,SAAL,CAAgB,OAEhB,GAAMC,CAAAA,IAAI,CAAGD,SAAS,CAACE,KAAvB,CACA,GAAI,CAACD,IAAL,CAAW,OALiC,GAOpCE,CAAAA,MAPoC,CAOzBJ,MAPyB,CAOpCI,MAPoC,CAS5C,GAAIF,IAAI,CAACG,EAAL,GAAYD,MAAhB,CAAwB,CACpB,OACH,CAED,MAAKE,WAAL,GACH,CAhCkB,OAkCnBC,UAlCmB,CAkCN,UAAM,CACf,MAAKC,QAAL,CAAc,CAAEC,MAAM,CAAE,IAAV,CAAd,EACH,CApCkB,CAGf,MAAKC,KAAL,CAAa,CACTD,MAAM,CAAE,KADC,CAAb,CAHe,aAMlB,C,sFAEmB,CAChBtB,SAAS,CAACwB,EAAV,CAAa,mCAAb,CAAkD,KAAKZ,mCAAvD,EACAZ,SAAS,CAACwB,EAAV,CAAa,gCAAb,CAA+C,KAAKZ,mCAApD,EACH,C,mEAEsB,CACnBZ,SAAS,CAACyB,cAAV,CAAyB,mCAAzB,CAA8D,KAAKb,mCAAnE,EACAZ,SAAS,CAACyB,cAAV,CAAyB,gCAAzB,CAA2D,KAAKb,mCAAhE,EACH,C,uCAsBQ,iBAC+D,KAAKD,KADpE,CACGe,OADH,aACGA,OADH,CACYZ,SADZ,aACYA,SADZ,CACuBC,IADvB,aACuBA,IADvB,CAC6BY,IAD7B,aAC6BA,IAD7B,CACmCC,YADnC,aACmCA,YADnC,CACiDC,SADjD,aACiDA,SADjD,IAEGP,CAAAA,MAFH,CAEc,KAAKC,KAFnB,CAEGD,MAFH,CAIL,GAAMQ,CAAAA,YAAY,CAAG/B,MAAM,CAACe,SAAS,CAAGA,SAAS,CAACE,KAAb,CAAqB,IAA/B,CAA3B,CACA,GAAMe,CAAAA,SAAS,CAAGnC,UAAU,CAAC,YAAD,CAAe,CAAE,2BAA4B,CAACkC,YAA/B,CAAf,CAA5B,CACA,GAAME,CAAAA,UAAU,CAAGF,YAAY,EAAIR,MAAnC,CAEA,MACI,4BAAK,SAAS,CAAC,eAAf,CAA+B,OAAO,CAAEO,SAAxC,EACK,CAACG,UAAD,EAAe,2BAAK,SAAS,CAAEN,OAAO,CAACvB,UAAxB,EADpB,CAEK2B,YAAY,EACT,2BAAK,SAAS,CAAEC,SAAhB,CAA2B,GAAG,CAAED,YAAhC,CAA8C,MAAM,CAAE,KAAKV,UAA3D,CAAuE,SAAS,CAAE,KAAlF,CAAyF,GAAG,CAAC,EAA7F,EAHR,CAKKL,IAAI,EACD,oBAAC,YAAD,EACI,IAAI,CAAEA,IADV,CAEI,YAAY,CAAEe,YAFlB,CAGI,QAAQ,KAHZ,CAII,MAAM,KAJV,CAKI,YAAY,KALhB,CAMI,MAAM,CAAE,CANZ,CAOI,IAAI,CAAEH,IAPV,CAQI,YAAY,CAAEC,YARlB,EANR,CADJ,CAoBH,C,0BAnEsBjC,KAAK,CAACsC,S,EA8EjC,cAAepC,CAAAA,UAAU,CAACI,MAAD,CAAS,CAAEiC,SAAS,CAAE,IAAb,CAAT,CAAV,CAAwCxB,YAAxC,CAAf","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport FileProgress from '../../Components/Viewer/FileProgress';\nimport { getSrc } from '../../Utils/File';\nimport FileStore from '../../Stores/FileStore';\nimport './DocumentTile.css';\n\nconst styles = theme => ({\n    background: {\n        background: theme.palette.primary.main,\n        borderRadius: '50%',\n        width: 48,\n        height: 48\n    }\n});\n\nclass DocumentTile extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            loaded: false\n        };\n    }\n\n    componentDidMount() {\n        FileStore.on('clientUpdateDocumentThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n        FileStore.on('clientUpdateAudioThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n    }\n\n    componentWillUnmount() {\n        FileStore.removeListener('clientUpdateDocumentThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n        FileStore.removeListener('clientUpdateAudioThumbnailBlob', this.onClientUpdateDocumentThumbnailBlob);\n    }\n\n    onClientUpdateDocumentThumbnailBlob = update => {\n        const { thumbnail } = this.props;\n        if (!thumbnail) return;\n\n        const file = thumbnail.photo;\n        if (!file) return;\n\n        const { fileId } = update;\n\n        if (file.id !== fileId) {\n            return;\n        }\n\n        this.forceUpdate();\n    };\n\n    handleLoad = () => {\n        this.setState({ loaded: true });\n    };\n\n    render() {\n        const { classes, thumbnail, file, icon, completeIcon, openMedia } = this.props;\n        const { loaded } = this.state;\n\n        const thumbnailSrc = getSrc(thumbnail ? thumbnail.photo : null);\n        const className = classNames('tile-photo', { 'document-tile-background': !thumbnailSrc });\n        const tileLoaded = thumbnailSrc && loaded;\n\n        return (\n            <div className='document-tile' onClick={openMedia}>\n                {!tileLoaded && <div className={classes.background} />}\n                {thumbnailSrc && (\n                    <img className={className} src={thumbnailSrc} onLoad={this.handleLoad} draggable={false} alt='' />\n                )}\n                {file && (\n                    <FileProgress\n                        file={file}\n                        thumbnailSrc={thumbnailSrc}\n                        download\n                        upload\n                        cancelButton\n                        zIndex={1}\n                        icon={icon}\n                        completeIcon={completeIcon}\n                    />\n                )}\n            </div>\n        );\n    }\n}\n\nDocumentTile.propTypes = {\n    thumbnail: PropTypes.object,\n    file: PropTypes.object,\n    openMedia: PropTypes.func,\n    icon: PropTypes.node,\n    completeIcon: PropTypes.node\n};\n\nexport default withStyles(styles, { withTheme: true })(DocumentTile);\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _toConsumableArray from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/yosuahalim/Documents/Projects/telegram-app/node_modules/@babel/runtime/helpers/esm/inherits\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import{withTranslation}from'react-i18next';import Popover from'@material-ui/core/Popover';import MenuItem from'@material-ui/core/MenuItem';import MenuList from'@material-ui/core/MenuList';import Button from'@material-ui/core/Button';import Dialog from'@material-ui/core/Dialog';import DialogActions from'@material-ui/core/DialogActions';import DialogContent from'@material-ui/core/DialogContent';import DialogContentText from'@material-ui/core/DialogContentText';import DialogTitle from'@material-ui/core/DialogTitle';import PollOption from'./PollOption';import{cancelPollAnswer,setPollAnswer,stopPoll}from'../../../Actions/Poll';import MessageStore from'./../../../Stores/MessageStore';import'./Poll.css';var Poll=/*#__PURE__*/function(_React$Component){_inherits(Poll,_React$Component);function Poll(){var _getPrototypeOf2;var _this;_classCallCheck(this,Poll);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Poll)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={dialog:false,contextMenu:false,left:0,top:0};_this.getTotalVoterCountString=function(count){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:function(key){return key;};if(!count)return t('NoVotes');if(count===1)return'1 vote';return count+' votes';};_this.handleVote=function(index){var _this$props=_this.props,chatId=_this$props.chatId,messageId=_this$props.messageId;setPollAnswer(chatId,messageId,[index]);};_this.handleUnvote=function(event){if(event){event.stopPropagation();}var _this$props2=_this.props,chatId=_this$props2.chatId,messageId=_this$props2.messageId,poll=_this$props2.poll;var contextMenu=_this.state.contextMenu;if(contextMenu){_this.handleCloseContextMenu();}var is_closed=poll.is_closed;if(is_closed)return;cancelPollAnswer(chatId,messageId);};_this.handleStopPoll=function(event){event.stopPropagation();var _this$props3=_this.props,chatId=_this$props3.chatId,messageId=_this$props3.messageId;var dialog=_this.state.dialog;if(dialog){_this.setState({dialog:false});}stopPoll(chatId,messageId);};_this.handleDialog=function(event){var dialog=_this.state.dialog;if(dialog)return;_this.setState({dialog:true,contextMenu:false});};_this.handleCloseDialog=function(event){if(event){event.stopPropagation();}_this.setState({dialog:false});};_this.handleContextMenu=function(event){var poll=_this.props.poll;var is_closed=poll.is_closed;if(is_closed)return;if(event){event.preventDefault();event.stopPropagation();}var contextMenu=_this.state.contextMenu;if(contextMenu){_this.setState({contextMenu:false});}else{_this.setState({contextMenu:true,left:event.clientX,top:event.clientY});}};_this.handleCloseContextMenu=function(event){if(event){event.stopPropagation();}_this.setState({contextMenu:false});};return _this;}_createClass(Poll,[{key:\"render\",value:function render(){var _this2=this;var _this$props4=this.props,chatId=_this$props4.chatId,messageId=_this$props4.messageId,poll=_this$props4.poll,t=_this$props4.t;var _this$state=this.state,left=_this$state.left,top=_this$state.top,contextMenu=_this$state.contextMenu,dialog=_this$state.dialog;var question=poll.question,options=poll.options,total_voter_count=poll.total_voter_count,is_closed=poll.is_closed;var message=MessageStore.get(chatId,messageId);if(!message)return null;var canUnvote=!is_closed&&options.some(function(x){return x.is_chosen||x.is_being_chosen;});var canStopPoll=message&&message.can_be_edited;var canBeSelected=!is_closed&&options.every(function(x){return!x.is_chosen;});var maxVoterCount=Math.max.apply(Math,_toConsumableArray(options.map(function(x){return x.voter_count;})));return React.createElement(\"div\",{className:\"poll\",onContextMenu:this.handleContextMenu},React.createElement(\"div\",{className:\"poll-question\"},React.createElement(\"span\",{className:\"poll-question-title\"},question),React.createElement(\"span\",{className:\"subtitle\"},is_closed?t('FinalResults'):t('AnonymousPoll'))),React.createElement(\"div\",{className:\"poll-options\"},options.map(function(x,index){return React.createElement(PollOption,{key:index,option:x,canBeSelected:canBeSelected,closed:is_closed,maxVoterCount:maxVoterCount,onVote:function onVote(){return _this2.handleVote(index);},onUnvote:_this2.handleUnvote});})),React.createElement(\"div\",{className:\"poll-total-count subtitle\"},this.getTotalVoterCountString(total_voter_count,t)),React.createElement(Popover,{open:contextMenu&&(canUnvote||canStopPoll),onClose:this.handleCloseContextMenu,anchorReference:\"anchorPosition\",anchorPosition:{top:top,left:left},anchorOrigin:{vertical:'bottom',horizontal:'right'},transformOrigin:{vertical:'top',horizontal:'left'}},React.createElement(MenuList,{onClick:function onClick(e){return e.stopPropagation();}},canUnvote&&React.createElement(MenuItem,{onClick:this.handleUnvote},t('Unvote')),canStopPoll&&React.createElement(MenuItem,{onClick:this.handleDialog},t('StopPoll')))),React.createElement(Dialog,{transitionDuration:0,open:dialog,onClose:this.handleCloseDialog,\"aria-labelledby\":\"form-dialog-title\"},React.createElement(DialogTitle,{id:\"form-dialog-title\"},t('StopPollAlertTitle')),React.createElement(DialogContent,null,React.createElement(DialogContentText,null,t('StopPollAlertText'))),React.createElement(DialogActions,null,React.createElement(Button,{onClick:this.handleCloseDialog,color:\"primary\"},t('Cancel')),React.createElement(Button,{onClick:this.handleStopPoll,color:\"primary\"},t('Stop')))));}}]);return Poll;}(React.Component);export default withTranslation()(Poll);","map":{"version":3,"sources":["/Users/yosuahalim/Documents/Projects/telegram-app/src/Components/Message/Media/Poll.js"],"names":["React","withTranslation","Popover","MenuItem","MenuList","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","PollOption","cancelPollAnswer","setPollAnswer","stopPoll","MessageStore","Poll","state","dialog","contextMenu","left","top","getTotalVoterCountString","count","t","key","handleVote","index","props","chatId","messageId","handleUnvote","event","stopPropagation","poll","handleCloseContextMenu","is_closed","handleStopPoll","setState","handleDialog","handleCloseDialog","handleContextMenu","preventDefault","clientX","clientY","question","options","total_voter_count","message","get","canUnvote","some","x","is_chosen","is_being_chosen","canStopPoll","can_be_edited","canBeSelected","every","maxVoterCount","Math","max","map","voter_count","vertical","horizontal","e","Component"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Popover from '@material-ui/core/Popover';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport PollOption from './PollOption';\nimport { cancelPollAnswer, setPollAnswer, stopPoll } from '../../../Actions/Poll';\nimport MessageStore from './../../../Stores/MessageStore';\nimport './Poll.css';\n\nclass Poll extends React.Component {\n    state = {\n        dialog: false,\n        contextMenu: false,\n        left: 0,\n        top: 0\n    };\n\n    getTotalVoterCountString = (count, t = key => key) => {\n        if (!count) return t('NoVotes');\n        if (count === 1) return '1 vote';\n\n        return count + ' votes';\n    };\n\n    handleVote = index => {\n        const { chatId, messageId } = this.props;\n\n        setPollAnswer(chatId, messageId, [index]);\n    };\n\n    handleUnvote = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        const { chatId, messageId, poll } = this.props;\n        const { contextMenu } = this.state;\n\n        if (contextMenu) {\n            this.handleCloseContextMenu();\n        }\n\n        const { is_closed } = poll;\n        if (is_closed) return;\n\n        cancelPollAnswer(chatId, messageId);\n    };\n\n    handleStopPoll = event => {\n        event.stopPropagation();\n\n        const { chatId, messageId } = this.props;\n        const { dialog } = this.state;\n\n        if (dialog) {\n            this.setState({ dialog: false });\n        }\n\n        stopPoll(chatId, messageId);\n    };\n\n    handleDialog = event => {\n        const { dialog } = this.state;\n        if (dialog) return;\n\n        this.setState({\n            dialog: true,\n            contextMenu: false\n        });\n    };\n\n    handleCloseDialog = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        this.setState({ dialog: false });\n    };\n\n    handleContextMenu = event => {\n        const { poll } = this.props;\n        const { is_closed } = poll;\n        if (is_closed) return;\n\n        if (event) {\n            event.preventDefault();\n            event.stopPropagation();\n        }\n\n        const { contextMenu } = this.state;\n\n        if (contextMenu) {\n            this.setState({ contextMenu: false });\n        } else {\n            this.setState({\n                contextMenu: true,\n                left: event.clientX,\n                top: event.clientY\n            });\n        }\n    };\n\n    handleCloseContextMenu = event => {\n        if (event) {\n            event.stopPropagation();\n        }\n\n        this.setState({ contextMenu: false });\n    };\n\n    render() {\n        const { chatId, messageId, poll, t } = this.props;\n        const { left, top, contextMenu, dialog } = this.state;\n        const { question, options, total_voter_count, is_closed } = poll;\n\n        const message = MessageStore.get(chatId, messageId);\n        if (!message) return null;\n\n        const canUnvote = !is_closed && options.some(x => x.is_chosen || x.is_being_chosen);\n        const canStopPoll = message && message.can_be_edited;\n        const canBeSelected = !is_closed && options.every(x => !x.is_chosen);\n        const maxVoterCount = Math.max(...options.map(x => x.voter_count));\n\n        return (\n            <div className='poll' onContextMenu={this.handleContextMenu}>\n                <div className='poll-question'>\n                    <span className='poll-question-title'>{question}</span>\n                    <span className='subtitle'>{is_closed ? t('FinalResults') : t('AnonymousPoll')}</span>\n                </div>\n                <div className='poll-options'>\n                    {options.map((x, index) => (\n                        <PollOption\n                            key={index}\n                            option={x}\n                            canBeSelected={canBeSelected}\n                            closed={is_closed}\n                            maxVoterCount={maxVoterCount}\n                            onVote={() => this.handleVote(index)}\n                            onUnvote={this.handleUnvote}\n                        />\n                    ))}\n                </div>\n                <div className='poll-total-count subtitle'>{this.getTotalVoterCountString(total_voter_count, t)}</div>\n                <Popover\n                    open={contextMenu && (canUnvote || canStopPoll)}\n                    onClose={this.handleCloseContextMenu}\n                    anchorReference='anchorPosition'\n                    anchorPosition={{ top, left }}\n                    anchorOrigin={{\n                        vertical: 'bottom',\n                        horizontal: 'right'\n                    }}\n                    transformOrigin={{\n                        vertical: 'top',\n                        horizontal: 'left'\n                    }}>\n                    <MenuList onClick={e => e.stopPropagation()}>\n                        {canUnvote && <MenuItem onClick={this.handleUnvote}>{t('Unvote')}</MenuItem>}\n                        {canStopPoll && <MenuItem onClick={this.handleDialog}>{t('StopPoll')}</MenuItem>}\n                    </MenuList>\n                </Popover>\n                <Dialog\n                    transitionDuration={0}\n                    open={dialog}\n                    onClose={this.handleCloseDialog}\n                    aria-labelledby='form-dialog-title'>\n                    <DialogTitle id='form-dialog-title'>{t('StopPollAlertTitle')}</DialogTitle>\n                    <DialogContent>\n                        <DialogContentText>{t('StopPollAlertText')}</DialogContentText>\n                    </DialogContent>\n                    <DialogActions>\n                        <Button onClick={this.handleCloseDialog} color='primary'>\n                            {t('Cancel')}\n                        </Button>\n                        <Button onClick={this.handleStopPoll} color='primary'>\n                            {t('Stop')}\n                        </Button>\n                    </DialogActions>\n                </Dialog>\n            </div>\n        );\n    }\n}\n\nPoll.propTypes = {\n    chatId: PropTypes.number.isRequired,\n    messageId: PropTypes.number.isRequired,\n    poll: PropTypes.object.isRequired,\n    openMedia: PropTypes.func.isRequired\n};\n\nexport default withTranslation()(Poll);\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _classCallCheck from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import InputBoxControl from'./InputBoxControl';import FooterCommand from'./FooterCommand';import NotificationsCommandControl from'./NotificationsCommandControl';import{hasBasicGroupId,hasSupergroupId}from'../../Utils/Chat';import ChatStore from'../../Stores/ChatStore';import BasicGroupStore from'../../Stores/BasicGroupStore';import SupergroupStore from'../../Stores/SupergroupStore';import TdLibController from'../../Controllers/TdLibController';import'./Footer.css';var Footer=/*#__PURE__*/function(_React$Component){_inherits(Footer,_React$Component);function Footer(props){var _this;_classCallCheck(this,Footer);_this=_possibleConstructorReturn(this,_getPrototypeOf(Footer).call(this,props));_this.onUpdateBasicGroup=function(update){var chatId=_this.props.chatId;if(hasBasicGroupId(chatId,update.basic_group.id)){_this.forceUpdate();}};_this.onUpdateSupergroup=function(update){var chatId=_this.props.chatId;if(hasSupergroupId(chatId,update.supergroup.id)){_this.forceUpdate();}};_this.handleJoin=function(){var chatId=_this.props.chatId;if(!chatId)return;TdLibController.send({'@type':'joinChat',chat_id:chatId});};_this.handleDeleteAndExit=function(){var chatId=_this.props.chatId;if(!chatId)return;TdLibController.send({'@type':'deleteChatHistory',chat_id:chatId,remove_from_chat_list:true});// TdLibController\n//     .send({\n//         '@type': 'leaveChat',\n//         chat_id: this.props.chatId\n//     });\n};return _this;}_createClass(Footer,[{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps,nextState){if(nextProps.chatId!==this.props.chatId){return true;}return false;}},{key:\"componentDidMount\",value:function componentDidMount(){BasicGroupStore.on('updateBasicGroup',this.onUpdateBasicGroup);SupergroupStore.on('updateSupergroup',this.onUpdateSupergroup);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){BasicGroupStore.removeListener('updateBasicGroup',this.onUpdateBasicGroup);SupergroupStore.removeListener('updateSupergroup',this.onUpdateSupergroup);}},{key:\"render\",value:function render(){var chatId=this.props.chatId;var chat=ChatStore.get(chatId);if(!chat)return null;if(!chat.type)return null;switch(chat.type['@type']){case'chatTypeBasicGroup':{var basicGroup=BasicGroupStore.get(chat.type.basic_group_id);if(basicGroup&&basicGroup.status){switch(basicGroup.status['@type']){case'chatMemberStatusAdministrator':{return React.createElement(InputBoxControl,null);}case'chatMemberStatusBanned':{return React.createElement(FooterCommand,{command:\"delete and exit\",onCommand:this.handleDeleteAndExit});}case'chatMemberStatusCreator':{return React.createElement(InputBoxControl,null);}case'chatMemberStatusLeft':{return null;}case'chatMemberStatusMember':{return React.createElement(InputBoxControl,null);}case'chatMemberStatusRestricted':{if(basicGroup.status.is_member){if(!basicGroup.status.can_send_messages){return null;}return React.createElement(InputBoxControl,null);}else{return React.createElement(FooterCommand,{command:\"join\",onCommand:this.handleJoin});}}}}break;}case'chatTypePrivate':{return React.createElement(InputBoxControl,null);}case'chatTypeSecret':{return React.createElement(InputBoxControl,null);}case'chatTypeSupergroup':{var supergroup=SupergroupStore.get(chat.type.supergroup_id);if(supergroup&&supergroup.status){switch(supergroup.status['@type']){case'chatMemberStatusAdministrator':{return React.createElement(InputBoxControl,null);}case'chatMemberStatusBanned':{return React.createElement(FooterCommand,{command:\"delete and exit\",onCommand:this.handleDeleteAndExit});}case'chatMemberStatusCreator':{return React.createElement(InputBoxControl,null);}case'chatMemberStatusLeft':{return React.createElement(FooterCommand,{command:\"join\",onCommand:this.handleJoin});}case'chatMemberStatusMember':{if(supergroup.is_channel){return React.createElement(NotificationsCommandControl,{chatId:chatId});}else{return React.createElement(InputBoxControl,null);}}case'chatMemberStatusRestricted':{if(supergroup.status.is_member){if(!supergroup.status.can_send_messages){return null;}return React.createElement(InputBoxControl,null);}else{return React.createElement(FooterCommand,{command:\"join\",onCommand:this.handleJoin});}}}}}}return null;}}]);return Footer;}(React.Component);export default Footer;","map":{"version":3,"sources":["/home/me-admin/Downloads/my-app/src/Components/ColumnMiddle/Footer.js"],"names":["React","InputBoxControl","FooterCommand","NotificationsCommandControl","hasBasicGroupId","hasSupergroupId","ChatStore","BasicGroupStore","SupergroupStore","TdLibController","Footer","props","onUpdateBasicGroup","update","chatId","basic_group","id","forceUpdate","onUpdateSupergroup","supergroup","handleJoin","send","chat_id","handleDeleteAndExit","remove_from_chat_list","nextProps","nextState","on","removeListener","chat","get","type","basicGroup","basic_group_id","status","is_member","can_send_messages","supergroup_id","is_channel","Component"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport InputBoxControl from './InputBoxControl';\nimport FooterCommand from './FooterCommand';\nimport NotificationsCommandControl from './NotificationsCommandControl';\nimport { hasBasicGroupId, hasSupergroupId } from '../../Utils/Chat';\nimport ChatStore from '../../Stores/ChatStore';\nimport BasicGroupStore from '../../Stores/BasicGroupStore';\nimport SupergroupStore from '../../Stores/SupergroupStore';\nimport TdLibController from '../../Controllers/TdLibController';\nimport './Footer.css';\n\nclass Footer extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (nextProps.chatId !== this.props.chatId) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        BasicGroupStore.on('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.on('updateSupergroup', this.onUpdateSupergroup);\n    }\n\n    componentWillUnmount() {\n        BasicGroupStore.removeListener('updateBasicGroup', this.onUpdateBasicGroup);\n        SupergroupStore.removeListener('updateSupergroup', this.onUpdateSupergroup);\n    }\n\n    onUpdateBasicGroup = update => {\n        const { chatId } = this.props;\n\n        if (hasBasicGroupId(chatId, update.basic_group.id)) {\n            this.forceUpdate();\n        }\n    };\n\n    onUpdateSupergroup = update => {\n        const { chatId } = this.props;\n\n        if (hasSupergroupId(chatId, update.supergroup.id)) {\n            this.forceUpdate();\n        }\n    };\n\n    handleJoin = () => {\n        const { chatId } = this.props;\n        if (!chatId) return;\n\n        TdLibController.send({\n            '@type': 'joinChat',\n            chat_id: chatId\n        });\n    };\n\n    handleDeleteAndExit = () => {\n        const { chatId } = this.props;\n        if (!chatId) return;\n\n        TdLibController.send({\n            '@type': 'deleteChatHistory',\n            chat_id: chatId,\n            remove_from_chat_list: true\n        });\n\n        // TdLibController\n        //     .send({\n        //         '@type': 'leaveChat',\n        //         chat_id: this.props.chatId\n        //     });\n    };\n\n    render() {\n        const { chatId } = this.props;\n        const chat = ChatStore.get(chatId);\n        if (!chat) return null;\n        if (!chat.type) return null;\n\n        switch (chat.type['@type']) {\n            case 'chatTypeBasicGroup': {\n                const basicGroup = BasicGroupStore.get(chat.type.basic_group_id);\n                if (basicGroup && basicGroup.status) {\n                    switch (basicGroup.status['@type']) {\n                        case 'chatMemberStatusAdministrator': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusBanned': {\n                            return <FooterCommand command='delete and exit' onCommand={this.handleDeleteAndExit} />;\n                        }\n                        case 'chatMemberStatusCreator': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusLeft': {\n                            return null;\n                        }\n                        case 'chatMemberStatusMember': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusRestricted': {\n                            if (basicGroup.status.is_member) {\n                                if (!basicGroup.status.can_send_messages) {\n                                    return null;\n                                }\n\n                                return <InputBoxControl />;\n                            } else {\n                                return <FooterCommand command='join' onCommand={this.handleJoin} />;\n                            }\n                        }\n                    }\n                }\n\n                break;\n            }\n            case 'chatTypePrivate': {\n                return <InputBoxControl />;\n            }\n            case 'chatTypeSecret': {\n                return <InputBoxControl />;\n            }\n            case 'chatTypeSupergroup': {\n                const supergroup = SupergroupStore.get(chat.type.supergroup_id);\n                if (supergroup && supergroup.status) {\n                    switch (supergroup.status['@type']) {\n                        case 'chatMemberStatusAdministrator': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusBanned': {\n                            return <FooterCommand command='delete and exit' onCommand={this.handleDeleteAndExit} />;\n                        }\n                        case 'chatMemberStatusCreator': {\n                            return <InputBoxControl />;\n                        }\n                        case 'chatMemberStatusLeft': {\n                            return <FooterCommand command='join' onCommand={this.handleJoin} />;\n                        }\n                        case 'chatMemberStatusMember': {\n                            if (supergroup.is_channel) {\n                                return <NotificationsCommandControl chatId={chatId} />;\n                            } else {\n                                return <InputBoxControl />;\n                            }\n                        }\n                        case 'chatMemberStatusRestricted': {\n                            if (supergroup.status.is_member) {\n                                if (!supergroup.status.can_send_messages) {\n                                    return null;\n                                }\n\n                                return <InputBoxControl />;\n                            } else {\n                                return <FooterCommand command='join' onCommand={this.handleJoin} />;\n                            }\n                        }\n                    }\n                }\n            }\n        }\n\n        return null;\n    }\n}\n\nexport default Footer;\n"]},"metadata":{},"sourceType":"module"}
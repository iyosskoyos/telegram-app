{"ast":null,"code":"import _classCallCheck from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import{withTranslation}from'react-i18next';import Button from'@material-ui/core/Button';import Dialog from'@material-ui/core/Dialog';import DialogTitle from'@material-ui/core/DialogTitle';import DialogContent from'@material-ui/core/DialogContent';import DialogContentText from'@material-ui/core/DialogContentText';import DialogActions from'@material-ui/core/DialogActions';import{getDecodedUrl,getHref,isUrlSafe}from'../../Utils/Url';import'./SafeLink.css';var SafeLink=/*#__PURE__*/function(_React$Component){_inherits(SafeLink,_React$Component);function SafeLink(props){var _this;_classCallCheck(this,SafeLink);_this=_possibleConstructorReturn(this,_getPrototypeOf(SafeLink).call(this,props));_this.handleClick=function(event){event.preventDefault();event.stopPropagation();_this.setState({confirm:true});};_this.handleDialogClick=function(event){event.preventDefault();event.stopPropagation();};_this.handleClose=function(){_this.setState({confirm:false});};_this.handleDone=function(event){_this.handleClose();var _this$props=_this.props,url=_this$props.url,onClick=_this$props.onClick;if(!url)return;if(onClick){onClick(event);}else{var newWindow=window.open();newWindow.opener=null;newWindow.location=url;}};_this.handleSafeClick=function(event){event.stopPropagation();var onClick=_this.props.onClick;if(onClick){event.preventDefault();onClick(event);}};_this.state={};return _this;}_createClass(SafeLink,[{key:\"render\",value:function render(){var _this$props2=this.props,className=_this$props2.className,children=_this$props2.children,t=_this$props2.t,url=_this$props2.url;var _this$state=this.state,confirm=_this$state.confirm,decodedUrl=_this$state.decodedUrl,href=_this$state.href,safe=_this$state.safe;if(!url)return null;if(!decodedUrl)return null;return React.createElement(React.Fragment,null,safe?React.createElement(\"a\",{className:className,href:href,title:decodedUrl,target:\"_blank\",rel:\"noopener norefferer\",onClick:this.handleSafeClick},children||url):React.createElement(React.Fragment,null,React.createElement(\"a\",{className:className,title:decodedUrl,onClick:this.handleClick},children||url),confirm&&React.createElement(Dialog,{transitionDuration:0,open:confirm,onClose:this.handleClose,onClick:this.handleDialogClick,\"aria-labelledby\":\"confirm-dialog-title\"},React.createElement(DialogTitle,{id:\"confirm-dialog-title\"},t('Confirm')),React.createElement(DialogContent,{classes:{root:'safe-link-content-root'}},React.createElement(DialogContentText,null,\"Open this link?\\n\\n\".concat(decodedUrl))),React.createElement(DialogActions,null,React.createElement(Button,{onClick:this.handleClose},t('Cancel')),React.createElement(Button,{onClick:this.handleDone,color:\"primary\"},t('Open'))))));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){var displayText=props.displayText,mail=props.mail,url=props.url;if(state.prevUrl!==url||state.prevDisplayText!==displayText){return{prevUrl:url,prevDisplayText:displayText,safe:isUrlSafe(displayText,url),decodedUrl:getDecodedUrl(url,mail),href:getHref(url,mail),confirm:false};}return null;}}]);return SafeLink;}(React.Component);export default withTranslation()(SafeLink);","map":{"version":3,"sources":["/home/me-admin/Downloads/my-app/src/Components/Additional/SafeLink.js"],"names":["React","withTranslation","Button","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","getDecodedUrl","getHref","isUrlSafe","SafeLink","props","handleClick","event","preventDefault","stopPropagation","setState","confirm","handleDialogClick","handleClose","handleDone","url","onClick","newWindow","window","open","opener","location","handleSafeClick","state","className","children","t","decodedUrl","href","safe","root","displayText","mail","prevUrl","prevDisplayText","Component"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { withTranslation } from 'react-i18next';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport { getDecodedUrl, getHref, isUrlSafe } from '../../Utils/Url';\nimport './SafeLink.css';\n\nclass SafeLink extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {};\n    }\n\n    static getDerivedStateFromProps(props, state) {\n        const { displayText, mail, url } = props;\n\n        if (state.prevUrl !== url || state.prevDisplayText !== displayText) {\n            return {\n                prevUrl: url,\n                prevDisplayText: displayText,\n                safe: isUrlSafe(displayText, url),\n                decodedUrl: getDecodedUrl(url, mail),\n                href: getHref(url, mail),\n                confirm: false\n            };\n        }\n\n        return null;\n    }\n\n    handleClick = event => {\n        event.preventDefault();\n        event.stopPropagation();\n\n        this.setState({ confirm: true });\n    };\n\n    handleDialogClick = event => {\n        event.preventDefault();\n        event.stopPropagation();\n    };\n\n    handleClose = () => {\n        this.setState({ confirm: false });\n    };\n\n    handleDone = event => {\n        this.handleClose();\n\n        const { url, onClick } = this.props;\n        if (!url) return;\n\n        if (onClick) {\n            onClick(event);\n        } else {\n            const newWindow = window.open();\n            newWindow.opener = null;\n            newWindow.location = url;\n        }\n    };\n\n    handleSafeClick = event => {\n        event.stopPropagation();\n\n        const { onClick } = this.props;\n\n        if (onClick) {\n            event.preventDefault();\n            onClick(event);\n        }\n    };\n\n    render() {\n        const { className, children, t, url } = this.props;\n        const { confirm, decodedUrl, href, safe } = this.state;\n\n        if (!url) return null;\n        if (!decodedUrl) return null;\n\n        return (\n            <>\n                {safe ? (\n                    <a\n                        className={className}\n                        href={href}\n                        title={decodedUrl}\n                        target='_blank'\n                        rel='noopener norefferer'\n                        onClick={this.handleSafeClick}>\n                        {children || url}\n                    </a>\n                ) : (\n                    <>\n                        <a className={className} title={decodedUrl} onClick={this.handleClick}>\n                            {children || url}\n                        </a>\n                        {confirm && (\n                            <Dialog\n                                transitionDuration={0}\n                                open={confirm}\n                                onClose={this.handleClose}\n                                onClick={this.handleDialogClick}\n                                aria-labelledby='confirm-dialog-title'>\n                                <DialogTitle id='confirm-dialog-title'>{t('Confirm')}</DialogTitle>\n                                <DialogContent classes={{ root: 'safe-link-content-root' }}>\n                                    <DialogContentText>{`Open this link?\\n\\n${decodedUrl}`}</DialogContentText>\n                                </DialogContent>\n                                <DialogActions>\n                                    <Button onClick={this.handleClose}>{t('Cancel')}</Button>\n                                    <Button onClick={this.handleDone} color='primary'>\n                                        {t('Open')}\n                                    </Button>\n                                </DialogActions>\n                            </Dialog>\n                        )}\n                    </>\n                )}\n            </>\n        );\n    }\n}\n\nSafeLink.propTypes = {\n    url: PropTypes.string.isRequired,\n    displayText: PropTypes.string,\n    mail: PropTypes.bool,\n    onClick: PropTypes.func\n};\n\nexport default withTranslation()(SafeLink);\n"]},"metadata":{},"sourceType":"module"}
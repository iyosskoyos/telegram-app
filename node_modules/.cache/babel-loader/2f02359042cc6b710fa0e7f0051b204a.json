{"ast":null,"code":"import _classCallCheck from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/me-admin/Downloads/my-app/node_modules/@babel/runtime/helpers/esm/inherits\";/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */import React from'react';import ArrowDownwardIcon from'@material-ui/icons/ArrowDownward';import PlayArrowIcon from'@material-ui/icons/PlayArrow';import PauseIcon from'@material-ui/icons/Pause';import DocumentTile from'../../Tile/DocumentTile';import AudioAction from'./AudioAction';import FileProgress from'../../Viewer/FileProgress';import{getAudioTitle}from'../../../Utils/Media';import PlayerStore from'../../../Stores/PlayerStore';import'./Audio.css';import InsertDriveFileIcon from'./Document';var Audio=/*#__PURE__*/function(_React$Component){_inherits(Audio,_React$Component);function Audio(props){var _this;_classCallCheck(this,Audio);_this=_possibleConstructorReturn(this,_getPrototypeOf(Audio).call(this,props));_this.onClientUpdateMediaEnd=function(update){var _this$props=_this.props,chatId=_this$props.chatId,messageId=_this$props.messageId;if(chatId===update.chatId&&messageId===update.messageId){_this.setState({active:false,playing:false,currentTime:0});}};_this.onClientUpdateMediaPlay=function(update){var _this$props2=_this.props,chatId=_this$props2.chatId,messageId=_this$props2.messageId,playing=_this$props2.playing;if(chatId===update.chatId&&messageId===update.messageId){_this.setState({playing:true});}else{_this.setState({playing:false});}};_this.onClientUpdateMediaPause=function(update){var _this$props3=_this.props,chatId=_this$props3.chatId,messageId=_this$props3.messageId;if(chatId===update.chatId&&messageId===update.messageId){_this.setState({playing:false});}};_this.onClientUpdateMediaActive=function(update){var _this$props4=_this.props,chatId=_this$props4.chatId,messageId=_this$props4.messageId;if(chatId===update.chatId&&messageId===update.messageId){if(!_this.state.active){_this.setState({active:true,currentTime:0,playing:true});}}else if(_this.state.active){_this.setState({active:false,currentTime:0,playing:false});}};var _chatId=props.chatId,_messageId=props.messageId;var time=PlayerStore.time,message=PlayerStore.message,playing=PlayerStore.playing;var active=message&&message.chat_id===_chatId&&message.id===_messageId;_this.state={active:active,playing:active?playing:false,currentTime:active&&time?time.currentTime:0,duration:active&&time?time.duration:0};return _this;}_createClass(Audio,[{key:\"shouldComponentUpdate\",value:function shouldComponentUpdate(nextProps,nextState,nextContext){var _this$state=this.state,active=_this$state.active,playing=_this$state.playing,currentTime=_this$state.currentTime,duration=_this$state.duration;if(nextState.active!==active){return true;}if(nextState.playing!==playing){return true;}if(nextState.currentTime!==currentTime){return true;}if(nextState.duration!==duration){return true;}return false;}},{key:\"componentDidMount\",value:function componentDidMount(){PlayerStore.on('clientUpdateMediaActive',this.onClientUpdateMediaActive);PlayerStore.on('clientUpdateMediaPlay',this.onClientUpdateMediaPlay);PlayerStore.on('clientUpdateMediaPause',this.onClientUpdateMediaPause);PlayerStore.on('clientUpdateMediaEnd',this.onClientUpdateMediaEnd);}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){PlayerStore.removeListener('clientUpdateMediaActive',this.onClientUpdateMediaActive);PlayerStore.removeListener('clientUpdateMediaPlay',this.onClientUpdateMediaPlay);PlayerStore.removeListener('clientUpdateMediaPause',this.onClientUpdateMediaPause);PlayerStore.removeListener('clientUpdateMediaEnd',this.onClientUpdateMediaEnd);}},{key:\"render\",value:function render(){var _this$props5=this.props,chatId=_this$props5.chatId,messageId=_this$props5.messageId,audio=_this$props5.audio,openMedia=_this$props5.openMedia;var playing=this.state.playing;if(!audio)return null;var album_cover_thumbnail=audio.album_cover_thumbnail,duration=audio.duration,file=audio.audio;var title=getAudioTitle(audio);return React.createElement(\"div\",{className:\"document\"},React.createElement(DocumentTile,{thumbnail:album_cover_thumbnail,file:file,openMedia:openMedia,icon:React.createElement(ArrowDownwardIcon,null),completeIcon:playing?React.createElement(PauseIcon,null):React.createElement(PlayArrowIcon,null)}),React.createElement(\"div\",{className:\"document-content\"},React.createElement(\"div\",{className:\"document-title\"},React.createElement(\"a\",{className:\"document-name\",onClick:openMedia,title:title},title)),React.createElement(AudioAction,{chatId:chatId,messageId:messageId,duration:duration,file:file})));}}]);return Audio;}(React.Component);export default Audio;","map":{"version":3,"sources":["/home/me-admin/Downloads/my-app/src/Components/Message/Media/Audio.js"],"names":["React","ArrowDownwardIcon","PlayArrowIcon","PauseIcon","DocumentTile","AudioAction","FileProgress","getAudioTitle","PlayerStore","InsertDriveFileIcon","Audio","props","onClientUpdateMediaEnd","update","chatId","messageId","setState","active","playing","currentTime","onClientUpdateMediaPlay","onClientUpdateMediaPause","onClientUpdateMediaActive","state","time","message","chat_id","id","duration","nextProps","nextState","nextContext","on","removeListener","audio","openMedia","album_cover_thumbnail","file","title","Component"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2018-present, Evgeny Nadymov\n *\n * This source code is licensed under the GPL v.3.0 license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\nimport PlayArrowIcon from '@material-ui/icons/PlayArrow';\nimport PauseIcon from '@material-ui/icons/Pause';\nimport DocumentTile from '../../Tile/DocumentTile';\nimport AudioAction from './AudioAction';\nimport FileProgress from '../../Viewer/FileProgress';\nimport { getAudioTitle } from '../../../Utils/Media';\nimport PlayerStore from '../../../Stores/PlayerStore';\nimport './Audio.css';\nimport InsertDriveFileIcon from './Document';\n\nclass Audio extends React.Component {\n    constructor(props) {\n        super(props);\n\n        const { chatId, messageId } = props;\n\n        const { time, message, playing } = PlayerStore;\n        const active = message && message.chat_id === chatId && message.id === messageId;\n\n        this.state = {\n            active: active,\n            playing: active ? playing : false,\n            currentTime: active && time ? time.currentTime : 0,\n            duration: active && time ? time.duration : 0\n        };\n    }\n\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\n        const { active, playing, currentTime, duration } = this.state;\n\n        if (nextState.active !== active) {\n            return true;\n        }\n\n        if (nextState.playing !== playing) {\n            return true;\n        }\n\n        if (nextState.currentTime !== currentTime) {\n            return true;\n        }\n\n        if (nextState.duration !== duration) {\n            return true;\n        }\n\n        return false;\n    }\n\n    componentDidMount() {\n        PlayerStore.on('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.on('clientUpdateMediaPlay', this.onClientUpdateMediaPlay);\n        PlayerStore.on('clientUpdateMediaPause', this.onClientUpdateMediaPause);\n        PlayerStore.on('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    componentWillUnmount() {\n        PlayerStore.removeListener('clientUpdateMediaActive', this.onClientUpdateMediaActive);\n        PlayerStore.removeListener('clientUpdateMediaPlay', this.onClientUpdateMediaPlay);\n        PlayerStore.removeListener('clientUpdateMediaPause', this.onClientUpdateMediaPause);\n        PlayerStore.removeListener('clientUpdateMediaEnd', this.onClientUpdateMediaEnd);\n    }\n\n    onClientUpdateMediaEnd = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({\n                active: false,\n                playing: false,\n                currentTime: 0\n            });\n        }\n    };\n\n    onClientUpdateMediaPlay = update => {\n        const { chatId, messageId, playing } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({ playing: true });\n        } else {\n            this.setState({ playing: false });\n        }\n    };\n\n    onClientUpdateMediaPause = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            this.setState({ playing: false });\n        }\n    };\n\n    onClientUpdateMediaActive = update => {\n        const { chatId, messageId } = this.props;\n\n        if (chatId === update.chatId && messageId === update.messageId) {\n            if (!this.state.active) {\n                this.setState({\n                    active: true,\n                    currentTime: 0,\n                    playing: true\n                });\n            }\n        } else if (this.state.active) {\n            this.setState({\n                active: false,\n                currentTime: 0,\n                playing: false\n            });\n        }\n    };\n\n    render() {\n        const { chatId, messageId, audio, openMedia } = this.props;\n        const { playing } = this.state;\n        if (!audio) return null;\n\n        const { album_cover_thumbnail, duration, audio: file } = audio;\n\n        const title = getAudioTitle(audio);\n\n        return (\n            <div className='document'>\n                <DocumentTile\n                    thumbnail={album_cover_thumbnail}\n                    file={file}\n                    openMedia={openMedia}\n                    icon={<ArrowDownwardIcon />}\n                    completeIcon={playing ? <PauseIcon /> : <PlayArrowIcon />}\n                />\n                <div className='document-content'>\n                    <div className='document-title'>\n                        <a className='document-name' onClick={openMedia} title={title}>\n                            {title}\n                        </a>\n                    </div>\n                    <AudioAction chatId={chatId} messageId={messageId} duration={duration} file={file} />\n                </div>\n            </div>\n        );\n    }\n}\n\nAudio.propTypes = {\n    chatId: PropTypes.number,\n    messageId: PropTypes.number,\n    audio: PropTypes.object,\n    openMedia: PropTypes.func\n};\n\nexport default Audio;\n"]},"metadata":{},"sourceType":"module"}